<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ATL Vibes & Views - Atlanta's Neighborhood & Culture Magazine</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700;900&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <!-- IDX Broker Widget Script - Replace YOUR_IDX_ACCOUNT_ID with your actual account ID -->
  <script src="https://d32yb73xogvp0m.cloudfront.net/js/widgets/idx-widgets.js" data-idx-account="YOUR_IDX_ACCOUNT_ID"></script>
  <style>
    :root {
      --primary-yellow: #FFD95A;
      --primary-red: #DC3535;
      --primary-black: #0A0A0A;
      --primary-white: #FAFAFA;
      --secondary-yellow: #FFF4D6;
      --accent-red: #A82B2B;
      --text-dark: #1A1A1A;
      --text-light: #6B6B6B;
      --border-color: #E5E5E5;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Source Sans 3', sans-serif;
      background-color: var(--primary-white);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Cormorant Garamond', 'Playfair Display', serif;
      font-weight: 600;
      line-height: 1.1;
    }

    /* Navigation */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--primary-white);
      z-index: 1000;
      padding: 1.5rem 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      box-shadow: 0 2px 20px rgba(0,0,0,0.03);
    }

    .logo {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      text-decoration: none;
    }

    .logo-main {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-black);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      line-height: 1;
    }

    .logo-tagline {
      font-family: 'Source Sans 3', sans-serif;
      font-size: 0.65rem;
      font-weight: 400;
      color: var(--text-light);
      letter-spacing: 0.25em;
      text-transform: uppercase;
      margin-top: 4px;
    }

    .nav-links {
      display: flex;
      gap: 2.5rem;
      list-style: none;
      align-items: center;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-dark);
      font-weight: 600;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: color 0.3s;
      position: relative;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary-yellow);
      transition: width 0.3s;
    }

    .nav-links a:hover {
      color: var(--primary-red);
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    /* Areas Dropdown */
    .nav-dropdown {
      position: relative;
    }

    .nav-dropdown > a {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .nav-dropdown > a::before {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid currentColor;
      margin-left: 4px;
      transition: transform 0.3s;
    }

    .nav-dropdown:hover > a::before {
      transform: rotate(180deg);
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      min-width: 200px;
      padding: 0.5rem 0;
      border-radius: 8px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      margin-top: 10px;
    }

    .nav-dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      margin-top: 5px;
    }

    .dropdown-menu li {
      list-style: none;
    }

    .dropdown-menu a {
      display: block;
      padding: 0.7rem 1.2rem;
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9rem;
      text-transform: none;
      letter-spacing: 0;
      transition: all 0.2s;
    }

    .dropdown-menu a:hover {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    .dropdown-menu a::after {
      display: none;
    }

    /* Mega Menu Styles */
    .nav-mega .mega-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      width: 800px;
      max-width: 90vw;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      margin-top: 10px;
    }

    .nav-mega:hover .mega-menu {
      opacity: 1;
      visibility: visible;
      margin-top: 5px;
    }

    .mega-menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border-color);
    }

    .mega-menu-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-dark);
    }

    .mega-menu-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .mega-menu-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.2s;
      cursor: pointer;
    }

    .mega-menu-item:hover {
      background: var(--secondary-yellow);
    }

    .mega-menu-item-image {
      width: 60px;
      height: 60px;
      border-radius: 6px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .mega-menu-item-content {
      flex: 1;
      min-width: 0;
    }

    .mega-menu-item-name {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--text-dark);
      margin-bottom: 0.2rem;
    }

    .mega-menu-item-story {
      font-size: 0.75rem;
      color: var(--text-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Mobile Menu Toggle */
    .mobile-menu-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      color: var(--text-dark);
      z-index: 1001;
    }

    /* Mobile Navigation Overlay */
    .mobile-nav {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      z-index: 999;
      padding-top: 80px;
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }

    .mobile-nav.open {
      transform: translateX(0);
    }

    .mobile-nav-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 1.5rem 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      background: white;
    }

    .mobile-nav-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      color: var(--text-dark);
    }

    .mobile-nav-links {
      list-style: none;
      padding: 1rem 0;
    }

    .mobile-nav-links > li {
      border-bottom: 1px solid var(--border-color);
    }

    .mobile-nav-links > li > a,
    .mobile-nav-links > li > button {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 1rem 5%;
      text-decoration: none;
      color: var(--text-dark);
      font-weight: 600;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: none;
      border: none;
      cursor: pointer;
      text-align: left;
    }

    .mobile-nav-links > li > a:hover,
    .mobile-nav-links > li > button:hover {
      background: var(--secondary-yellow);
    }

    .mobile-dropdown-arrow {
      transition: transform 0.3s;
    }

    .mobile-dropdown-arrow.open {
      transform: rotate(180deg);
    }

    .mobile-dropdown-content {
      display: none;
      background: #f9f9f9;
      padding: 0.5rem 0;
    }

    .mobile-dropdown-content.open {
      display: block;
    }

    .mobile-dropdown-content a {
      display: block;
      padding: 0.75rem 5%;
      padding-left: 10%;
      text-decoration: none;
      color: var(--text-dark);
      font-weight: 500;
      font-size: 0.9rem;
    }

    .mobile-dropdown-content a:hover {
      background: var(--primary-yellow);
    }

    /* Mobile Responsive Breakpoints */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .mobile-menu-toggle {
        display: block;
      }

      .mobile-nav {
        display: block;
      }

      .mega-menu-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .navbar {
        padding: 1rem 5%;
      }

      .logo-main {
        font-size: 1.5rem;
      }

      .logo-tagline {
        font-size: 0.55rem;
      }
    }

    @media (max-width: 480px) {
      .mega-menu-grid {
        grid-template-columns: 1fr;
      }
    }

    .submit-btn {
      background: var(--primary-red);
      color: white;
      padding: 0.7rem 1.5rem;
      border-radius: 4px;
      transition: all 0.3s;
    }

    .submit-btn:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    /* Hero Section */
    .hero {
      margin-top: 80px;
      height: calc(100vh - 80px);
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, var(--primary-black) 0%, #2A2A2A 100%);
    }

    .hero-content {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.7) 100%);
      z-index: 2;
    }

    .hero-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.4;
    }

    .hero-text {
      text-align: center;
      color: white;
      max-width: 900px;
      padding: 2rem;
      z-index: 3;
      animation: fadeInUp 1s ease-out;
    }

    .hero-category {
      display: inline-block;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.5);
      color: white;
      padding: 0.5rem 1.5rem;
      font-size: 0.7rem;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      margin-bottom: 2rem;
    }

    .hero-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 5rem;
      margin-bottom: 1.5rem;
      font-weight: 500;
      letter-spacing: 0.02em;
      line-height: 1.1;
      text-shadow: 0 4px 30px rgba(0,0,0,0.4);
    }

    .hero-meta {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.8);
      font-weight: 300;
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    /* Featured Stories */
    .featured-stories {
      padding: 6rem 5%;
      background: white;
    }

    .section-header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      position: relative;
      display: inline-block;
      letter-spacing: 0.05em;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 1px;
      background: var(--primary-black);
    }

    .section-subtitle {
      font-size: 0.85rem;
      color: var(--text-light);
      font-weight: 400;
      font-family: 'Source Sans 3', sans-serif;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-top: 1.5rem;
    }

    .featured-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 3rem;
      margin-top: 3rem;
    }

    .story-card {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.4s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .story-card:hover {
      transform: translateY(-8px);
    }

    .story-image {
      width: 100%;
      height: 400px;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .story-card:hover .story-image {
      transform: scale(1.1);
    }

    .story-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 2rem;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.9) 100%);
      color: white;
    }

    .story-tag {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--primary-yellow);
      font-weight: 400;
      margin-bottom: 0.75rem;
    }

    .story-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      line-height: 1.25;
      font-weight: 500;
    }

    .story-date {
      font-size: 0.75rem;
      color: rgba(255,255,255,0.6);
      letter-spacing: 0.1em;
    }

    /* Neighborhoods Section */
    .neighborhoods-section {
      padding: 5rem 5%;
      background: white;
      overflow: hidden;
    }

    .neighborhoods-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      max-width: 1100px;
      margin: 0 auto;
      align-items: center;
    }

    .neighborhoods-content h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3rem;
      font-weight: 600;
      color: var(--primary-black);
      line-height: 1.1;
      margin-bottom: 1.25rem;
    }

    .neighborhoods-content p {
      font-size: 1.05rem;
      color: var(--text-dark);
      line-height: 1.75;
      margin-bottom: 1.75rem;
    }

    .neighborhoods-btn {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 1rem 2.5rem;
      text-decoration: none;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      transition: all 0.3s;
    }

    .neighborhoods-btn:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(220, 53, 53, 0.3);
    }

    .illustrated-map-wrapper {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      max-width: 520px;
    }

    .map-image-container {
      position: relative;
      width: 100%;
    }

    .illustrated-map-image {
      width: 100%;
      height: auto;
      display: block;
    }

    .map-svg-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
    }

    .map-region {
      fill: rgba(255, 217, 90, 0.15);
      stroke: rgba(0, 0, 0, 0.2);
      stroke-width: 0.5;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .map-region:hover,
    .map-region.active {
      fill: rgba(255, 217, 90, 0.35);
      filter: drop-shadow(0 0 8px rgba(255, 215, 90, 0.5));
    }

    .map-tooltip {
      position: absolute;
      background: var(--primary-black);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-family: 'Source Sans 3', sans-serif;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      white-space: nowrap;
      pointer-events: none;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .map-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--primary-black);
    }

    @media (max-width: 968px) {
      .neighborhoods-container {
        grid-template-columns: 1fr;
        gap: 2.5rem;
      }

      .neighborhoods-content {
        text-align: center;
      }

      .neighborhoods-content h2 {
        font-size: 2.5rem;
      }
    }

    @media (max-width: 640px) {
      .neighborhoods-content h2 {
        font-size: 2rem;
      }

      .map-hotspot {
        font-size: 0.55rem;
        padding: 0.3rem 0.6rem;
      }
    }

    /* Auth & Dashboard Styles */
    .auth-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      padding: 1rem;
      animation: overlayFadeIn 0.3s ease;
    }

    .auth-card {
      background: white;
      border-radius: 12px;
      padding: 2.5rem;
      max-width: 420px;
      width: 100%;
      position: relative;
      animation: modalFadeIn 0.3s ease;
    }

    .auth-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
    }

    .auth-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
    }

    .auth-subtitle {
      color: var(--text-light);
      margin-bottom: 2rem;
      font-size: 0.95rem;
    }

    .auth-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border-color);
    }

    .auth-tab {
      padding: 0.75rem 0;
      background: none;
      border: none;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-light);
      cursor: pointer;
      position: relative;
    }

    .auth-tab.active {
      color: var(--primary-black);
    }

    .auth-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary-red);
    }

    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
    }

    .form-input {
      width: 100%;
      padding: 0.85rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary-yellow);
      box-shadow: 0 0 0 3px rgba(255, 217, 90, 0.2);
    }

    .form-select {
      width: 100%;
      padding: 0.85rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      background: white;
      cursor: pointer;
    }

    .form-textarea {
      width: 100%;
      padding: 0.85rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
    }

    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--primary-yellow);
      box-shadow: 0 0 0 3px rgba(255, 217, 90, 0.2);
    }

    .btn-primary {
      width: 100%;
      padding: 1rem;
      background: var(--primary-red);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    .btn-primary:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .btn-secondary {
      padding: 0.75rem 1.5rem;
      background: white;
      color: var(--primary-black);
      border: 2px solid var(--primary-black);
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-secondary:hover {
      background: var(--primary-black);
      color: white;
    }

    .auth-divider {
      text-align: center;
      margin: 1.5rem 0;
      color: var(--text-light);
      font-size: 0.85rem;
    }

    .user-menu {
      position: relative;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary-yellow);
      color: var(--primary-black);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .user-avatar:hover {
      transform: scale(1.05);
    }

    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 0.5rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      min-width: 200px;
      overflow: hidden;
      z-index: 100;
    }

    .user-dropdown-item {
      display: block;
      width: 100%;
      padding: 0.85rem 1.25rem;
      text-align: left;
      background: none;
      border: none;
      font-size: 0.9rem;
      color: var(--text-dark);
      cursor: pointer;
      transition: background 0.2s;
    }

    .user-dropdown-item:hover {
      background: var(--secondary-yellow);
    }

    .user-dropdown-divider {
      height: 1px;
      background: var(--border-color);
    }

    /* Dashboard Styles */
    .dashboard-section {
      padding: 6rem 5%;
      background: var(--primary-white);
      min-height: 60vh;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .dashboard-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border-color);
    }

    .dashboard-tab {
      padding: 1rem 1.5rem;
      background: none;
      border: none;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-light);
      cursor: pointer;
      position: relative;
    }

    .dashboard-tab.active {
      color: var(--primary-black);
    }

    .dashboard-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-yellow);
    }

    .listings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
    }

    .listing-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      transition: all 0.3s;
    }

    .listing-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .listing-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .listing-content {
      padding: 1.25rem;
    }

    .listing-status {
      display: inline-block;
      padding: 0.3rem 0.75rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
    }

    .listing-status.pending {
      background: #FFF3CD;
      color: #856404;
    }

    .listing-status.approved {
      background: #D4EDDA;
      color: #155724;
    }

    .listing-status.rejected {
      background: #F8D7DA;
      color: #721C24;
    }

    .listing-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
    }

    .listing-meta {
      font-size: 0.85rem;
      color: var(--text-light);
    }

    .listing-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-color);
    }

    .listing-action-btn {
      flex: 1;
      padding: 0.6rem;
      border: 1px solid var(--border-color);
      background: white;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .listing-action-btn:hover {
      border-color: var(--primary-black);
    }

    .listing-action-btn.delete:hover {
      border-color: var(--primary-red);
      color: var(--primary-red);
    }

    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: var(--text-light);
    }

    .empty-state h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      color: var(--primary-black);
      margin-bottom: 0.75rem;
    }

    /* Submission Form Modal */
    .submit-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      z-index: 3000;
      padding: 2rem 1rem;
      overflow-y: auto;
      animation: overlayFadeIn 0.3s ease;
    }

    .submit-card {
      background: white;
      border-radius: 12px;
      padding: 2.5rem;
      max-width: 600px;
      width: 100%;
      position: relative;
      animation: modalFadeIn 0.3s ease;
      margin: auto;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    @media (max-width: 640px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    .form-hint {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-top: 0.35rem;
    }

    .form-error {
      color: var(--primary-red);
      font-size: 0.8rem;
      margin-top: 0.35rem;
    }

    .form-success {
      background: #D4EDDA;
      color: #155724;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    /* Admin Review Styles */
    .review-card {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      border-left: 4px solid var(--primary-yellow);
    }

    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .review-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-approve {
      padding: 0.5rem 1rem;
      background: #28A745;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-reject {
      padding: 0.5rem 1rem;
      background: #DC3545;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
    }

    /* Enhanced Admin Review Styles */
    .admin-review-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid var(--border-color);
    }

    .admin-review-header {
      display: flex;
      gap: 1.5rem;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .admin-review-image {
      width: 160px;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      flex-shrink: 0;
    }

    .admin-review-info {
      flex: 1;
    }

    .admin-review-meta {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
    }

    .admin-review-type {
      background: var(--primary-black);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .admin-review-package {
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .package-free { background: #E9ECEF; color: #495057; }
    .package-starter { background: #D4EDDA; color: #155724; }
    .package-pro { background: #CCE5FF; color: #004085; }
    .package-premium { background: #F8D7DA; color: #721C24; background: linear-gradient(135deg, #FFD95A 0%, #FFA500 100%); color: #000; }

    .admin-review-price {
      font-size: 0.85rem;
      color: var(--primary-red);
      font-weight: 600;
    }

    .admin-review-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
      color: var(--primary-black);
    }

    .admin-review-subtitle {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 0.5rem;
    }

    .admin-review-desc {
      font-size: 0.9rem;
      color: var(--text-dark);
      line-height: 1.6;
    }

    .admin-review-user {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid var(--border-color);
      font-size: 0.8rem;
      color: var(--text-light);
    }

    .admin-review-user-avatar {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--primary-yellow);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 700;
      color: var(--primary-black);
    }

    .admin-review-body {
      padding: 1.5rem;
      background: #FAFAFA;
    }

    .admin-field-group {
      margin-bottom: 1.25rem;
    }

    .admin-field-label {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-light);
      margin-bottom: 0.5rem;
      display: block;
    }

    .admin-notes-textarea {
      width: 100%;
      padding: 0.85rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 0.9rem;
      min-height: 80px;
      resize: vertical;
      font-family: inherit;
      background: white;
    }

    .admin-notes-textarea:focus {
      outline: none;
      border-color: var(--primary-yellow);
      box-shadow: 0 0 0 3px rgba(255, 217, 90, 0.2);
    }

    .decline-reasons {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .decline-reason-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .decline-reason-option:hover {
      border-color: var(--primary-red);
    }

    .decline-reason-option.selected {
      border-color: var(--primary-red);
      background: #FFF5F5;
    }

    .decline-reason-option input {
      margin: 0;
    }

    .decline-reason-option label {
      font-size: 0.9rem;
      cursor: pointer;
      flex: 1;
    }

    .custom-reason-input {
      margin-top: 0.75rem;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      width: 100%;
      font-size: 0.9rem;
    }

    .admin-review-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 1.5rem;
      border-top: 1px solid var(--border-color);
      background: white;
    }

    .admin-review-date {
      font-size: 0.8rem;
      color: var(--text-light);
    }

    .admin-review-actions {
      display: flex;
      gap: 0.75rem;
    }

    .btn-charge {
      padding: 0.65rem 1.25rem;
      background: white;
      color: var(--primary-black);
      border: 2px solid var(--primary-black);
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s;
    }

    .btn-charge:hover {
      background: var(--primary-black);
      color: white;
    }

    .btn-approve-large {
      padding: 0.65rem 1.5rem;
      background: #28A745;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s;
    }

    .btn-approve-large:hover {
      background: #218838;
    }

    .btn-decline-large {
      padding: 0.65rem 1.5rem;
      background: #DC3545;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s;
    }

    .btn-decline-large:hover {
      background: #C82333;
    }

    .review-success-message {
      padding: 1rem;
      background: #D4EDDA;
      color: #155724;
      border-radius: 8px;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .review-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .review-tab-btn {
      padding: 0.5rem 1rem;
      background: none;
      border: none;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-light);
      cursor: pointer;
      position: relative;
    }

    .review-tab-btn.active {
      color: var(--primary-black);
    }

    .review-tab-btn .count {
      background: var(--primary-red);
      color: white;
      font-size: 0.7rem;
      padding: 0.15rem 0.5rem;
      border-radius: 10px;
      margin-left: 0.5rem;
    }

    .review-tab-btn.active .count {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    /* Neighborhood Filter Panel - Visual Card Grid */
    .neighborhood-filter-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2500;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: overlayFadeIn 0.3s ease;
      padding: 2rem;
    }

    .neighborhood-filter-panel {
      width: 900px;
      max-width: 100%;
      max-height: 90vh;
      background: white;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      animation: modalScaleIn 0.3s ease;
      overflow: hidden;
    }

    @keyframes modalScaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .filter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      background: var(--primary-black);
      color: white;
    }

    .filter-header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .filter-area-icon {
      width: 50px;
      height: 50px;
      background: var(--primary-yellow);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-black);
    }

    .filter-area-icon svg {
      width: 26px;
      height: 26px;
    }

    .filter-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      margin-bottom: 0.15rem;
    }

    .filter-subtitle {
      font-size: 0.85rem;
      opacity: 0.7;
    }

    .filter-close {
      background: rgba(255,255,255,0.1);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .filter-close:hover {
      background: rgba(255,255,255,0.2);
    }

    .filter-search {
      padding: 1.25rem 2rem;
      border-bottom: 1px solid var(--border-color);
      background: #FAFAFA;
    }

    .filter-search input {
      width: 100%;
      padding: 0.85rem 1.25rem;
      border: 2px solid var(--border-color);
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .filter-search input:focus {
      outline: none;
      border-color: var(--primary-black);
    }

    .filter-content {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem 2rem;
    }

    .filter-loading,
    .filter-empty {
      padding: 3rem;
      text-align: center;
      color: var(--text-light);
    }

    .neighborhoods-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 1.25rem;
    }

    .neighborhood-card {
      position: relative;
      height: 180px;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .neighborhood-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    .neighborhood-card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s ease;
    }

    .neighborhood-card:hover .neighborhood-card-image {
      transform: scale(1.08);
    }

    .neighborhood-card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      top: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.1) 100%);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.25rem;
      color: white;
    }

    .neighborhood-card h4 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      margin-bottom: 0.35rem;
      font-weight: 600;
    }

    .neighborhood-card p {
      font-size: 0.8rem;
      opacity: 0.85;
      margin: 0;
      line-height: 1.4;
    }

    .neighborhood-card-arrow {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 32px;
      height: 32px;
      background: var(--primary-yellow);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-black);
      font-size: 1rem;
      opacity: 0;
      transform: translateX(-10px);
      transition: all 0.3s ease;
    }

    .neighborhood-card:hover .neighborhood-card-arrow {
      opacity: 1;
      transform: translateX(0);
    }

    .filter-footer {
      padding: 1rem 2rem;
      border-top: 1px solid var(--border-color);
      background: #FAFAFA;
      text-align: center;
    }

    .filter-footer p {
      font-size: 0.85rem;
      color: var(--text-light);
      margin: 0;
    }

    @media (max-width: 768px) {
      .neighborhood-filter-overlay {
        padding: 0;
      }

      .neighborhood-filter-panel {
        width: 100%;
        max-height: 100vh;
        border-radius: 0;
      }

      .neighborhoods-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 1rem;
      }

      .neighborhood-card {
        height: 150px;
      }

      .filter-content {
        padding: 1rem;
      }
    }

    /* Featured Business & Events */
    .featured-section {
      padding: 6rem 5%;
      background: white;
    }

    .featured-grid-2col {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 3rem;
      margin-top: 3rem;
    }

    .feature-card {
      background: var(--primary-white);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      transition: all 0.3s;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }

    .feature-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
    }

    .feature-content {
      padding: 2rem;
    }

    .feature-badge {
      display: inline-block;
      background: transparent;
      border: 1px solid var(--text-light);
      color: var(--text-dark);
      padding: 0.35rem 1rem;
      font-size: 0.65rem;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 1rem;
    }

    .feature-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--primary-black);
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    .feature-description {
      color: var(--text-light);
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    .feature-meta {
      display: flex;
      gap: 1.5rem;
      font-size: 0.9rem;
      color: var(--text-light);
    }

    /* Archive Item Card */
    .archive-item {
      background: var(--primary-white);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      transition: all 0.3s;
      cursor: pointer;
    }

    .archive-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }

    .archive-item-image-wrapper {
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      overflow: hidden;
    }

    .archive-item-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .archive-item:hover .archive-item-image {
      transform: scale(1.05);
    }

    .archive-item-featured-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.35rem 0.75rem;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      border-radius: 4px;
    }

    .archive-item-date-badge {
      position: absolute;
      bottom: 1rem;
      left: 1rem;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 500;
      border-radius: 4px;
    }

    .archive-item-save-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .archive-item-save-btn:hover {
      background: white;
      transform: scale(1.1);
    }

    .archive-item-save-btn.saved {
      background: var(--primary-red);
      color: white;
    }

    .archive-item-content {
      padding: 1.5rem;
    }

    .archive-item-category {
      display: inline-block;
      background: transparent;
      border: 1px solid var(--text-light);
      color: var(--text-dark);
      padding: 0.3rem 0.75rem;
      font-size: 0.65rem;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.75rem;
    }

    .archive-item-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
      font-weight: 500;
      letter-spacing: 0.02em;
      line-height: 1.3;
    }

    .archive-item-neighborhood {
      font-size: 0.85rem;
      color: var(--text-light);
      margin-bottom: 0.75rem;
    }

    .archive-item-description {
      color: var(--text-light);
      line-height: 1.6;
      font-size: 0.9rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    @media (max-width: 968px) {
      .archive-item-title {
        font-size: 1.3rem;
      }
    }

    @media (max-width: 640px) {
      .archive-item-content {
        padding: 1.25rem;
      }

      .archive-item-title {
        font-size: 1.2rem;
      }
    }

    /* Properties Section */
    .properties-section {
      padding: 6rem 5%;
      background: var(--primary-black);
      color: white;
    }

    .properties-section .section-title {
      color: white;
    }

    .properties-section .section-title::after {
      background: var(--primary-red);
    }

    .properties-section .section-subtitle {
      color: rgba(255,255,255,0.7);
    }

    .properties-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 3rem;
    }

    .property-card {
      background: #1A1A1A;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .property-card:hover {
      border-color: var(--primary-yellow);
      transform: translateY(-5px);
    }

    .property-image {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .property-details {
      padding: 1.5rem;
    }

    .property-price {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-yellow);
      margin-bottom: 0.5rem;
    }

    .property-address {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      color: white;
    }

    .property-specs {
      display: flex;
      gap: 1.5rem;
      font-size: 0.9rem;
      color: rgba(255,255,255,0.7);
    }

    /* IDX Broker Widget Overrides */
    .idx-widget-container {
      width: 100%;
    }

    /* IDX Showcase Widget Styling */
    .idx-showcase-wrapper .IDX-showcaseCell,
    .idx-widget-container .IDX-showcaseCell {
      background: var(--text-dark) !important;
      border: none !important;
      border-radius: 8px !important;
      overflow: hidden !important;
      transition: all 0.3s ease !important;
    }

    .idx-showcase-wrapper .IDX-showcaseCell:hover,
    .idx-widget-container .IDX-showcaseCell:hover {
      border-color: var(--primary-yellow) !important;
      transform: translateY(-5px) !important;
    }

    .idx-showcase-wrapper .IDX-showcasePhoto,
    .idx-widget-container .IDX-showcasePhoto {
      height: 250px !important;
      object-fit: cover !important;
    }

    .idx-showcase-wrapper .IDX-showcasePrice,
    .idx-widget-container .IDX-showcasePrice {
      font-size: 1.8rem !important;
      font-weight: 700 !important;
      color: var(--primary-yellow) !important;
      font-family: 'Source Sans 3', sans-serif !important;
    }

    .idx-showcase-wrapper .IDX-showcaseAddress,
    .idx-widget-container .IDX-showcaseAddress {
      font-size: 1.1rem !important;
      color: white !important;
      font-family: 'Source Sans 3', sans-serif !important;
    }

    .idx-showcase-wrapper .IDX-showcaseSpecs,
    .idx-widget-container .IDX-showcaseSpecs {
      color: rgba(255,255,255,0.7) !important;
      font-family: 'Source Sans 3', sans-serif !important;
    }

    /* IDX Search Widget Styling */
    .idx-search-container .IDX-searchForm {
      background: white !important;
      border-radius: 8px !important;
      padding: 1.5rem !important;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08) !important;
    }

    .idx-search-container .IDX-searchInput,
    .idx-search-container .IDX-searchSelect {
      font-family: 'Source Sans 3', sans-serif !important;
      border: 2px solid var(--border-color) !important;
      border-radius: 6px !important;
      padding: 0.75rem 1rem !important;
    }

    .idx-search-container .IDX-searchInput:focus,
    .idx-search-container .IDX-searchSelect:focus {
      border-color: var(--primary-yellow) !important;
      outline: none !important;
    }

    .idx-search-container .IDX-searchButton {
      background: var(--primary-red) !important;
      color: white !important;
      font-family: 'Source Sans 3', sans-serif !important;
      font-weight: 700 !important;
      text-transform: uppercase !important;
      letter-spacing: 0.05em !important;
      border-radius: 4px !important;
      padding: 0.75rem 2rem !important;
    }

    .idx-search-container .IDX-searchButton:hover {
      background: var(--accent-red) !important;
    }

    /* Property Search Filter Bar */
    .property-search-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      padding: 1.5rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }

    .property-filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
      min-width: 180px;
    }

    .property-filter-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-light);
      font-weight: 600;
    }

    .property-filter-select,
    .property-filter-input {
      padding: 0.75rem 1rem;
      border: 2px solid var(--border-color);
      border-radius: 6px;
      font-family: 'Source Sans 3', sans-serif;
      font-size: 0.95rem;
      background: white;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    .property-filter-select:focus,
    .property-filter-input:focus {
      border-color: var(--primary-yellow);
      outline: none;
    }

    .property-filter-button {
      padding: 0.75rem 2rem;
      background: var(--primary-red);
      color: white;
      border: none;
      border-radius: 4px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: background 0.3s;
      align-self: flex-end;
    }

    .property-filter-button:hover {
      background: var(--accent-red);
    }

    .property-filter-clear {
      padding: 0.75rem 1.5rem;
      background: transparent;
      color: var(--text-light);
      border: 2px solid var(--border-color);
      border-radius: 4px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      align-self: flex-end;
    }

    .property-filter-clear:hover {
      border-color: var(--primary-black);
      color: var(--primary-black);
    }

    /* View All Properties Button */
    .view-all-properties-btn {
      display: inline-block;
      margin-top: 2rem;
      padding: 1rem 3rem;
      background: var(--primary-red);
      color: white;
      border: none;
      border-radius: 4px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Source Sans 3', sans-serif;
    }

    .view-all-properties-btn:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    /* Property Lead Form Modal */
    .property-lead-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 2rem;
    }

    .property-lead-card {
      background: white;
      border-radius: 12px;
      padding: 2.5rem;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .property-lead-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      color: var(--primary-black);
      margin-bottom: 0.5rem;
    }

    .property-lead-subtitle {
      color: var(--text-light);
      margin-bottom: 1.5rem;
    }

    .property-lead-property-preview {
      display: flex;
      gap: 1rem;
      padding: 1rem;
      background: var(--secondary-yellow);
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }

    .property-lead-property-preview img {
      width: 80px;
      height: 60px;
      object-fit: cover;
      border-radius: 4px;
    }

    .property-lead-property-info {
      flex: 1;
    }

    .property-lead-property-price {
      font-weight: 700;
      color: var(--primary-black);
    }

    .property-lead-property-address {
      font-size: 0.9rem;
      color: var(--text-light);
    }

    /* IDX Property Detail Modal/View */
    .idx-property-detail-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 1rem;
    }

    .idx-property-detail-container {
      background: white;
      border-radius: 12px;
      max-width: 1200px;
      width: 100%;
      max-height: 95vh;
      overflow: hidden;
      position: relative;
    }

    .idx-property-detail-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      background: white;
      border: none;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .idx-property-detail-iframe {
      width: 100%;
      height: 90vh;
      border: none;
    }

    /* IDX Loading State */
    .idx-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem;
      color: var(--text-light);
    }

    .idx-loading-spinner {
      width: 48px;
      height: 48px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-yellow);
      border-radius: 50%;
      animation: idx-spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes idx-spin {
      to { transform: rotate(360deg); }
    }

    /* IDX Error State */
    .idx-error {
      text-align: center;
      padding: 3rem 2rem;
      color: var(--primary-red);
    }

    .idx-error-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    /* MLS Compliance Footer */
    .mls-compliance {
      background: #f8f8f8;
      border-top: 1px solid var(--border-color);
      padding: 2rem 5%;
      margin-top: 0;
    }

    .mls-compliance-content {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
      max-width: 1400px;
      margin: 0 auto;
    }

    .mls-logo {
      height: 50px;
      width: auto;
    }

    .mls-disclaimer {
      flex: 1;
      font-size: 0.75rem;
      color: var(--text-light);
      line-height: 1.5;
    }

    .mls-disclaimer p {
      margin-bottom: 0.5rem;
    }

    .mls-disclaimer p:last-child {
      margin-bottom: 0;
    }

    /* Responsive IDX Overrides */
    @media (max-width: 968px) {
      .property-search-filters {
        flex-direction: column;
      }

      .property-filter-group {
        min-width: 100%;
      }

      .property-filter-button,
      .property-filter-clear {
        width: 100%;
        text-align: center;
      }

      .mls-compliance-content {
        flex-direction: column;
        text-align: center;
      }
    }

    @media (max-width: 640px) {
      .property-lead-card {
        padding: 1.5rem;
        margin: 1rem;
      }

      .property-lead-title {
        font-size: 1.5rem;
      }

      .idx-property-detail-container {
        border-radius: 0;
        max-height: 100vh;
      }
    }

    /* Directory Section */
    .directory-section {
      padding: 6rem 5%;
      background: linear-gradient(135deg, var(--secondary-yellow) 0%, white 100%);
    }

    .directory-actions {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 3rem;
    }

    .action-card {
      background: white;
      padding: 3rem 2rem;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      transition: all 0.3s;
      border: 3px solid transparent;
    }

    .action-card:hover {
      border-color: var(--primary-yellow);
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }

    .action-icon {
      margin-bottom: 1.5rem;
    }

    .action-icon svg {
      width: 48px;
      height: 48px;
      stroke: var(--primary-black);
      stroke-width: 1.5;
      fill: none;
    }

    .action-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      margin-bottom: 1rem;
      color: var(--primary-black);
      font-weight: 500;
    }

    .action-description {
      color: var(--text-light);
      margin-bottom: 2rem;
      line-height: 1.7;
    }

    .action-button {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 0.8rem 2rem;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 700;
      transition: all 0.3s;
    }

    .action-button:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    /* Ad Space */
    .ad-section {
      padding: 4rem 5%;
      background: var(--primary-red);
      text-align: center;
    }

    .ad-content {
      max-width: 800px;
      margin: 0 auto;
      color: white;
    }

    .ad-content h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3rem;
      margin-bottom: 1rem;
      color: white;
      font-weight: 500;
      letter-spacing: 0.05em;
    }

    .ad-content p {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.95;
    }

    .ad-button {
      background: white;
      color: var(--primary-red);
      padding: 1rem 3rem;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 700;
      display: inline-block;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .ad-button:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    /* Footer */
    .footer {
      background: var(--primary-black);
      color: white;
      padding: 4rem 5% 2rem;
    }

    .footer-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
      gap: 3rem;
      margin-bottom: 3rem;
    }

    .footer-brand h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--primary-yellow);
      font-weight: 600;
      letter-spacing: 0.1em;
    }

    /* Instagram Section */
    .instagram-section {
      padding: 5rem 5%;
      background: var(--primary-white);
      text-align: center;
    }

    .instagram-section .section-title {
      margin-bottom: 0.5rem;
    }

    .instagram-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 0.5rem;
      margin-top: 3rem;
    }

    .instagram-item {
      position: relative;
      aspect-ratio: 1;
      overflow: hidden;
      cursor: pointer;
    }

    .instagram-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s ease;
    }

    .instagram-item:hover img {
      transform: scale(1.1);
    }

    .instagram-item::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0);
      transition: background 0.3s ease;
    }

    .instagram-item:hover::after {
      background: rgba(0,0,0,0.2);
    }

    .instagram-follow {
      display: inline-block;
      margin-top: 2.5rem;
      padding: 1rem 3rem;
      background: var(--primary-black);
      color: white;
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      transition: all 0.3s;
    }

    .instagram-follow:hover {
      background: var(--primary-red);
      transform: translateY(-2px);
    }

    @media (max-width: 968px) {
      .instagram-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 640px) {
      .instagram-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .footer-brand p {
      color: rgba(255,255,255,0.7);
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    .social-links {
      display: flex;
      gap: 1rem;
    }

    .social-link {
      width: 40px;
      height: 40px;
      background: var(--primary-yellow);
      color: var(--primary-black);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      text-decoration: none;
      font-weight: 700;
      transition: all 0.3s;
    }

    .social-link:hover {
      background: var(--primary-red);
      color: white;
      transform: translateY(-3px);
    }

    .footer-column h4 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: var(--primary-yellow);
      font-weight: 600;
      letter-spacing: 0.1em;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.8rem;
    }

    .footer-links a {
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--primary-yellow);
    }

    .footer-bottom {
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 2rem;
      text-align: center;
      color: rgba(255,255,255,0.5);
      font-size: 0.85rem;
    }

    .footer-bottom a {
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      margin: 0 0.25rem;
      transition: color 0.3s;
    }

    .footer-bottom a:hover {
      color: var(--primary-yellow);
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes overlayFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    
    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 2rem;
      animation: overlayFadeIn 0.3s ease;
    }

    .neighborhood-modal {
      background: white;
      border-radius: 12px;
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      animation: modalFadeIn 0.3s ease;
      box-shadow: 0 25px 80px rgba(0,0,0,0.3);
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      border: none;
      background: rgba(0,0,0,0.5);
      color: white;
      font-size: 1.5rem;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      z-index: 10;
    }

    .modal-close:hover {
      background: var(--primary-red);
      transform: scale(1.1);
    }

    .modal-hero {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .modal-content {
      padding: 2rem;
    }

    .modal-header {
      margin-bottom: 1.5rem;
    }

    .modal-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      color: var(--primary-black);
      margin-bottom: 0.5rem;
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    .modal-vibe {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .vibe-tag {
      background: var(--secondary-yellow);
      color: var(--primary-black);
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .modal-description {
      color: var(--text-dark);
      line-height: 1.8;
      font-size: 1.1rem;
      margin-bottom: 2rem;
    }

    .modal-section {
      margin-bottom: 2rem;
    }

    .modal-section-title {
      font-size: 1.3rem;
      color: var(--primary-black);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-section-title::before {
      content: '';
      width: 4px;
      height: 20px;
      background: var(--primary-red);
      border-radius: 2px;
    }

    .modal-list {
      list-style: none;
      display: grid;
      gap: 0.75rem;
    }

    .modal-list li {
      padding: 0.75rem 1rem;
      background: var(--primary-white);
      border-radius: 8px;
      border-left: 3px solid var(--primary-yellow);
      font-size: 0.95rem;
    }

    .modal-list li strong {
      color: var(--primary-black);
    }

    .modal-list li span {
      color: var(--text-light);
      display: block;
      font-size: 0.85rem;
      margin-top: 0.25rem;
    }

    /* Responsive */
    @media (max-width: 968px) {
      .featured-grid,
      .properties-grid,
      .directory-actions {
        grid-template-columns: repeat(2, 1fr);
      }

      .featured-grid-2col {
        grid-template-columns: 1fr;
      }

      .hero-title {
        font-size: 3.5rem;
      }

      .footer-content {
        grid-template-columns: 1fr 1fr;
      }

      .nav-links {
        gap: 1.5rem;
      }

      .dropdown-menu {
        min-width: 180px;
      }
    }

    @media (max-width: 640px) {
      .featured-grid,
      .properties-grid,
      .directory-actions {
        grid-template-columns: 1fr;
      }

      .nav-links {
        display: none;
      }

      .hero-title {
        font-size: 2.5rem;
      }

      .section-title {
        font-size: 2.5rem;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .modal-overlay {
        padding: 1rem;
      }

      .modal-title {
        font-size: 1.8rem;
      }

      .modal-hero {
        height: 180px;
      }

      .modal-content {
        padding: 1.5rem;
      }
    }

    /* ============================================
       CMS PORTAL STYLES
       ============================================ */
    .cms-portal {
      margin-top: 80px;
      min-height: calc(100vh - 80px);
      background: #F5F5F5;
    }

    .cms-header {
      background: var(--primary-black);
      color: white;
      padding: 2rem 5%;
    }

    .cms-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
    }

    .cms-header h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 600;
    }

    .cms-header p {
      color: rgba(255,255,255,0.7);
      margin-top: 0.25rem;
      font-size: 0.9rem;
    }

    .cms-demo-badge {
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .cms-layout {
      display: grid;
      grid-template-columns: 260px 1fr;
      min-height: calc(100vh - 180px);
    }

    .cms-sidebar {
      background: white;
      border-right: 1px solid var(--border-color);
      padding: 1.5rem 0;
    }

    .cms-sidebar-title {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-light);
      padding: 0 1.5rem;
      margin-bottom: 0.75rem;
    }

    .cms-nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      width: 100%;
      padding: 0.85rem 1.5rem;
      border: none;
      background: none;
      text-align: left;
      font-size: 0.9rem;
      color: var(--text-dark);
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }

    .cms-nav-item:hover {
      background: var(--secondary-yellow);
    }

    .cms-nav-item.active {
      background: var(--secondary-yellow);
      border-left-color: var(--primary-red);
      font-weight: 600;
    }

    .cms-nav-icon {
      width: 20px;
      height: 20px;
      opacity: 0.7;
    }

    .cms-main {
      padding: 2rem;
      overflow-y: auto;
    }

    .cms-section {
      max-width: 1100px;
    }

    .cms-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .cms-section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.75rem;
      color: var(--primary-black);
    }

    .cms-section-subtitle {
      color: var(--text-light);
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }

    .cms-btn-add {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.65rem 1.25rem;
      background: var(--primary-red);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cms-btn-add:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    .cms-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      margin-bottom: 1rem;
    }

    .cms-card-header {
      display: flex;
      gap: 1rem;
      padding: 1.25rem;
      border-bottom: 1px solid var(--border-color);
    }

    .cms-card-image {
      width: 120px;
      height: 80px;
      object-fit: cover;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .cms-card-info {
      flex: 1;
      min-width: 0;
    }

    .cms-card-meta {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
    }

    .cms-card-badge {
      padding: 0.2rem 0.6rem;
      background: var(--primary-black);
      color: white;
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .cms-card-featured {
      padding: 0.2rem 0.6rem;
      background: var(--primary-yellow);
      color: var(--primary-black);
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .cms-card-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.25rem;
      margin-bottom: 0.25rem;
      color: var(--primary-black);
    }

    .cms-card-desc {
      font-size: 0.85rem;
      color: var(--text-light);
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .cms-card-actions {
      display: flex;
      gap: 0.5rem;
      padding: 1rem 1.25rem;
      background: #FAFAFA;
    }

    .cms-action-btn {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border-color);
      background: white;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cms-action-btn:hover {
      border-color: var(--primary-black);
    }

    .cms-action-btn.feature {
      background: var(--primary-yellow);
      border-color: var(--primary-yellow);
    }

    .cms-action-btn.feature:hover {
      background: #E6C350;
    }

    .cms-action-btn.unfeature {
      background: var(--text-light);
      border-color: var(--text-light);
      color: white;
    }

    .cms-action-btn.delete {
      color: var(--primary-red);
    }

    .cms-action-btn.delete:hover {
      border-color: var(--primary-red);
      background: #FFF5F5;
    }

    /* CMS Form Modal */
    .cms-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      padding: 2rem;
    }

    .cms-modal-content {
      background: white;
      border-radius: 12px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .cms-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .cms-modal-header h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
    }

    .cms-modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
    }

    .cms-modal-body {
      padding: 1.5rem;
    }

    .cms-modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border-color);
      background: #FAFAFA;
    }

    .cms-btn-cancel {
      padding: 0.65rem 1.25rem;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
    }

    .cms-btn-save {
      padding: 0.65rem 1.25rem;
      background: var(--primary-red);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
    }

    /* CMS Stats */
    .cms-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .cms-stat-card {
      background: white;
      border-radius: 10px;
      padding: 1.25rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
    }

    .cms-stat-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-light);
      margin-bottom: 0.5rem;
    }

    .cms-stat-value {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--primary-black);
    }

    .cms-stat-change {
      font-size: 0.8rem;
      color: #28A745;
      margin-top: 0.25rem;
    }

    /* Hero Editor */
    .cms-hero-preview {
      background: var(--primary-black);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 1.5rem;
      position: relative;
      height: 300px;
    }

    .cms-hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.5;
    }

    .cms-hero-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 2rem;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      color: white;
    }

    .cms-hero-category {
      display: inline-block;
      border: 1px solid rgba(255,255,255,0.5);
      padding: 0.35rem 1rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 1rem;
    }

    .cms-hero-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .cms-hero-meta {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    /* Toggle Switch */
    .cms-toggle-container {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .cms-toggle {
      position: relative;
      width: 44px;
      height: 24px;
    }

    .cms-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .cms-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #ccc;
      transition: 0.3s;
      border-radius: 24px;
    }

    .cms-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    .cms-toggle input:checked + .cms-toggle-slider {
      background: var(--primary-red);
    }

    .cms-toggle input:checked + .cms-toggle-slider:before {
      transform: translateX(20px);
    }

    .cms-toggle-label {
      font-size: 0.85rem;
      color: var(--text-dark);
    }

    /* HubSpot Integration Section */
    .cms-integration-card {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      display: flex;
      align-items: center;
      gap: 1.25rem;
    }

    .cms-integration-icon {
      width: 48px;
      height: 48px;
      background: #FF7A59;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.25rem;
    }

    .cms-integration-info {
      flex: 1;
    }

    .cms-integration-info h3 {
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .cms-integration-info p {
      font-size: 0.85rem;
      color: var(--text-light);
    }

    .cms-integration-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: #D4EDDA;
      color: #155724;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .cms-integration-status.pending {
      background: #FFF3CD;
      color: #856404;
    }

    @media (max-width: 968px) {
      .cms-layout {
        grid-template-columns: 1fr;
      }

      .cms-sidebar {
        display: flex;
        overflow-x: auto;
        padding: 0.75rem;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
      }

      .cms-nav-item {
        padding: 0.65rem 1rem;
        white-space: nowrap;
        border-left: none;
        border-bottom: 2px solid transparent;
      }

      .cms-nav-item.active {
        border-left: none;
        border-bottom-color: var(--primary-red);
      }

      .cms-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .cms-sidebar-title {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .cms-header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }

      .cms-stats {
        grid-template-columns: 1fr;
      }

      .cms-card-header {
        flex-direction: column;
      }

      .cms-card-image {
        width: 100%;
        height: 150px;
      }
    }

    /* Detail Page Styles */
    .detail-page {
      margin-top: 80px;
      animation: detailFadeIn 0.4s ease-out;
    }

    @keyframes detailFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .detail-hero {
      position: relative;
      height: 50vh;
      min-height: 400px;
      overflow: hidden;
    }

    .detail-hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .detail-hero-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 4rem 5%;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
      color: white;
    }

    .detail-category-badge {
      display: inline-block;
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.4rem 1rem;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      border-radius: 4px;
      margin-bottom: 1rem;
    }

    .detail-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .detail-meta {
      font-size: 0.95rem;
      opacity: 0.85;
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .detail-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 4rem 5%;
    }

    .detail-content p {
      font-size: 1.15rem;
      line-height: 1.9;
      color: var(--text-dark);
      margin-bottom: 1.5rem;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: white;
      border: 2px solid var(--primary-black);
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--primary-black);
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 2rem;
    }

    .back-button:hover {
      background: var(--primary-black);
      color: white;
      transform: translateX(-4px);
    }

    /* Video Embed Styles */
    .video-embed-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      margin: 2rem 0;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    }

    .video-embed-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 12px;
    }

    .video-preview-container {
      margin-top: 1rem;
      border-radius: 8px;
      overflow: hidden;
      background: #000;
    }

    /* Contact Card Styles */
    .contact-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .contact-card {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      transition: all 0.3s ease;
    }

    .contact-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border-color: var(--primary-yellow);
    }

    .contact-card-icon {
      font-size: 2rem;
      margin-bottom: 0.75rem;
    }

    .contact-card-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-light);
      margin-bottom: 0.5rem;
    }

    .contact-card-value {
      font-size: 1rem;
      font-weight: 600;
      color: var(--primary-black);
      word-break: break-all;
    }

    .contact-card-value a {
      color: var(--primary-red);
      text-decoration: none;
    }

    .contact-card-value a:hover {
      text-decoration: underline;
    }

    /* Property Detail Styles */
    .property-detail-page {
      background: var(--primary-black);
      color: white;
    }

    .property-detail-page .detail-content {
      background: var(--primary-black);
    }

    .property-detail-page .detail-content p {
      color: rgba(255,255,255,0.85);
    }

    .property-specs-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin: 2rem 0;
      padding: 2rem;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
    }

    .property-spec {
      text-align: center;
    }

    .property-spec-value {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--primary-yellow);
    }

    .property-spec-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.6);
      margin-top: 0.25rem;
    }

    .property-price-badge {
      position: absolute;
      top: 2rem;
      right: 2rem;
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 1rem 2rem;
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 700;
      border-radius: 8px;
      z-index: 10;
    }

    /* Event Detail Date Badge */
    .event-date-badge {
      position: absolute;
      top: 2rem;
      left: 2rem;
      background: white;
      color: var(--primary-black);
      padding: 1rem;
      text-align: center;
      border-radius: 8px;
      z-index: 10;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .event-date-month {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--primary-red);
      font-weight: 600;
    }

    .event-date-day {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1;
    }

    /* Author Bio Section */
    .author-bio {
      display: flex;
      gap: 1.5rem;
      padding: 2rem;
      background: #f8f8f8;
      border-radius: 12px;
      margin-top: 3rem;
    }

    .author-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--primary-yellow);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-black);
      flex-shrink: 0;
    }

    .author-info h4 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .author-info p {
      font-size: 0.95rem !important;
      margin-bottom: 0 !important;
      color: var(--text-light) !important;
    }

    /* CTA Button */
    .detail-cta-button {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 1rem 2.5rem;
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.3s;
      border: none;
      cursor: pointer;
    }

    .detail-cta-button:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(220, 53, 53, 0.3);
    }

    .detail-cta-button.dark {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    .detail-cta-button.dark:hover {
      background: #FFE580;
      box-shadow: 0 8px 25px rgba(255, 217, 90, 0.3);
    }

    /* Area Page Styles */
    .area-page {
      margin-top: 80px;
      min-height: 100vh;
    }

    .area-hero {
      position: relative;
      height: 45vh;
      min-height: 350px;
      display: flex;
      align-items: flex-end;
      overflow: hidden;
    }

    .area-hero-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .area-hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.75) 100%);
      z-index: 1;
    }

    .area-hero-content {
      position: relative;
      z-index: 2;
      padding: 3rem 5%;
      width: 100%;
      color: white;
    }

    .area-back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 50px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 1.5rem;
      backdrop-filter: blur(8px);
    }

    .area-back-button:hover {
      background: rgba(255,255,255,0.25);
      border-color: rgba(255,255,255,0.5);
    }

    .area-hero-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 4rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      text-shadow: 0 2px 20px rgba(0,0,0,0.4);
    }

    .area-hero-tagline {
      font-size: 1.2rem;
      font-weight: 300;
      opacity: 0.9;
      margin-bottom: 1.5rem;
      max-width: 600px;
    }

    .area-vibe-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .area-vibe-tag {
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.4rem 1rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .area-content-wrapper {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 3rem;
      padding: 3rem 5%;
      max-width: 1400px;
      margin: 0 auto;
    }

    .area-main-content {
      min-width: 0;
    }

    .area-section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.75rem;
    }

    .area-section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--primary-yellow);
    }

    /* Featured Post Card */
    .area-featured-post {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 3rem;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .area-featured-post:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    }

    .area-featured-post-image {
      width: 100%;
      height: 280px;
      object-fit: cover;
    }

    .area-featured-post-content {
      padding: 1.75rem;
    }

    .area-featured-post-category {
      display: inline-block;
      background: var(--secondary-yellow);
      color: var(--primary-black);
      padding: 0.35rem 0.9rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 0.75rem;
    }

    .area-featured-post-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.6rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      line-height: 1.3;
    }

    .area-featured-post-excerpt {
      color: var(--text-light);
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .area-featured-post-meta {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: var(--text-light);
      font-size: 0.85rem;
    }

    /* Neighborhoods Grid */
    .area-map-section {
      background: var(--primary-yellow);
      padding: 2.5rem;
      border-radius: 12px;
      margin-bottom: 3rem;
    }

    .area-map-section .area-section-title {
      color: var(--primary-black);
    }

    .area-map-section .area-section-title::after {
      background: var(--primary-black);
    }

    .area-neighborhoods-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .area-neighborhood-card {
      background: white;
      padding: 1.25rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .area-neighborhood-card:hover {
      border-color: var(--primary-black);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .area-neighborhood-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.35rem;
    }

    .area-neighborhood-desc {
      font-size: 0.8rem;
      color: var(--text-light);
      line-height: 1.4;
    }

    /* Inline Ad */
    .area-inline-ad {
      background: var(--secondary-yellow);
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 3rem;
    }

    .area-inline-ad-label {
      font-size: 0.65rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.5rem;
    }

    .area-inline-ad-content {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      color: var(--primary-black);
    }

    /* Listings Section */
    .area-listings-section {
      margin-bottom: 3rem;
    }

    .area-listings-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .area-listing-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: all 0.3s;
    }

    .area-listing-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    .area-listing-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .area-listing-content {
      padding: 1.25rem;
    }

    .area-listing-badge {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 0.25rem 0.6rem;
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.6rem;
    }

    .area-listing-card.featured .area-listing-badge {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    .area-listing-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.15rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }

    .area-listing-desc {
      font-size: 0.85rem;
      color: var(--text-light);
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .area-listing-meta {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.75rem;
      font-size: 0.75rem;
      color: var(--text-light);
    }

    /* Sidebar */
    .area-sidebar {
      position: sticky;
      top: 100px;
      height: fit-content;
    }

    .area-sidebar-ad {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .area-sidebar-ad-label {
      font-size: 0.6rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }

    .area-sidebar-ad-placeholder {
      background: #e0e0e0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-size: 0.8rem;
    }

    .area-sidebar-ad-placeholder.small {
      height: 250px;
    }

    .area-sidebar-ad-placeholder.large {
      height: 600px;
    }

    .area-newsletter-box {
      background: var(--primary-black);
      color: white;
      padding: 1.75rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
    }

    .area-newsletter-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .area-newsletter-desc {
      font-size: 0.85rem;
      opacity: 0.8;
      margin-bottom: 1.25rem;
      line-height: 1.5;
    }

    .area-newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .area-newsletter-input {
      width: 100%;
      padding: 0.85rem 1rem;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .area-newsletter-input::placeholder {
      color: rgba(255,255,255,0.5);
    }

    .area-newsletter-input:focus {
      outline: none;
      border-color: var(--primary-yellow);
      background: rgba(255,255,255,0.15);
    }

    .area-newsletter-button {
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.85rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      transition: all 0.3s;
    }

    .area-newsletter-button:hover {
      background: #FFE580;
      transform: translateY(-1px);
    }

    .area-newsletter-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .area-newsletter-success {
      background: rgba(76, 175, 80, 0.2);
      color: #4CAF50;
      padding: 0.75rem;
      border-radius: 6px;
      font-size: 0.85rem;
      text-align: center;
    }

    .area-quick-links {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    }

    .area-quick-links-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .area-quick-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border-color);
      text-decoration: none;
      color: var(--text-dark);
      font-size: 0.9rem;
      transition: color 0.2s;
      cursor: pointer;
    }

    .area-quick-link:last-child {
      border-bottom: none;
    }

    .area-quick-link:hover {
      color: var(--primary-red);
    }

    .area-quick-link-icon {
      width: 32px;
      height: 32px;
      background: var(--secondary-yellow);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    /* Area Page Responsive */
    @media (max-width: 1024px) {
      .area-content-wrapper {
        grid-template-columns: 1fr;
      }

      .area-sidebar {
        position: static;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
      }

      .area-sidebar-ad:first-child {
        display: none;
      }

      .area-neighborhoods-grid {
        grid-template-columns: repeat(3, 1fr);
      }

      .area-listings-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .area-hero {
        height: 40vh;
        min-height: 300px;
      }

      .area-hero-title {
        font-size: 2.8rem;
      }

      .area-hero-tagline {
        font-size: 1rem;
      }

      .area-content-wrapper {
        padding: 2rem 4%;
        gap: 2rem;
      }

      .area-sidebar {
        grid-template-columns: 1fr;
      }

      .area-neighborhoods-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .area-listings-grid {
        grid-template-columns: 1fr;
      }

      .area-featured-post-image {
        height: 200px;
      }
    }

    @media (max-width: 480px) {
      .area-hero-title {
        font-size: 2.2rem;
      }

      .area-vibe-tag {
        font-size: 0.65rem;
        padding: 0.3rem 0.75rem;
      }

      .area-neighborhoods-grid {
        grid-template-columns: 1fr;
      }

      .area-map-section {
        padding: 1.5rem;
      }

      .area-newsletter-box {
        padding: 1.25rem;
      }
    }

    /* BUSINESS DETAIL PAGE STYLES */
    .business-detail-page { margin-top: 80px; min-height: 100vh; }
    .business-detail-hero { position: relative; height: 400px; background: var(--primary-black); overflow: hidden; }
    .business-detail-hero-image { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
    .business-detail-hero-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(180deg, transparent 30%, rgba(0,0,0,0.85) 100%); display: flex; flex-direction: column; justify-content: flex-end; padding: 3rem 5%; }
    .business-detail-badges { display: flex; gap: 0.75rem; margin-bottom: 1rem; flex-wrap: wrap; }
    .business-category-badge { background: var(--primary-red); color: white; padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 3px; }
    .business-tier-badge { padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 3px; }
    .business-tier-badge.featured { background: var(--primary-yellow); color: var(--primary-black); }
    .business-tier-badge.premium { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: var(--primary-black); }
    .business-detail-hero-title { font-family: Cormorant Garamond, serif; font-size: 3.5rem; font-weight: 600; color: white; margin-bottom: 1rem; line-height: 1.1; }
    .business-detail-hero-meta { display: flex; align-items: center; gap: 1.5rem; color: rgba(255,255,255,0.85); font-size: 0.95rem; flex-wrap: wrap; }
    .business-detail-hero-meta span { display: flex; align-items: center; gap: 0.4rem; }
    .business-price-range { color: var(--primary-yellow); font-weight: 600; }
    .business-rating-badge { display: flex; align-items: center; gap: 0.4rem; background: rgba(255,255,255,0.15); padding: 0.3rem 0.75rem; border-radius: 50px; }
    .business-rating-stars { color: var(--primary-yellow); }
    .business-detail-wrapper { display: grid; grid-template-columns: 1fr 340px; gap: 3rem; padding: 3rem 5%; max-width: 1400px; margin: 0 auto; }
    .business-detail-main { min-width: 0; }
    .business-detail-sidebar { position: sticky; top: 100px; height: fit-content; display: flex; flex-direction: column; gap: 1.5rem; }
    .business-section { margin-bottom: 2.5rem; }
    .business-section-title { font-family: Cormorant Garamond, serif; font-size: 1.8rem; font-weight: 600; margin-bottom: 1.25rem; color: var(--primary-black); position: relative; padding-bottom: 0.75rem; }
    .business-section-title::after { content: ""; position: absolute; bottom: 0; left: 0; width: 50px; height: 3px; background: var(--primary-yellow); }
    .business-description { font-size: 1.05rem; line-height: 1.75; color: var(--text-dark); }
    .amenities-grid { display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .amenity-tag { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--secondary-yellow); color: var(--primary-black); padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.85rem; font-weight: 500; }
    .gallery-container { display: flex; flex-direction: column; gap: 1rem; }
    .gallery-main { width: 100%; height: 400px; border-radius: 12px; overflow: hidden; position: relative; }
    .gallery-main-image { width: 100%; height: 100%; object-fit: cover; cursor: pointer; transition: transform 0.3s; }
    .gallery-main-image:hover { transform: scale(1.02); }
    .gallery-thumbnails { display: flex; gap: 0.75rem; overflow-x: auto; padding-bottom: 0.5rem; }
    .gallery-thumbnail { width: 80px; height: 60px; border-radius: 6px; overflow: hidden; cursor: pointer; flex-shrink: 0; border: 2px solid transparent; }
    .gallery-thumbnail.active { border-color: var(--primary-yellow); }
    .gallery-thumbnail img { width: 100%; height: 100%; object-fit: cover; }
    .gallery-video-badge { position: absolute; bottom: 1rem; right: 1rem; background: var(--primary-red); color: white; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
    .rating-summary { display: flex; align-items: flex-start; gap: 2rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--secondary-yellow); border-radius: 12px; }
    .rating-summary-main { text-align: center; padding-right: 2rem; border-right: 1px solid rgba(0,0,0,0.1); }
    .rating-summary-score { font-family: Cormorant Garamond, serif; font-size: 3.5rem; font-weight: 700; line-height: 1; }
    .rating-summary-stars { color: var(--primary-yellow); font-size: 1.2rem; margin: 0.5rem 0; }
    .rating-summary-count { font-size: 0.85rem; color: var(--text-light); }
    .rating-breakdown { flex: 1; display: flex; flex-direction: column; gap: 0.5rem; }
    .rating-breakdown-row { display: flex; align-items: center; gap: 0.75rem; font-size: 0.85rem; }
    .rating-breakdown-label { width: 60px; color: var(--text-light); }
    .rating-breakdown-bar { flex: 1; height: 8px; background: rgba(0,0,0,0.1); border-radius: 4px; overflow: hidden; }
    .rating-breakdown-fill { height: 100%; background: var(--primary-yellow); border-radius: 4px; }
    .reviews-list { display: flex; flex-direction: column; gap: 1.5rem; }
    .review-card { padding: 1.5rem; background: white; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
    .review-card-header { display: flex; justify-content: space-between; margin-bottom: 1rem; }
    .review-author { font-weight: 600; }
    .review-date { font-size: 0.8rem; color: var(--text-light); }
    .review-stars { color: var(--primary-yellow); font-size: 0.9rem; }
    .review-text { font-size: 0.95rem; line-height: 1.6; }
    .review-helpful { margin-top: 1rem; font-size: 0.8rem; color: var(--text-light); }
    .sidebar-card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
    .sidebar-card-title { font-family: Cormorant Garamond, serif; font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; }
    .business-info-card .info-row { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border-color); }
    .business-info-card .info-row:last-child { border-bottom: none; }
    .business-info-card .info-icon { width: 32px; height: 32px; background: var(--secondary-yellow); border-radius: 6px; display: flex; align-items: center; justify-content: center; }
    .business-info-card .info-content { flex: 1; }
    .business-info-card .info-label { font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; }
    .business-info-card .info-value { font-size: 0.9rem; font-weight: 500; }
    .business-info-card .info-value a { color: var(--primary-red); text-decoration: none; }
    .business-map-card .map-container { height: 180px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
    .business-map-card .map-placeholder { color: var(--text-light); font-size: 0.9rem; }
    .business-map-card .map-directions-btn { width: 100%; background: var(--primary-black); color: white; border: none; padding: 0.75rem; border-radius: 6px; font-weight: 600; cursor: pointer; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
    .business-map-card .map-directions-btn:hover { background: var(--primary-red); }
    .business-hours-card .hours-list { display: flex; flex-direction: column; gap: 0.5rem; }
    .business-hours-card .hours-row { display: flex; justify-content: space-between; font-size: 0.9rem; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color); }
    .business-hours-card .hours-row:last-child { border-bottom: none; }
    .business-hours-card .hours-day { font-weight: 500; }
    .business-hours-card .hours-time { color: var(--text-light); }
    .business-hours-card .hours-time.closed { color: var(--primary-red); }
    .business-hours-card .hours-today { background: var(--secondary-yellow); border-radius: 6px; padding: 0.5rem 0.75rem; margin: -0.5rem; }
    .business-social-card .social-links { display: flex; gap: 0.75rem; }
    .business-social-card .social-link { width: 44px; height: 44px; background: var(--secondary-yellow); border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; }
    .business-social-card .social-link:hover { background: var(--primary-yellow); transform: translateY(-2px); }
    .business-ctas-card { background: var(--primary-black); color: white; }
    .business-ctas-card .sidebar-card-title { color: white; }
    .business-ctas-card .cta-text { font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-bottom: 1rem; }
    .business-ctas-card .cta-btn { width: 100%; padding: 0.85rem; border: none; border-radius: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; cursor: pointer; margin-bottom: 0.75rem; }
    .business-ctas-card .cta-btn:last-child { margin-bottom: 0; }
    .business-ctas-card .cta-btn.primary { background: var(--primary-red); color: white; }
    .business-ctas-card .cta-btn.primary:hover { background: var(--accent-red); }
    .business-ctas-card .cta-btn.secondary { background: var(--primary-yellow); color: var(--primary-black); }
    .nearby-listings-card .nearby-list { display: flex; flex-direction: column; gap: 1rem; }
    .nearby-listing-item { display: flex; gap: 0.75rem; cursor: pointer; }
    .nearby-listing-item:hover { opacity: 0.8; }
    .nearby-listing-image { width: 60px; height: 60px; border-radius: 6px; object-fit: cover; }
    .nearby-listing-content { flex: 1; }
    .nearby-listing-name { font-weight: 600; font-size: 0.9rem; }
    .nearby-listing-category { font-size: 0.75rem; color: var(--text-light); }
    .related-stories-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; }
    .related-story-card { position: relative; border-radius: 8px; overflow: hidden; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .related-story-card:hover { transform: translateY(-4px); }
    .related-story-image { width: 100%; height: 180px; object-fit: cover; }
    .related-story-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 1.25rem; background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.85) 100%); color: white; }
    .related-story-tag { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--primary-yellow); margin-bottom: 0.5rem; }
    .related-story-title { font-family: Cormorant Garamond, serif; font-size: 1.1rem; font-weight: 500; }
    .business-detail-back-btn { display: inline-flex; align-items: center; gap: 0.5rem; background: none; border: none; color: var(--text-light); font-size: 0.9rem; cursor: pointer; padding: 0; margin-bottom: 1.5rem; }
    .business-detail-back-btn:hover { color: var(--primary-red); }
    @media (max-width: 1024px) { .business-detail-wrapper { grid-template-columns: 1fr; } .business-detail-sidebar { position: static; display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; } .business-ctas-card { grid-column: span 2; } .rating-summary { flex-direction: column; } .rating-summary-main { padding-right: 0; border-right: none; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 1.5rem; } }
    @media (max-width: 768px) { .business-detail-hero { height: 300px; } .business-detail-hero-title { font-size: 2.5rem; } .business-detail-hero-overlay { padding: 2rem 4%; } .business-detail-wrapper { padding: 2rem 4%; } .gallery-main { height: 280px; } }
    @media (max-width: 640px) { .business-detail-sidebar { grid-template-columns: 1fr; } .business-ctas-card { grid-column: span 1; } .business-detail-hero-title { font-size: 2rem; } .business-detail-hero-meta { flex-direction: column; align-items: flex-start; gap: 0.75rem; } .gallery-thumbnails { display: none; } }

    /* ============================================
       NEIGHBORHOOD PAGE STYLES
       ============================================ */

    .neighborhood-page {
      margin-top: 80px;
      min-height: 100vh;
    }

    .neighborhood-header {
      background: var(--primary-black);
      padding: 2rem 5%;
    }

    .neighborhood-back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 1rem;
    }

    .neighborhood-back-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .neighborhood-title-row {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .neighborhood-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3rem;
      font-weight: 600;
      color: white;
      margin: 0;
    }

    .neighborhood-vibe-tags {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .neighborhood-vibe-tag {
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.35rem 0.9rem;
      border-radius: 50px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Featured Story Hero */
    .neighborhood-featured-hero {
      position: relative;
      height: 400px;
      cursor: pointer;
      overflow: hidden;
    }

    .neighborhood-featured-hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .neighborhood-featured-hero:hover .neighborhood-featured-hero-image {
      transform: scale(1.03);
    }

    .neighborhood-featured-hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, transparent 30%, rgba(0,0,0,0.85) 100%);
    }

    .neighborhood-featured-hero-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 3rem 5%;
      color: white;
    }

    .neighborhood-featured-tag {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 0.4rem 1rem;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      border-radius: 3px;
      margin-bottom: 1rem;
    }

    .neighborhood-featured-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      font-weight: 500;
      line-height: 1.2;
      margin-bottom: 0.75rem;
    }

    .neighborhood-featured-excerpt {
      font-size: 1rem;
      color: rgba(255,255,255,0.85);
      line-height: 1.6;
      margin-bottom: 1rem;
      max-width: 600px;
    }

    .neighborhood-featured-meta {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.7);
      display: flex;
      gap: 1.5rem;
    }

    /* Neighborhood Content Wrapper */
    .neighborhood-content-wrapper {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 3rem;
      padding: 3rem 5%;
      max-width: 1400px;
      margin: 0 auto;
    }

    .neighborhood-main-content {
      min-width: 0;
    }

    .neighborhood-section {
      margin-bottom: 3rem;
    }

    .neighborhood-section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.75rem;
    }

    .neighborhood-section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--primary-yellow);
    }

    /* Neighborhood Listings Grid - 3 columns */
    .neighborhood-listings-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .neighborhood-listing-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: all 0.3s;
    }

    .neighborhood-listing-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .neighborhood-listing-card.featured {
      border: 2px solid var(--primary-yellow);
    }

    .neighborhood-listing-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .neighborhood-listing-content {
      padding: 1.25rem;
    }

    .neighborhood-listing-badge {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 0.25rem 0.6rem;
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.6rem;
    }

    .neighborhood-listing-card.featured .neighborhood-listing-badge {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    .neighborhood-listing-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.15rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
      line-height: 1.3;
    }

    .neighborhood-listing-desc {
      font-size: 0.85rem;
      color: var(--text-light);
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .neighborhood-listing-meta {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.75rem;
      font-size: 0.75rem;
      color: var(--text-light);
    }

    /* Inline Ad */
    .neighborhood-inline-ad {
      background: var(--secondary-yellow);
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 3rem;
    }

    .neighborhood-inline-ad-label {
      font-size: 0.65rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.5rem;
    }

    .neighborhood-inline-ad-content {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      color: var(--primary-black);
    }

    /* Stories Grid */
    .neighborhood-stories-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }

    .neighborhood-story-card {
      display: flex;
      gap: 1rem;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: all 0.3s;
    }

    .neighborhood-story-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    .neighborhood-story-image {
      width: 120px;
      height: 100%;
      min-height: 100px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .neighborhood-story-content {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .neighborhood-story-category {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--primary-red);
      font-weight: 600;
      margin-bottom: 0.35rem;
    }

    .neighborhood-story-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
      font-weight: 600;
      line-height: 1.3;
      margin-bottom: 0.35rem;
    }

    .neighborhood-story-date {
      font-size: 0.75rem;
      color: var(--text-light);
    }

    /* Neighborhood Sidebar */
    .neighborhood-sidebar {
      position: sticky;
      top: 100px;
      height: fit-content;
    }

    .neighborhood-sidebar-ad {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .neighborhood-sidebar-ad-label {
      font-size: 0.6rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }

    .neighborhood-sidebar-ad-placeholder {
      background: #e0e0e0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-size: 0.8rem;
    }

    .neighborhood-sidebar-ad-placeholder.small {
      height: 250px;
    }

    .neighborhood-sidebar-ad-placeholder.large {
      height: 600px;
    }

    /* Related Neighborhoods */
    .neighborhood-related-box {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      margin-bottom: 1.5rem;
    }

    .neighborhood-related-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .neighborhood-related-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
    }

    .neighborhood-related-card {
      padding: 0.85rem;
      background: var(--secondary-yellow);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .neighborhood-related-card:hover {
      background: var(--primary-yellow);
      transform: translateY(-2px);
    }

    .neighborhood-related-name {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--primary-black);
    }

    /* Neighborhood Newsletter */
    .neighborhood-newsletter-box {
      background: var(--primary-black);
      color: white;
      padding: 1.75rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
    }

    .neighborhood-newsletter-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .neighborhood-newsletter-desc {
      font-size: 0.85rem;
      opacity: 0.8;
      margin-bottom: 1.25rem;
      line-height: 1.5;
    }

    .neighborhood-newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .neighborhood-newsletter-input {
      width: 100%;
      padding: 0.85rem 1rem;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .neighborhood-newsletter-input::placeholder {
      color: rgba(255,255,255,0.5);
    }

    .neighborhood-newsletter-input:focus {
      outline: none;
      border-color: var(--primary-yellow);
      background: rgba(255,255,255,0.15);
    }

    .neighborhood-newsletter-button {
      background: var(--primary-yellow);
      color: var(--primary-black);
      padding: 0.85rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      transition: all 0.3s;
    }

    .neighborhood-newsletter-button:hover {
      background: #FFE580;
      transform: translateY(-1px);
    }

    .neighborhood-newsletter-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .neighborhood-newsletter-success {
      background: rgba(76, 175, 80, 0.2);
      color: #4CAF50;
      padding: 0.75rem;
      border-radius: 6px;
      font-size: 0.85rem;
      text-align: center;
    }

    /* Empty State */
    .neighborhood-empty-state {
      color: var(--text-light);
      font-style: italic;
      padding: 2rem;
      text-align: center;
      background: #f9f9f9;
      border-radius: 8px;
    }

    /* Neighborhood Page Responsive */
    @media (max-width: 1024px) {
      .neighborhood-content-wrapper {
        grid-template-columns: 1fr;
      }

      .neighborhood-sidebar {
        position: static;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
      }

      .neighborhood-sidebar-ad:first-child {
        display: none;
      }

      .neighborhood-listings-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .neighborhood-header {
        padding: 1.5rem 4%;
      }

      .neighborhood-title {
        font-size: 2.2rem;
      }

      .neighborhood-featured-hero {
        height: 320px;
      }

      .neighborhood-featured-title {
        font-size: 1.8rem;
      }

      .neighborhood-content-wrapper {
        padding: 2rem 4%;
        gap: 2rem;
      }

      .neighborhood-sidebar {
        grid-template-columns: 1fr;
      }

      .neighborhood-listings-grid {
        grid-template-columns: 1fr;
      }

      .neighborhood-stories-grid {
        grid-template-columns: 1fr;
      }

      .neighborhood-story-card {
        flex-direction: column;
      }

      .neighborhood-story-image {
        width: 100%;
        height: 150px;
      }
    }

    @media (max-width: 480px) {
      .neighborhood-title {
        font-size: 1.8rem;
      }

      .neighborhood-vibe-tag {
        font-size: 0.6rem;
        padding: 0.25rem 0.6rem;
      }

      .neighborhood-featured-hero {
        height: 280px;
      }

      .neighborhood-featured-hero-content {
        padding: 2rem 4%;
      }

      .neighborhood-featured-title {
        font-size: 1.5rem;
      }

      .neighborhood-related-grid {
        grid-template-columns: 1fr;
      }

      .neighborhood-newsletter-box {
        padding: 1.25rem;
      }
    }

    @media (max-width: 768px) {
      .detail-title {
        font-size: 2.5rem;
      }

      .detail-hero {
        height: 40vh;
        min-height: 300px;
      }

      .property-specs-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        padding: 1.5rem;
      }

      .property-spec-value {
        font-size: 1.8rem;
      }

      .author-bio {
        flex-direction: column;
        text-align: center;
      }

      .author-avatar {
        margin: 0 auto;
      }
    }

    /* ============================================
       CATEGORY LANDING PAGE STYLES
       ============================================ */

    /* Category Landing Page - 2 Column with Sidebar */
    .category-landing {
      margin-top: 80px;
      padding: 3rem 5%;
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 3rem;
      max-width: 1400px;
      margin-left: auto;
      margin-right: auto;
    }

    .category-main {
      min-width: 0;
    }

    .category-header {
      margin-bottom: 2.5rem;
    }

    .category-header h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
    }

    .category-header p {
      font-size: 1.1rem;
      color: var(--text-light);
      margin-bottom: 1rem;
    }

    .category-back-btn {
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 0.9rem;
      cursor: pointer;
      padding: 0;
      margin-bottom: 1rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: color 0.3s;
    }

    .category-back-btn:hover {
      color: var(--primary-red);
    }

    /* Primary Featured Story Card */
    .primary-story-card {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      margin-bottom: 2rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .primary-story-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.18);
    }

    .primary-story-image {
      width: 100%;
      height: 450px;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .primary-story-card:hover .primary-story-image {
      transform: scale(1.05);
    }

    .primary-story-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 3rem;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.85) 100%);
      color: white;
    }

    .primary-story-tag {
      display: inline-block;
      background: var(--primary-red);
      color: white;
      padding: 0.4rem 1rem;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      border-radius: 3px;
      margin-bottom: 1rem;
    }

    .primary-story-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.5rem;
      font-weight: 500;
      line-height: 1.2;
      margin-bottom: 0.75rem;
    }

    .primary-story-excerpt {
      font-size: 1rem;
      color: rgba(255,255,255,0.85);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .primary-story-meta {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.7);
      display: flex;
      gap: 1.5rem;
    }

    /* Secondary Stories Grid */
    .secondary-stories-section {
      margin-bottom: 3rem;
    }

    .secondary-stories-section h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--primary-black);
    }

    .secondary-stories-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .secondary-story-card {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .secondary-story-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .secondary-story-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .secondary-story-card:hover .secondary-story-image {
      transform: scale(1.08);
    }

    .secondary-story-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1.25rem;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.85) 100%);
      color: white;
    }

    .secondary-story-tag {
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--primary-yellow);
      margin-bottom: 0.5rem;
    }

    .secondary-story-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.2rem;
      font-weight: 500;
      line-height: 1.25;
    }

    /* Upcoming Listings Section */
    .upcoming-listings {
      margin-bottom: 2rem;
    }

    .upcoming-listings h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--primary-black);
    }

    .listing-cards-grid {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .listing-card {
      display: flex;
      gap: 1.25rem;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .listing-card:hover {
      transform: translateX(4px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
    }

    .listing-card-image {
      width: 140px;
      height: 100px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .listing-card-content {
      padding: 1rem 1rem 1rem 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .listing-card-category {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--primary-red);
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .listing-card-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--primary-black);
      margin-bottom: 0.25rem;
    }

    .listing-card-meta {
      font-size: 0.8rem;
      color: var(--text-light);
    }

    /* See All CTA */
    .see-all-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary-red);
      font-weight: 600;
      font-size: 0.95rem;
      text-decoration: none;
      transition: gap 0.3s ease;
      cursor: pointer;
    }

    .see-all-cta:hover {
      gap: 0.75rem;
    }

    /* Category Sidebar */
    .category-sidebar {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    /* Sidebar Newsletter */
    .sidebar-newsletter {
      background: var(--secondary-yellow);
      padding: 1.75rem;
      border-radius: 12px;
    }

    .sidebar-newsletter h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
    }

    .sidebar-newsletter p {
      font-size: 0.9rem;
      color: var(--text-dark);
      margin-bottom: 1rem;
    }

    .sidebar-newsletter input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
    }

    .sidebar-newsletter button {
      width: 100%;
      background: var(--primary-black);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: background 0.3s;
    }

    .sidebar-newsletter button:hover {
      background: var(--primary-red);
    }

    /* Sidebar Ad */
    .sidebar-ad {
      background: #f5f5f5;
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      min-height: 250px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 1px dashed var(--border-color);
    }

    .sidebar-ad span {
      font-size: 0.75rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    /* Sidebar Neighborhoods */
    .sidebar-neighborhoods {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid var(--border-color);
    }

    .sidebar-neighborhoods h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--primary-black);
    }

    .neighborhoods-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .neighborhood-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0.75rem;
      background: #fafafa;
      border-radius: 6px;
      color: var(--text-dark);
      text-decoration: none;
      font-size: 0.9rem;
      transition: background 0.3s, color 0.3s;
      cursor: pointer;
    }

    .neighborhood-link:hover {
      background: var(--primary-yellow);
      color: var(--primary-black);
    }

    /* Sidebar Submit CTA */
    .sidebar-cta {
      background: var(--primary-black);
      padding: 1.75rem;
      border-radius: 12px;
      color: white;
    }

    .sidebar-cta h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .sidebar-cta p {
      font-size: 0.9rem;
      color: rgba(255,255,255,0.8);
      margin-bottom: 1rem;
    }

    .sidebar-cta button {
      width: 100%;
      background: var(--primary-red);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }

    .sidebar-cta button:hover {
      background: var(--accent-red);
      transform: translateY(-2px);
    }

    /* Category Landing Responsive */
    @media (max-width: 1024px) {
      .category-landing {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .category-sidebar {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
      }

      .secondary-stories-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .category-header h1 {
        font-size: 2.5rem;
      }

      .primary-story-image {
        height: 350px;
      }

      .primary-story-title {
        font-size: 1.8rem;
      }

      .primary-story-overlay {
        padding: 2rem;
      }

      .secondary-stories-grid {
        grid-template-columns: 1fr;
      }

      .category-sidebar {
        grid-template-columns: 1fr;
      }

      .listing-card {
        flex-direction: column;
      }

      .listing-card-image {
        width: 100%;
        height: 150px;
      }

      .listing-card-content {
        padding: 1rem;
      }
    }

    /* ========================================== */
    /* Homepage Map System V1 Styles              */
    /* ========================================== */

    /* Map Content Layout */
    .map-content-wrapper {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 2rem;
      align-items: start;
      max-width: 1100px;
      margin: 0 auto;
    }

    .map-container {
      position: relative;
    }

    /* Area Card */
    .area-card {
      position: sticky;
      top: 100px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 30px rgba(0,0,0,0.12);
      overflow: hidden;
      z-index: 50;
    }

    .area-card-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .area-card-content {
      padding: 1.5rem;
    }

    .area-card-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary-black);
    }

    .area-card-description {
      color: var(--text-light);
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 1rem;
    }

    .area-card-vibes {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.25rem;
    }

    .vibe-tag {
      background: var(--secondary-yellow);
      color: var(--primary-black);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .area-card-btn {
      width: 100%;
      background: var(--primary-red);
      color: white;
      border: none;
      padding: 0.875rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.3s;
    }

    .area-card-btn:hover {
      background: var(--accent-red);
    }

    .area-card-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }

    .area-card-close:hover {
      background: rgba(0,0,0,0.7);
    }

    .area-card-container {
      min-height: 400px;
    }

    .area-card-placeholder {
      background: var(--secondary-yellow);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      color: var(--text-light);
      font-size: 0.95rem;
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Map Clear Button */
    .map-clear-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--primary-black);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      z-index: 10;
      transition: background 0.3s;
    }

    .map-clear-btn:hover {
      background: var(--text-dark);
    }

    /* Map region selected state */
    .map-region.selected {
      fill: rgba(255, 217, 90, 0.55);
      filter: drop-shadow(0 0 12px rgba(255, 215, 90, 0.7));
    }

    /* Section Headers for Filtered Content */
    .filtered-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .section-filter-badge {
      background: var(--secondary-yellow);
      color: var(--primary-black);
      padding: 0.35rem 0.9rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    /* Mobile Area Selector */
    .mobile-area-selector {
      display: none;
      width: 100%;
      padding: 1rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 1rem;
      font-family: 'Source Sans 3', sans-serif;
      margin-bottom: 1.5rem;
      background: white;
      cursor: pointer;
    }

    .mobile-area-selector:focus {
      outline: none;
      border-color: var(--primary-yellow);
      box-shadow: 0 0 0 3px rgba(255, 217, 90, 0.2);
    }

    /* Map placeholder for lazy loading */
    .map-placeholder {
      background: var(--secondary-yellow);
      border-radius: 12px;
      padding: 3rem;
      text-align: center;
      color: var(--text-light);
      font-size: 0.95rem;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Responsive: Mobile */
    @media (max-width: 768px) {
      .map-content-wrapper {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .map-container {
        display: none;
      }

      .mobile-area-selector {
        display: block;
      }

      .area-card-container {
        min-height: auto;
      }

      .area-card {
        position: static;
      }

      .neighborhoods-section .section-header {
        margin-bottom: 1.5rem;
      }
    }

    /* Responsive: Tablet */
    @media (max-width: 1024px) and (min-width: 769px) {
      .map-content-wrapper {
        grid-template-columns: 1fr 280px;
        gap: 1.5rem;
      }

      .area-card-image {
        height: 150px;
      }

      .area-card-content {
        padding: 1.25rem;
      }
    }

    /* Event Detail V2 Styles */
    .event-detail-v2 { margin-top: 80px; display: grid; grid-template-columns: 1fr 340px; gap: 0; max-width: 1400px; margin-left: auto; margin-right: auto; }
    .event-main { padding: 0; }
    .event-sidebar { background: #f9f9f9; padding: 2rem; display: flex; flex-direction: column; gap: 1.5rem; position: sticky; top: 80px; height: fit-content; max-height: calc(100vh - 100px); overflow-y: auto; }
    .event-hero-v2 { position: relative; height: 450px; overflow: hidden; }
    .event-hero-image { width: 100%; height: 100%; object-fit: cover; }
    .event-hero-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 3rem; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; }
    .event-hero-badges { display: flex; gap: 0.75rem; margin-bottom: 1rem; flex-wrap: wrap; }
    .event-category-badge { background: var(--primary-yellow); color: var(--primary-black); padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 4px; }
    .event-featured-badge { background: var(--primary-red); color: white; padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 4px; }
    .event-past-badge { background: rgba(0,0,0,0.6); color: white; padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 4px; border: 1px solid rgba(255,255,255,0.3); }
    .event-recurring-badge { background: transparent; color: white; padding: 0.4rem 1rem; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 4px; border: 1px solid rgba(255,255,255,0.5); }
    .event-hero-title { font-family: 'Cormorant Garamond', serif; font-size: 2.8rem; font-weight: 600; margin-bottom: 0.5rem; line-height: 1.1; }
    .event-hero-neighborhood { font-size: 1rem; opacity: 0.9; }
    .event-datetime-badge { position: absolute; top: 2rem; right: 2rem; background: white; border-radius: 8px; padding: 1rem; text-align: center; min-width: 90px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
    .event-datetime-month { font-size: 0.75rem; font-weight: 600; color: var(--primary-red); text-transform: uppercase; letter-spacing: 0.1em; }
    .event-datetime-day { font-family: 'Cormorant Garamond', serif; font-size: 2.2rem; font-weight: 700; color: var(--primary-black); line-height: 1; }
    .event-datetime-time { font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem; }
    .event-content { padding: 2.5rem 3rem; }
    .event-back-btn { display: inline-flex; align-items: center; gap: 0.5rem; background: none; border: none; color: var(--primary-red); font-weight: 600; font-size: 0.9rem; cursor: pointer; margin-bottom: 2rem; padding: 0; }
    .event-back-btn:hover { text-decoration: underline; }
    .event-info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.25rem; margin-bottom: 2.5rem; }
    .event-info-card { background: white; border: 1px solid var(--border-color); border-radius: 12px; padding: 1.25rem; display: flex; gap: 1rem; align-items: flex-start; }
    .event-info-icon { font-size: 1.5rem; flex-shrink: 0; }
    .event-info-content { flex: 1; }
    .event-info-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-light); margin-bottom: 0.25rem; }
    .event-info-value { font-weight: 600; color: var(--primary-black); font-size: 0.95rem; }
    .event-info-subvalue { font-size: 0.85rem; color: var(--text-light); margin-top: 0.25rem; }
    .event-description { margin-bottom: 2.5rem; }
    .event-description h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary-black); }
    .event-description p { font-size: 1.05rem; line-height: 1.8; color: var(--text-dark); }
    .event-gallery { margin-bottom: 2.5rem; }
    .event-gallery h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary-black); }
    .event-gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem; }
    .event-gallery-thumb { aspect-ratio: 4/3; border-radius: 8px; overflow: hidden; cursor: pointer; transition: transform 0.3s; }
    .event-gallery-thumb:hover { transform: scale(1.02); }
    .event-gallery-thumb img { width: 100%; height: 100%; object-fit: cover; }
    .event-map-container { border-radius: 12px; overflow: hidden; margin-bottom: 2.5rem; border: 1px solid var(--border-color); }
    .event-map-container iframe { width: 100%; height: 300px; border: none; display: block; }
    .event-tags { margin-bottom: 2.5rem; }
    .event-tags h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary-black); }
    .event-tags-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
    .event-tag { background: var(--secondary-yellow); color: var(--primary-black); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
    .event-reviews-section { margin-bottom: 2.5rem; padding: 2rem; background: #f9f9f9; border-radius: 12px; text-align: center; }
    .event-reviews-section h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--primary-black); }
    .event-reviews-section p { color: var(--text-light); font-size: 0.9rem; }
    .related-events-section { margin-bottom: 2.5rem; }
    .related-events-section h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 1.25rem; color: var(--primary-black); }
    .related-events-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.25rem; }
    .related-event-card { display: flex; gap: 1rem; background: white; border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; }
    .related-event-card:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .related-event-image { width: 100px; height: 100px; object-fit: cover; flex-shrink: 0; }
    .related-event-content { padding: 1rem 1rem 1rem 0; display: flex; flex-direction: column; justify-content: center; }
    .related-event-date { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--primary-red); font-weight: 600; margin-bottom: 0.25rem; }
    .related-event-title { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 600; color: var(--primary-black); line-height: 1.2; }
    .event-sidebar-cta { background: white; padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-color); }
    .event-sidebar-cta h3 { font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; margin-bottom: 0.5rem; color: var(--primary-black); }
    .event-sidebar-cta p { font-size: 0.9rem; color: var(--text-light); margin-bottom: 1rem; }
    .event-sidebar-cta button, .event-sidebar-cta a { display: block; width: 100%; background: var(--primary-black); color: white; padding: 0.85rem 1.5rem; border: none; border-radius: 6px; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; cursor: pointer; text-align: center; text-decoration: none; transition: background 0.3s; }
    .event-sidebar-cta button:hover, .event-sidebar-cta a:hover { background: var(--primary-red); }
    .event-sidebar-cta.primary button, .event-sidebar-cta.primary a { background: var(--primary-red); }
    .event-sidebar-cta.primary button:hover, .event-sidebar-cta.primary a:hover { background: var(--accent-red); }
    .event-ticket-cta { background: var(--primary-red); padding: 1.5rem; border-radius: 12px; text-align: center; color: white; }
    .event-ticket-price { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; font-weight: 600; margin-bottom: 0.5rem; }
    .event-ticket-cta a { display: block; background: white; color: var(--primary-red); padding: 0.85rem 1.5rem; border-radius: 6px; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; text-decoration: none; transition: all 0.3s; }
    .event-ticket-cta a:hover { background: var(--secondary-yellow); color: var(--primary-black); }
    .events-landing { margin-top: 80px; display: grid; grid-template-columns: 1fr 340px; gap: 0; max-width: 1400px; margin-left: auto; margin-right: auto; }
    .events-main { padding: 2.5rem 3rem; }
    .events-header { margin-bottom: 2.5rem; }
    .events-header h1 { font-family: 'Cormorant Garamond', serif; font-size: 2.5rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--primary-black); }
    .events-header p { font-size: 1.1rem; color: var(--text-light); }
    .featured-events-section { margin-bottom: 3rem; }
    .featured-events-section h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; margin-bottom: 1.25rem; color: var(--primary-black); }
    .featured-events-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem; }
    .featured-event-card { position: relative; border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.3s; height: 280px; }
    .featured-event-card:hover { transform: translateY(-4px); }
    .featured-event-card img { width: 100%; height: 100%; object-fit: cover; }
    .featured-event-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 1.5rem; background: linear-gradient(transparent, rgba(0,0,0,0.85)); color: white; }
    .featured-event-date { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; opacity: 0.9; }
    .featured-event-title { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 600; line-height: 1.2; }
    .featured-event-badge { position: absolute; top: 1rem; left: 1rem; background: var(--primary-red); color: white; padding: 0.3rem 0.75rem; font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 4px; }
    .upcoming-events-section h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; margin-bottom: 1.25rem; color: var(--primary-black); }
    .events-grid { display: flex; flex-direction: column; gap: 1rem; }
    .event-list-card { display: flex; gap: 1.25rem; background: white; border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; }
    .event-list-card:hover { transform: translateX(4px); box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .event-list-image { width: 160px; height: 120px; object-fit: cover; flex-shrink: 0; }
    .event-list-content { padding: 1.25rem 1.25rem 1.25rem 0; display: flex; flex-direction: column; justify-content: center; flex: 1; }
    .event-list-date { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--primary-red); font-weight: 600; margin-bottom: 0.35rem; }
    .event-list-title { font-family: 'Cormorant Garamond', serif; font-size: 1.25rem; font-weight: 600; color: var(--primary-black); margin-bottom: 0.35rem; line-height: 1.2; }
    .event-list-meta { font-size: 0.85rem; color: var(--text-light); }
    .past-events-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--primary-red); font-weight: 600; font-size: 0.95rem; text-decoration: none; margin-top: 2rem; cursor: pointer; }
    .past-events-link:hover { text-decoration: underline; }
    .past-event-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-light); background: #f0f0f0; padding: 0.2rem 0.5rem; border-radius: 4px; margin-left: 0.5rem; }
    @media (max-width: 1024px) { .event-detail-v2, .events-landing { grid-template-columns: 1fr; } .event-sidebar { position: static; max-height: none; padding: 2rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; } .event-hero-v2 { height: 380px; } .event-hero-title { font-size: 2.2rem; } .event-content, .events-main { padding: 2rem; } }
    @media (max-width: 768px) { .event-sidebar { grid-template-columns: 1fr; } .event-hero-v2 { height: 320px; } .event-hero-title { font-size: 1.8rem; } .event-hero-overlay { padding: 2rem; } .event-datetime-badge { top: 1rem; right: 1rem; padding: 0.75rem; min-width: 70px; } .event-datetime-day { font-size: 1.8rem; } .event-content, .events-main { padding: 1.5rem; } .event-info-grid { grid-template-columns: 1fr; } .featured-events-grid { grid-template-columns: 1fr; } .featured-event-card { height: 220px; } .event-list-card { flex-direction: column; } .event-list-image { width: 100%; height: 180px; } .event-list-content { padding: 1rem; } .related-events-grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ============================================
    // DEMO MODE - Replace with real Supabase later
    // ============================================
    // To connect to real Supabase:
    // 1. Create project at supabase.com
    // 2. Replace SUPABASE_URL and SUPABASE_KEY below
    // 3. Set DEMO_MODE to false

    const DEMO_MODE = true;
    const SUPABASE_URL = 'https://your-project.supabase.co';
    const SUPABASE_KEY = 'your-anon-key';

    // Demo user data
    const demoUsers = {
      'demo@atlvibes.com': { id: '1', email: 'demo@atlvibes.com', name: 'Demo User', role: 'business' },
      'admin@atlvibes.com': { id: '2', email: 'admin@atlvibes.com', name: 'Admin', role: 'admin' }
    };

    // Demo neighborhoods data (243 total - sample set for demo)
    // In production, this comes from Supabase: supabase.from('neighborhoods').select('*').eq('area', areaId)
    const demoNeighborhoods = {
      buckhead: [
        { id: 'bh1', name: 'Buckhead Village', area: 'buckhead', description: 'Upscale shopping and dining district', image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800', vibes: ['Upscale', 'Shopping', 'Nightlife'], featuredPostId: null },
        { id: 'bh2', name: 'Chastain Park', area: 'buckhead', description: 'Family-friendly area with amphitheater', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Family-Friendly', 'Parks', 'Music Venue'], featuredPostId: null },
        { id: 'bh3', name: 'Garden Hills', area: 'buckhead', description: 'Historic residential neighborhood', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Historic', 'Residential', 'Quiet'], featuredPostId: null },
        { id: 'bh4', name: 'Peachtree Hills', area: 'buckhead', description: 'Quiet streets near Piedmont', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Quiet', 'Residential', 'Walkable'], featuredPostId: null },
        { id: 'bh5', name: 'Tuxedo Park', area: 'buckhead', description: 'Prestigious historic estates', image: 'https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800', vibes: ['Luxury', 'Historic', 'Estates'], featuredPostId: null },
        { id: 'bh6', name: 'Paces', area: 'buckhead', description: 'Luxury homes and golf courses', image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800', vibes: ['Luxury', 'Golf', 'Exclusive'], featuredPostId: null },
        { id: 'bh7', name: 'Peachtree Battle', area: 'buckhead', description: 'Tree-lined streets, classic homes', image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800', vibes: ['Classic', 'Tree-Lined', 'Residential'], featuredPostId: null },
        { id: 'bh8', name: 'Lenox', area: 'buckhead', description: 'High-rises near Lenox Square', image: 'https://images.unsplash.com/photo-1486325212027-8081e485255e?w=800', vibes: ['Urban', 'Shopping', 'High-Rise'], featuredPostId: null }
      ],
      midtown: [
        { id: 'mt1', name: 'Midtown Core', area: 'midtown', description: 'Arts district and Piedmont Park', image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800', vibes: ['Arts District', 'Parks', 'Walkable'], featuredPostId: null },
        { id: 'mt2', name: 'Ansley Park', area: 'midtown', description: 'Historic neighborhood, winding streets', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Historic', 'Charming', 'Tree-Lined'], featuredPostId: null },
        { id: 'mt3', name: 'Piedmont Heights', area: 'midtown', description: 'Near Piedmont Hospital', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Residential', 'Convenient', 'Quiet'], featuredPostId: null },
        { id: 'mt4', name: 'Sherwood Forest', area: 'midtown', description: 'Quiet residential enclave', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Quiet', 'Residential', 'Secluded'], featuredPostId: null },
        { id: 'mt5', name: 'Atlantic Station', area: 'midtown', description: 'Mixed-use urban development', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800', vibes: ['Urban', 'Shopping', 'Entertainment'], featuredPostId: null },
        { id: 'mt6', name: 'Loring Heights', area: 'midtown', description: 'Bungalows near I-75', image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800', vibes: ['Bungalows', 'Affordable', 'Convenient'], featuredPostId: null },
        { id: 'mt7', name: 'Home Park', area: 'midtown', description: 'Near Georgia Tech', image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800', vibes: ['Student-Friendly', 'Affordable', 'Eclectic'], featuredPostId: null }
      ],
      downtown: [
        { id: 'dt1', name: 'Centennial Hill', area: 'downtown', description: 'Near Centennial Olympic Park', image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=800', vibes: ['Tourist', 'Attractions', 'Urban'], featuredPostId: null },
        { id: 'dt2', name: 'Fairlie-Poplar', area: 'downtown', description: 'Historic commercial district', image: 'https://images.unsplash.com/photo-1486325212027-8081e485255e?w=800', vibes: ['Historic', 'Business', 'Architecture'], featuredPostId: null },
        { id: 'dt3', name: 'South Downtown', area: 'downtown', description: 'Emerging arts and culture hub', image: 'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=800', vibes: ['Emerging', 'Arts', 'Culture'], featuredPostId: null },
        { id: 'dt4', name: 'Sweet Auburn', area: 'downtown', description: 'Historic MLK district', image: 'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=800', vibes: ['Historic', 'Cultural Heritage', 'Soul Food'], featuredPostId: null },
        { id: 'dt5', name: 'Castleberry Hill', area: 'downtown', description: 'Lofts and art galleries', image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800', vibes: ['Arts', 'Lofts', 'Galleries'], featuredPostId: null },
        { id: 'dt6', name: 'Five Points', area: 'downtown', description: 'MARTA hub, urban core', image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800', vibes: ['Transit Hub', 'Urban', 'Business'], featuredPostId: null }
      ],
      oldFourthWard: [
        { id: 'o4w1', name: 'Old Fourth Ward', area: 'oldFourthWard', description: 'BeltLine, Ponce City Market', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800', vibes: ['BeltLine', 'Trendy', 'Food Scene'], featuredPostId: null },
        { id: 'o4w2', name: 'Bedford Pine', area: 'oldFourthWard', description: 'Near Freedom Park', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Parks', 'Residential', 'Quiet'], featuredPostId: null },
        { id: 'o4w3', name: 'Boulevard Heights', area: 'oldFourthWard', description: 'Historic residential area', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Historic', 'Residential', 'Affordable'], featuredPostId: null },
        { id: 'o4w4', name: 'Poncey-Highland', area: 'oldFourthWard', description: 'Eclectic, near L5P', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800', vibes: ['Eclectic', 'Nightlife', 'Creative'], featuredPostId: null }
      ],
      virginiaHighland: [
        { id: 'vh1', name: 'Virginia-Highland', area: 'virginiaHighland', description: 'Walkable village, boutiques', image: 'https://images.unsplash.com/photo-1416339306562-f3d12fefd36f?w=800', vibes: ['Walkable', 'Boutiques', 'Brunch'], featuredPostId: null },
        { id: 'vh2', name: 'Morningside', area: 'virginiaHighland', description: 'Family-friendly, great schools', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Family-Friendly', 'Schools', 'Parks'], featuredPostId: null },
        { id: 'vh3', name: 'Druid Hills', area: 'virginiaHighland', description: 'Historic Olmsted parks', image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800', vibes: ['Historic', 'Parks', 'Mansions'], featuredPostId: null },
        { id: 'vh4', name: 'Lenox Park', area: 'virginiaHighland', description: 'Near Emory', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Convenient', 'Residential', 'Quiet'], featuredPostId: null },
        { id: 'vh5', name: 'North Druid Hills', area: 'virginiaHighland', description: 'Residential, near CDC', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Residential', 'Suburban', 'Convenient'], featuredPostId: null }
      ],
      inmanPark: [
        { id: 'ip1', name: 'Inman Park', area: 'inmanPark', description: 'Victorian homes, BeltLine', image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800', vibes: ['Victorian', 'BeltLine', 'Historic'], featuredPostId: null },
        { id: 'ip2', name: 'Little Five Points', area: 'inmanPark', description: 'Alternative culture hub', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800', vibes: ['Alternative', 'Indie', 'Vintage'], featuredPostId: null },
        { id: 'ip3', name: 'Reynoldstown', area: 'inmanPark', description: 'Historic, near BeltLine', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Historic', 'BeltLine', 'Emerging'], featuredPostId: null },
        { id: 'ip4', name: 'Cabbagetown', area: 'inmanPark', description: 'Mill village, murals', image: 'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=800', vibes: ['Murals', 'Historic', 'Artsy'], featuredPostId: null },
        { id: 'ip5', name: 'Candler Park', area: 'inmanPark', description: 'Golf course, pool, festivals', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Parks', 'Festivals', 'Family-Friendly'], featuredPostId: null }
      ],
      westMidtown: [
        { id: 'wm1', name: 'West Midtown', area: 'westMidtown', description: 'Restaurants, galleries', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800', vibes: ['Restaurants', 'Galleries', 'Trendy'], featuredPostId: null },
        { id: 'wm2', name: 'Westside Provisions', area: 'westMidtown', description: 'Shopping and dining', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800', vibes: ['Shopping', 'Dining', 'Upscale'], featuredPostId: null },
        { id: 'wm3', name: 'Berkeley Park', area: 'westMidtown', description: 'Near Topgolf', image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800', vibes: ['Entertainment', 'Residential', 'Convenient'], featuredPostId: null },
        { id: 'wm4', name: 'Blandtown', area: 'westMidtown', description: 'Industrial to residential', image: 'https://images.unsplash.com/photo-1486325212027-8081e485255e?w=800', vibes: ['Industrial', 'Emerging', 'Lofts'], featuredPostId: null },
        { id: 'wm5', name: 'Marietta Street Artery', area: 'westMidtown', description: 'Creative corridor', image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800', vibes: ['Creative', 'Studios', 'Nightlife'], featuredPostId: null },
        { id: 'wm6', name: 'English Avenue', area: 'westMidtown', description: 'Historic, revitalizing', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Historic', 'Revitalizing', 'Community'], featuredPostId: null },
        { id: 'wm7', name: 'Vine City', area: 'westMidtown', description: 'Near Mercedes-Benz Stadium', image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=800', vibes: ['Sports', 'Events', 'Revitalizing'], featuredPostId: null }
      ],
      eastAtlanta: [
        { id: 'ea1', name: 'East Atlanta Village', area: 'eastAtlanta', description: 'Live music, dive bars', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800', vibes: ['Live Music', 'Dive Bars', 'Eclectic'], featuredPostId: null },
        { id: 'ea2', name: 'Ormewood Park', area: 'eastAtlanta', description: 'Bungalows, family-friendly', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Bungalows', 'Family-Friendly', 'Quiet'], featuredPostId: null },
        { id: 'ea3', name: 'East Lake', area: 'eastAtlanta', description: 'Golf club, revitalized', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Golf', 'Revitalized', 'Community'], featuredPostId: null },
        { id: 'ea4', name: 'Kirkwood', area: 'eastAtlanta', description: 'Historic, diverse', image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800', vibes: ['Historic', 'Diverse', 'Community'], featuredPostId: null },
        { id: 'ea5', name: 'Edgewood', area: 'eastAtlanta', description: 'Nightlife corridor', image: 'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800', vibes: ['Nightlife', 'Bars', 'Young Professionals'], featuredPostId: null },
        { id: 'ea6', name: 'Oakhurst', area: 'eastAtlanta', description: 'Near Decatur', image: 'https://images.unsplash.com/photo-1416339306562-f3d12fefd36f?w=800', vibes: ['Walkable', 'Restaurants', 'Hip'], featuredPostId: null }
      ],
      decatur: [
        { id: 'dc1', name: 'Downtown Decatur', area: 'decatur', description: 'Walkable square, dining', image: 'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=800', vibes: ['Walkable', 'Dining', 'Town Square'], featuredPostId: null },
        { id: 'dc2', name: 'Oakhurst', area: 'decatur', description: 'Hip restaurants, music', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800', vibes: ['Hip', 'Restaurants', 'Music'], featuredPostId: null },
        { id: 'dc3', name: 'Winnona Park', area: 'decatur', description: 'Family-friendly, schools', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Family-Friendly', 'Schools', 'Parks'], featuredPostId: null },
        { id: 'dc4', name: 'MAK District', area: 'decatur', description: 'Arts and makers', image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800', vibes: ['Arts', 'Makers', 'Creative'], featuredPostId: null },
        { id: 'dc5', name: 'Great Lakes', area: 'decatur', description: 'Near Emory', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Convenient', 'Residential', 'Quiet'], featuredPostId: null },
        { id: 'dc6', name: 'Medlock Park', area: 'decatur', description: 'Quiet, residential', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Quiet', 'Residential', 'Parks'], featuredPostId: null }
      ],
      grantPark: [
        { id: 'gp1', name: 'Grant Park', area: 'grantPark', description: 'Zoo Atlanta, Victorian homes', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800', vibes: ['Zoo Atlanta', 'Victorian', 'Parks'], featuredPostId: null },
        { id: 'gp2', name: 'Peoplestown', area: 'grantPark', description: 'Historic, near stadium', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Historic', 'Affordable', 'Community'], featuredPostId: null },
        { id: 'gp3', name: 'Summerhill', area: 'grantPark', description: 'Georgia State area', image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=800', vibes: ['Emerging', 'Sports', 'Young Professionals'], featuredPostId: null },
        { id: 'gp4', name: 'Pittsburgh', area: 'grantPark', description: 'Historic, BeltLine connected', image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800', vibes: ['Historic', 'BeltLine', 'Revitalizing'], featuredPostId: null },
        { id: 'gp5', name: 'Mechanicsville', area: 'grantPark', description: 'Near downtown', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', vibes: ['Historic', 'Affordable', 'Convenient'], featuredPostId: null },
        { id: 'gp6', name: 'Capitol View', area: 'grantPark', description: 'Southern Atlanta', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', vibes: ['Emerging', 'Affordable', 'Community'], featuredPostId: null },
        { id: 'gp7', name: 'Chosewood Park', area: 'grantPark', description: 'Near Federal Pen', image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800', vibes: ['Emerging', 'Affordable', 'Residential'], featuredPostId: null }
      ]
    };

    // Area metadata for homepage map Area Card display
    const areaMetadata = {
      downtown: {
        name: 'Downtown Atlanta',
        shortDescription: 'The heart of the city featuring world-class dining, sports venues, and historic landmarks.',
        image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=800',
        vibes: ['Urban', 'Business', 'Entertainment']
      },
      midtown: {
        name: 'Midtown',
        shortDescription: 'Atlanta\'s arts and culture district with Piedmont Park, museums, and vibrant nightlife.',
        image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800',
        vibes: ['Arts District', 'Walkable', 'Parks']
      },
      eastside: {
        name: 'Eastside Atlanta',
        shortDescription: 'Historic neighborhoods, the BeltLine, and Atlanta\'s most creative food and bar scene.',
        image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
        vibes: ['BeltLine', 'Trendy', 'Creative']
      },
      westside: {
        name: 'Westside Atlanta',
        shortDescription: 'Industrial-chic restaurants, galleries, and West Midtown\'s thriving food scene.',
        image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800',
        vibes: ['Restaurants', 'Galleries', 'Industrial-Chic']
      },
      southwest: {
        name: 'Southwest Atlanta',
        shortDescription: 'Historic HBCU campuses, community-driven revitalization, and emerging arts scenes.',
        image: 'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=800',
        vibes: ['Historic', 'Community', 'Emerging']
      },
      southeast: {
        name: 'Southeast Atlanta',
        shortDescription: 'East Atlanta Village vibes, Grant Park charm, and Zoo Atlanta adventures.',
        image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800',
        vibes: ['Live Music', 'Parks', 'Family-Friendly']
      },
      buckhead: {
        name: 'Buckhead',
        shortDescription: 'Upscale shopping, fine dining, and Atlanta\'s most prestigious neighborhoods.',
        image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800',
        vibes: ['Upscale', 'Shopping', 'Fine Dining']
      },
      'south-atlanta': {
        name: 'South Atlanta',
        shortDescription: 'Historic communities with deep roots and exciting new developments.',
        image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800',
        vibes: ['Historic', 'Community', 'Affordable']
      },
      'north-atlanta': {
        name: 'North Atlanta',
        shortDescription: 'Suburban charm with excellent schools, parks, and family-friendly communities.',
        image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800',
        vibes: ['Suburban', 'Family-Friendly', 'Schools']
      }
    };

    // Neighborhood to FMLS ZIP Code Mapping
    const neighborhoodToFMLS = {
      'bh1': { city: 'Atlanta', zips: ['30305', '30326'], area: 'Buckhead Village' },
      'bh2': { city: 'Atlanta', zips: ['30327', '30342'], area: 'Chastain Park' },
      'bh3': { city: 'Atlanta', zips: ['30305', '30309'], area: 'Garden Hills' },
      'bh4': { city: 'Atlanta', zips: ['30305', '30309'], area: 'Peachtree Hills' },
      'bh5': { city: 'Atlanta', zips: ['30327', '30305'], area: 'Tuxedo Park' },
      'bh6': { city: 'Atlanta', zips: ['30327', '30305'], area: 'Paces' },
      'bh7': { city: 'Atlanta', zips: ['30305', '30309'], area: 'Peachtree Battle' },
      'bh8': { city: 'Atlanta', zips: ['30326', '30324'], area: 'Lenox' },
      'mt1': { city: 'Atlanta', zips: ['30308', '30309'], area: 'Midtown Core' },
      'mt2': { city: 'Atlanta', zips: ['30309', '30324'], area: 'Ansley Park' },
      'mt3': { city: 'Atlanta', zips: ['30309', '30324'], area: 'Piedmont Heights' },
      'mt4': { city: 'Atlanta', zips: ['30309'], area: 'Sherwood Forest' },
      'mt5': { city: 'Atlanta', zips: ['30363', '30318'], area: 'Atlantic Station' },
      'mt6': { city: 'Atlanta', zips: ['30318', '30309'], area: 'Loring Heights' },
      'mt7': { city: 'Atlanta', zips: ['30318', '30313'], area: 'Home Park' },
      'dt1': { city: 'Atlanta', zips: ['30313', '30303'], area: 'Centennial Hill' },
      'dt2': { city: 'Atlanta', zips: ['30303'], area: 'Fairlie-Poplar' },
      'dt3': { city: 'Atlanta', zips: ['30303', '30315'], area: 'South Downtown' },
      'dt4': { city: 'Atlanta', zips: ['30312', '30303'], area: 'Sweet Auburn' },
      'dt5': { city: 'Atlanta', zips: ['30313', '30314'], area: 'Castleberry Hill' },
      'dt6': { city: 'Atlanta', zips: ['30303'], area: 'Five Points' },
      'o4w1': { city: 'Atlanta', zips: ['30312', '30308'], area: 'Old Fourth Ward' },
      'o4w2': { city: 'Atlanta', zips: ['30312', '30307'], area: 'Bedford Pine' },
      'o4w3': { city: 'Atlanta', zips: ['30312'], area: 'Boulevard Heights' },
      'o4w4': { city: 'Atlanta', zips: ['30307', '30308'], area: 'Poncey-Highland' },
      'vh1': { city: 'Atlanta', zips: ['30306', '30307'], area: 'Virginia-Highland' },
      'vh2': { city: 'Atlanta', zips: ['30306', '30324'], area: 'Morningside' },
      'vh3': { city: 'Atlanta', zips: ['30307', '30322'], area: 'Druid Hills' },
      'vh4': { city: 'Atlanta', zips: ['30319', '30324'], area: 'Lenox Park' },
      'vh5': { city: 'Atlanta', zips: ['30329', '30319'], area: 'North Druid Hills' },
      'ip1': { city: 'Atlanta', zips: ['30307', '30312'], area: 'Inman Park' },
      'ip2': { city: 'Atlanta', zips: ['30307'], area: 'Little Five Points' },
      'ip3': { city: 'Atlanta', zips: ['30316', '30312'], area: 'Reynoldstown' },
      'ip4': { city: 'Atlanta', zips: ['30316', '30312'], area: 'Cabbagetown' },
      'ip5': { city: 'Atlanta', zips: ['30307', '30317'], area: 'Candler Park' },
      'wm1': { city: 'Atlanta', zips: ['30318', '30309'], area: 'West Midtown' },
      'wm2': { city: 'Atlanta', zips: ['30318'], area: 'Westside Provisions' },
      'wm3': { city: 'Atlanta', zips: ['30318'], area: 'Berkeley Park' },
      'wm4': { city: 'Atlanta', zips: ['30318', '30313'], area: 'Blandtown' },
      'wm5': { city: 'Atlanta', zips: ['30318', '30313'], area: 'Marietta Street Artery' },
      'wm6': { city: 'Atlanta', zips: ['30318', '30314'], area: 'English Avenue' },
      'wm7': { city: 'Atlanta', zips: ['30313', '30314'], area: 'Vine City' },
      'ea1': { city: 'Atlanta', zips: ['30316', '30317'], area: 'East Atlanta Village' },
      'ea2': { city: 'Atlanta', zips: ['30316', '30315'], area: 'Ormewood Park' },
      'ea3': { city: 'Atlanta', zips: ['30317', '30316'], area: 'East Lake' },
      'ea4': { city: 'Atlanta', zips: ['30317', '30307'], area: 'Kirkwood' },
      'ea5': { city: 'Atlanta', zips: ['30307', '30312'], area: 'Edgewood' },
      'ea6': { city: 'Decatur', zips: ['30030', '30317'], area: 'Oakhurst' },
      'dc1': { city: 'Decatur', zips: ['30030'], area: 'Downtown Decatur' },
      'dc2': { city: 'Decatur', zips: ['30030', '30317'], area: 'Oakhurst' },
      'dc3': { city: 'Decatur', zips: ['30030'], area: 'Winnona Park' },
      'dc4': { city: 'Decatur', zips: ['30030'], area: 'MAK District' },
      'dc5': { city: 'Decatur', zips: ['30030', '30033'], area: 'Great Lakes' },
      'dc6': { city: 'Decatur', zips: ['30030', '30033'], area: 'Medlock Park' },
      'gp1': { city: 'Atlanta', zips: ['30312', '30315'], area: 'Grant Park' },
      'gp2': { city: 'Atlanta', zips: ['30315', '30312'], area: 'Peoplestown' },
      'gp3': { city: 'Atlanta', zips: ['30315', '30312'], area: 'Summerhill' },
      'gp4': { city: 'Atlanta', zips: ['30315', '30310'], area: 'Pittsburgh' },
      'gp5': { city: 'Atlanta', zips: ['30315', '30310'], area: 'Mechanicsville' },
      'gp6': { city: 'Atlanta', zips: ['30315', '30310'], area: 'Capitol View' },
      'gp7': { city: 'Atlanta', zips: ['30315', '30316'], area: 'Chosewood Park' }
    };

    // IDX Broker Configuration
    const IDX_CONFIG = {
      accountId: 'YOUR_IDX_ACCOUNT_ID',
      apiKey: 'YOUR_IDX_API_KEY',
      subdomain: 'yoursite',
      showcaseWidgetId: 'showcase-1',
      searchWidgetId: 'search-1',
      defaultCity: 'Atlanta',
      defaultState: 'GA',
      mlsSource: 'FMLS'
    };

    // Build IDX search URL with filters
    const buildIDXSearchUrl = (filters = {}) => {
      const baseUrl = `https://${IDX_CONFIG.subdomain}.idxbroker.com/idx/results/listings`;
      const params = new URLSearchParams();
      if (filters.city) params.append('city[]', filters.city);
      if (filters.zips && filters.zips.length > 0) {
        filters.zips.forEach(zip => params.append('zip[]', zip));
      }
      if (filters.minPrice) params.append('lp', filters.minPrice);
      if (filters.maxPrice) params.append('hp', filters.maxPrice);
      if (filters.beds) params.append('bd', filters.beds);
      if (filters.baths) params.append('ba', filters.baths);
      if (filters.propertyType) params.append('pt', filters.propertyType);
      return `${baseUrl}?${params.toString()}`;
    };

    // Get FMLS parameters for a neighborhood
    const getFMLSParams = (neighborhoodId) => {
      return neighborhoodToFMLS[neighborhoodId] || { city: 'Atlanta', zips: [], area: 'Atlanta' };
    };

    // Subscription packages
    const subscriptionPackages = {
      free: { name: 'Free', price: 0, features: ['1 listing', 'Basic visibility'] },
      starter: { name: 'Starter', price: 29, features: ['3 listings', 'Enhanced visibility', 'Basic analytics'] },
      pro: { name: 'Pro', price: 49, features: ['10 listings', 'Featured placement', 'Full analytics', 'Priority support'] },
      premium: { name: 'Premium', price: 99, features: ['Unlimited listings', 'Homepage feature', 'Dedicated support', 'Custom branding'] }
    };

    // Decline reasons
    const declineReasons = [
      { id: 'incomplete', label: 'Incomplete information', message: 'Your submission is missing required information. Please update and resubmit.' },
      { id: 'duplicate', label: 'Duplicate listing', message: 'A similar listing already exists in our directory.' },
      { id: 'inappropriate', label: 'Inappropriate content', message: 'Your submission contains content that does not meet our community guidelines.' },
      { id: 'unverified', label: 'Unable to verify business', message: 'We were unable to verify your business information. Please provide additional documentation.' },
      { id: 'outofarea', label: 'Outside service area', message: 'Your business/event is outside our Atlanta coverage area.' },
      { id: 'custom', label: 'Custom reason', message: '' }
    ];

    // Demo listings data with enhanced fields for Business Detail Page
    const demoListings = [
      {
        id: '1',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'business',
        name: 'Buttermilk Kitchen',
        featured: true,
        category: 'Restaurant',
        neighborhood: 'Buckhead',
        area: 'buckhead',
        address: '4225 Roswell Rd NE, Atlanta, GA 30342',
        phone: '(404) 555-0123',
        website: 'https://buttermilkkitchen.com',
        description: 'Farm-to-table Southern comfort food known for legendary fried chicken and buttermilk biscuits. Our chef-driven menu celebrates Georgia\'s finest ingredients, from locally-sourced produce to heritage pork. The warm, rustic atmosphere makes it perfect for both special occasions and casual weekend brunches.',
        image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800',
        status: 'approved',
        package: 'pro',
        created_at: '2026-01-20',
        reviewed_at: '2026-01-21',
        admin_notes: 'Great addition to Buckhead directory.',
        slug: 'buttermilk-kitchen',
        latitude: 33.8676,
        longitude: -84.3880,
        price_range: 2,
        claimed: true,
        hours: {
          monday: { open: '8:00 AM', close: '3:00 PM', closed: false },
          tuesday: { open: '8:00 AM', close: '3:00 PM', closed: false },
          wednesday: { open: '8:00 AM', close: '3:00 PM', closed: false },
          thursday: { open: '8:00 AM', close: '3:00 PM', closed: false },
          friday: { open: '8:00 AM', close: '3:00 PM', closed: false },
          saturday: { open: '8:00 AM', close: '4:00 PM', closed: false },
          sunday: { open: '8:00 AM', close: '4:00 PM', closed: false }
        },
        amenities: ['WiFi', 'Outdoor Seating', 'Parking', 'Wheelchair Accessible', 'Reservations', 'Takeout'],
        social: {
          instagram: 'https://instagram.com/buttermilkkitchen',
          facebook: 'https://facebook.com/buttermilkkitchen',
          twitter: 'https://twitter.com/buttermilkatl'
        },
        photos: [
          'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800',
          'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
          'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800',
          'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800',
          'https://images.unsplash.com/photo-1476224203421-9ac39bcb3327?w=800',
          'https://images.unsplash.com/photo-1432139555190-58524dae6a55?w=800'
        ],
        video_url: '',
        rating: { average: 4.6, count: 234, breakdown: { 5: 156, 4: 52, 3: 18, 2: 5, 1: 3 } },
        reviews: [
          { id: 'r1', author_name: 'Sarah M.', rating: 5, text: 'Best brunch in Atlanta! The fried chicken is absolutely incredible and the biscuits melt in your mouth.', date: '2026-01-15', helpful_count: 24 },
          { id: 'r2', author_name: 'James T.', rating: 5, text: 'Finally found my go-to brunch spot. Farm-fresh ingredients really make a difference.', date: '2026-01-10', helpful_count: 18 },
          { id: 'r3', author_name: 'Michelle K.', rating: 4, text: 'Great food but expect a wait on weekends. Pro tip: arrive early or try a weekday.', date: '2026-01-05', helpful_count: 31 },
          { id: 'r4', author_name: 'David R.', rating: 5, text: 'This place embodies Southern hospitality. Staff is friendly, food is phenomenal.', date: '2025-12-28', helpful_count: 12 },
          { id: 'r5', author_name: 'Lisa P.', rating: 4, text: 'Delicious food in a cozy setting. The buttermilk pancakes are fluffy perfection.', date: '2025-12-20', helpful_count: 9 }
        ],
        related_story_ids: ['blog-2', 'blog-eats-1']
      },
      {
        id: '2',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'business',
        name: 'Vibe Coffee Roasters',
        featured: false,
        category: 'Caf',
        neighborhood: 'Midtown',
        area: 'midtown',
        address: '123 Peachtree St, Atlanta, GA 30308',
        phone: '(404) 555-0456',
        website: '',
        description: 'Specialty coffee and pastries in the heart of Midtown. Locally roasted beans and house-made baked goods.',
        image: 'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800',
        status: 'pending',
        package: 'starter',
        created_at: '2026-01-25',
        admin_notes: '',
        slug: 'vibe-coffee-roasters',
        latitude: 33.7816,
        longitude: -84.3833,
        price_range: 1,
        claimed: true,
        hours: {
          monday: { open: '6:30 AM', close: '6:00 PM', closed: false },
          tuesday: { open: '6:30 AM', close: '6:00 PM', closed: false },
          wednesday: { open: '6:30 AM', close: '6:00 PM', closed: false },
          thursday: { open: '6:30 AM', close: '6:00 PM', closed: false },
          friday: { open: '6:30 AM', close: '7:00 PM', closed: false },
          saturday: { open: '7:00 AM', close: '7:00 PM', closed: false },
          sunday: { open: '8:00 AM', close: '5:00 PM', closed: false }
        },
        amenities: ['WiFi', 'Outdoor Seating', 'Power Outlets', 'Laptop Friendly', 'Vegan Options', 'Pour Over'],
        social: { instagram: 'https://instagram.com/vibecoffeeatl' },
        photos: [
          'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800',
          'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=800',
          'https://images.unsplash.com/photo-1442512595331-e89e73853f31?w=800'
        ],
        video_url: '',
        rating: { average: 4.3, count: 89, breakdown: { 5: 45, 4: 28, 3: 12, 2: 3, 1: 1 } },
        reviews: [
          { id: 'r6', author_name: 'Chris B.', rating: 5, text: 'Perfect spot for remote work. Great coffee, fast WiFi, and the staff never rushes you out.', date: '2026-01-20', helpful_count: 15 },
          { id: 'r7', author_name: 'Amanda L.', rating: 4, text: 'Love the single-origin options. The pastries are solid too.', date: '2026-01-18', helpful_count: 8 },
          { id: 'r8', author_name: 'Tyler W.', rating: 4, text: 'My new morning ritual. The baristas really know their stuff.', date: '2026-01-12', helpful_count: 6 }
        ],
        related_story_ids: []
      },
      {
        id: '3',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'event',
        name: 'Jazz in the Park',
        category: 'Music',
        neighborhood: 'Piedmont Park',
        date: '2026-02-15',
        start_time: '6:00 PM',
        end_time: '9:00 PM',
        recurring_pattern: 'weekly',
        recurring_end_date: '2026-04-30',
        venue_name: 'Piedmont Park - Oak Hill',
        venue_address: '400 Park Dr NE, Atlanta, GA 30306',
        organizer_name: 'Atlanta Parks Foundation',
        organizer_email: 'events@atlantaparks.org',
        organizer_phone: '(404) 875-7275',
        description: 'Free outdoor jazz concert featuring local artists. Bring your blankets and picnic baskets for an evening of smooth jazz under the stars. Food trucks and beverages available on site.',
        image: 'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=800',
          'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800'
        ],
        tags: ['outdoor', 'family-friendly', 'free', 'live-music'],
        ticket_url: null,
        rsvp_url: 'https://atlantaparks.org/jazz-rsvp',
        ticket_price: 'Free',
        featured: false,
        area_id: 'midtown',
        status: 'approved',
        package: 'free',
        created_at: '2026-01-22',
        reviewed_at: '2026-01-22',
        admin_notes: ''
      },
      {
        id: '4',
        user_id: '3',
        user_email: 'newbiz@example.com',
        user_name: 'Sarah Johnson',
        type: 'business',
        name: 'Atlanta Fitness Studio',
        featured: false,
        category: 'Fitness',
        neighborhood: 'West Midtown',
        area: 'westMidtown',
        address: '456 Howell Mill Rd, Atlanta, GA 30318',
        phone: '(404) 555-0789',
        website: 'https://atlfitness.com',
        description: 'Boutique fitness studio offering yoga, HIIT, and strength training classes.',
        image: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800',
        status: 'pending',
        package: 'pro',
        created_at: '2026-01-26',
        admin_notes: '',
        slug: 'atlanta-fitness-studio',
        latitude: 33.7925,
        longitude: -84.4119,
        price_range: 2,
        claimed: true,
        hours: {
          monday: { open: '5:30 AM', close: '9:00 PM', closed: false },
          tuesday: { open: '5:30 AM', close: '9:00 PM', closed: false },
          wednesday: { open: '5:30 AM', close: '9:00 PM', closed: false },
          thursday: { open: '5:30 AM', close: '9:00 PM', closed: false },
          friday: { open: '5:30 AM', close: '8:00 PM', closed: false },
          saturday: { open: '7:00 AM', close: '5:00 PM', closed: false },
          sunday: { open: '8:00 AM', close: '3:00 PM', closed: false }
        },
        amenities: ['Parking', 'Showers', 'Lockers', 'Personal Training', 'Group Classes', 'Yoga Studio'],
        social: { instagram: 'https://instagram.com/atlfitnessstudio', facebook: 'https://facebook.com/atlfitnessstudio' },
        photos: [
          'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800',
          'https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=800',
          'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=800',
          'https://images.unsplash.com/photo-1574680096145-d05b474e2155?w=800',
          'https://images.unsplash.com/photo-1540497077202-7c8a3999166f?w=800',
          'https://images.unsplash.com/photo-1593079831268-3381b0db4a77?w=800'
        ],
        video_url: '',
        rating: { average: 4.8, count: 156, breakdown: { 5: 120, 4: 28, 3: 6, 2: 1, 1: 1 } },
        reviews: [
          { id: 'r9', author_name: 'Jennifer H.', rating: 5, text: 'Best gym in Atlanta!', date: '2026-01-22', helpful_count: 22 },
          { id: 'r10', author_name: 'Mark D.', rating: 5, text: 'Clean facilities.', date: '2026-01-19', helpful_count: 14 }
        ],
        related_story_ids: []
      },
      {
        id: '5',
        user_id: '4',
        user_email: 'events@example.com',
        user_name: 'Marcus Williams',
        type: 'event',
        name: 'Westside Food Festival',
        category: 'Food & Drink',
        neighborhood: 'West Midtown',
        date: '2026-03-20',
        start_time: '11:00 AM',
        end_time: '8:00 PM',
        recurring_pattern: null,
        recurring_end_date: null,
        venue_name: 'Westside Provisions District',
        venue_address: '1198 Howell Mill Rd NW, Atlanta, GA 30318',
        organizer_name: 'ATL Food Collective',
        organizer_email: 'info@atlfoodcollective.com',
        organizer_phone: '(404) 555-0321',
        description: 'Annual celebration of Atlanta\'s diverse food scene with 50+ local vendors, live cooking demonstrations, celebrity chef appearances, and family activities. VIP tickets include exclusive tastings and early entry.',
        image: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800',
          'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800',
          'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=800'
        ],
        tags: ['food', 'festival', 'family-friendly', 'vendors'],
        ticket_url: 'https://atlfoodfest.com/tickets',
        rsvp_url: null,
        ticket_price: '$25 - $75',
        featured: true,
        area_id: 'westside',
        status: 'approved',
        package: 'premium',
        created_at: '2026-01-27',
        admin_notes: ''
      },
      {
        id: '6',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'business',
        name: 'The Optimist',
        featured: true,
        category: 'Restaurant',
        neighborhood: 'West Midtown',
        area: 'westMidtown',
        address: '914 Howell Mill Rd NW, Atlanta, GA 30318',
        phone: '(404) 477-6260',
        website: 'https://theoptimistrestaurant.com',
        description: 'Acclaimed seafood restaurant with raw bar and wood-fired dishes. Features one of Atlanta\'s most coveted patios.',
        image: 'https://images.unsplash.com/photo-1559339352-11d035aa65de?w=800',
        status: 'approved',
        package: 'premium',
        created_at: '2026-01-15',
        reviewed_at: '2026-01-16',
        admin_notes: 'Featured restaurant.',
        slug: 'the-optimist',
        latitude: 33.7899,
        longitude: -84.4134,
        price_range: 3,
        claimed: true,
        hours: {
          monday: { open: '5:00 PM', close: '10:00 PM', closed: false },
          tuesday: { open: '5:00 PM', close: '10:00 PM', closed: false },
          wednesday: { open: '5:00 PM', close: '10:00 PM', closed: false },
          thursday: { open: '5:00 PM', close: '10:00 PM', closed: false },
          friday: { open: '5:00 PM', close: '11:00 PM', closed: false },
          saturday: { open: '11:00 AM', close: '11:00 PM', closed: false },
          sunday: { open: '11:00 AM', close: '9:00 PM', closed: false }
        },
        amenities: ['Outdoor Seating', 'Full Bar', 'Raw Bar', 'Reservations', 'Private Dining', 'Valet Parking', 'Wheelchair Accessible', 'Happy Hour', 'Gluten-Free Options', 'Sustainable Seafood'],
        social: { instagram: 'https://instagram.com/theoptimistrestaurant', facebook: 'https://facebook.com/theoptimist', twitter: 'https://twitter.com/optimistatl' },
        photos: [
          'https://images.unsplash.com/photo-1559339352-11d035aa65de?w=800',
          'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800',
          'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800',
          'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
          'https://images.unsplash.com/photo-1544148103-0773bf10d330?w=800',
          'https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=800',
          'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=800',
          'https://images.unsplash.com/photo-1515003197210-e0cd71810b5f?w=800',
          'https://images.unsplash.com/photo-1534604973900-c43ab4c2e0ab?w=800',
          'https://images.unsplash.com/photo-1559339352-11d035aa65de?w=800'
        ],
        video_url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
        rating: { average: 4.7, count: 512, breakdown: { 5: 358, 4: 108, 3: 32, 2: 10, 1: 4 } },
        reviews: [
          { id: 'r12', author_name: 'Katherine W.', rating: 5, text: 'Phenomenal! Fresh oysters and unmatched patio.', date: '2026-01-14', helpful_count: 67 },
          { id: 'r13', author_name: 'Robert M.', rating: 5, text: 'Fine dining without pretense.', date: '2026-01-12', helpful_count: 45 },
          { id: 'r14', author_name: 'Emily C.', rating: 4, text: 'Beautiful space, excellent food.', date: '2026-01-10', helpful_count: 38 },
          { id: 'r15', author_name: 'Daniel P.', rating: 5, text: 'Magical anniversary celebration.', date: '2026-01-08', helpful_count: 29 },
          { id: 'r16', author_name: 'Sophia L.', rating: 5, text: 'Best seafood in Atlanta.', date: '2026-01-05', helpful_count: 52 }
        ],
        related_story_ids: ['blog-eats-1', 'blog-2']
      },
      {
        id: '7',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'business',
        name: 'Victory Sandwich Bar',
        featured: true,
        category: 'Bar',
        neighborhood: 'Inman Park',
        area: 'inmanPark',
        address: '913 Bernina Ave NE, Atlanta, GA 30307',
        phone: '(404) 477-6815',
        website: 'https://vfrombklyn.com',
        description: 'Neighborhood bar known for creative sandwiches, craft cocktails, and sidewalk seating perfect for people-watching.',
        image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800',
        status: 'approved',
        package: 'pro',
        created_at: '2026-01-18',
        reviewed_at: '2026-01-19',
        admin_notes: '',
        slug: 'victory-sandwich-bar',
        latitude: 33.7614,
        longitude: -84.3523,
        price_range: 2,
        claimed: true,
        hours: {
          monday: { open: '11:00 AM', close: '12:00 AM', closed: false },
          tuesday: { open: '11:00 AM', close: '12:00 AM', closed: false },
          wednesday: { open: '11:00 AM', close: '12:00 AM', closed: false },
          thursday: { open: '11:00 AM', close: '12:00 AM', closed: false },
          friday: { open: '11:00 AM', close: '2:00 AM', closed: false },
          saturday: { open: '11:00 AM', close: '2:00 AM', closed: false },
          sunday: { open: '11:00 AM', close: '12:00 AM', closed: false }
        },
        amenities: ['Outdoor Seating', 'Full Bar', 'Late Night', 'Dog Friendly Patio', 'Craft Beer', 'Vegetarian Options'],
        social: { instagram: 'https://instagram.com/victorysandwichbar', facebook: 'https://facebook.com/victorysandwichbar' },
        photos: [
          'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800',
          'https://images.unsplash.com/photo-1481833761820-0509d3217039?w=800',
          'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800',
          'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=800',
          'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=800',
          'https://images.unsplash.com/photo-1561758033-d89a9ad46330?w=800'
        ],
        video_url: '',
        rating: { average: 4.5, count: 287, breakdown: { 5: 168, 4: 82, 3: 28, 2: 6, 1: 3 } },
        reviews: [
          { id: 'r19', author_name: 'Alex K.', rating: 5, text: 'The Notorious BLT is life-changing. Great cocktails.', date: '2026-01-17', helpful_count: 34 },
          { id: 'r20', author_name: 'Jessica M.', rating: 4, text: 'Love the patio and creative sandwiches.', date: '2026-01-14', helpful_count: 19 },
          { id: 'r21', author_name: 'Tom R.', rating: 5, text: 'Captures everything great about Inman Park.', date: '2026-01-10', helpful_count: 27 },
          { id: 'r22', author_name: 'Maria S.', rating: 5, text: 'Best sandwiches in Atlanta!', date: '2026-01-05', helpful_count: 15 },
          { id: 'r23', author_name: 'Kevin L.', rating: 4, text: 'Great food, great drinks, great people-watching.', date: '2025-12-28', helpful_count: 11 }
        ],
        related_story_ids: ['blog-4', 'blog-3']
      },
      {
        id: '8',
        user_id: '3',
        user_email: 'newbiz@example.com',
        user_name: 'Sarah Johnson',
        type: 'event',
        name: 'Atlanta Wine Walk',
        category: 'Food & Drink',
        neighborhood: 'Virginia-Highland',
        date: '2026-02-28',
        start_time: '5:00 PM',
        end_time: '9:00 PM',
        recurring_pattern: null,
        recurring_end_date: null,
        venue_name: 'Virginia-Highland Village',
        venue_address: '1045 N Highland Ave NE, Atlanta, GA 30306',
        organizer_name: 'VaHi Business Association',
        organizer_email: 'events@vahivillage.com',
        organizer_phone: '(404) 555-0456',
        description: 'Explore Virginia-Highland\'s best wine bars and restaurants on this guided tasting tour featuring natural wines. Ticket includes tastings at 6 venues, commemorative glass, and a tasting map.',
        image: 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=800',
          'https://images.unsplash.com/photo-1558001373-7b93ee48ffa0?w=800'
        ],
        tags: ['wine', 'tasting', 'evening', 'walking-tour'],
        ticket_url: 'https://vahiwinewalk.com/tickets',
        rsvp_url: null,
        ticket_price: '$45',
        featured: false,
        area_id: 'eastside',
        status: 'approved',
        package: 'pro',
        created_at: '2026-01-20',
        reviewed_at: '2026-01-21',
        admin_notes: ''
      },
      {
        id: '9',
        user_id: '4',
        user_email: 'events@example.com',
        user_name: 'Marcus Williams',
        type: 'event',
        name: 'Coffee & Culture Morning',
        category: 'Food & Drink',
        neighborhood: 'East Atlanta',
        date: '2026-02-14',
        start_time: '9:00 AM',
        end_time: '12:00 PM',
        recurring_pattern: null,
        recurring_end_date: null,
        venue_name: 'East Pole Coffee Co.',
        venue_address: '1033 Glenwood Ave SE, Atlanta, GA 30316',
        organizer_name: 'East Atlanta Village Collective',
        organizer_email: 'hello@eavcollective.com',
        organizer_phone: '(404) 555-0789',
        description: 'Start your day with specialty coffee tastings and local art at East Pole Coffee, featuring live acoustic music. Local artists will showcase their work and coffee experts will guide tastings.',
        image: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=800',
        gallery_images: [],
        tags: ['coffee', 'art', 'morning', 'live-music'],
        ticket_url: null,
        rsvp_url: 'https://eavcollective.com/coffee-culture',
        ticket_price: 'Free',
        featured: false,
        area_id: 'southeast',
        status: 'approved',
        package: 'starter',
        created_at: '2026-01-22',
        reviewed_at: '2026-01-23',
        admin_notes: ''
      },
      // Additional neighborhood-specific listings
      {
        id: '10',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'business',
        name: 'Buckhead Village Bistro',
        category: 'Restaurant',
        neighborhood: 'Buckhead Village',
        address: '3060 Peachtree Rd NW',
        phone: '(404) 555-0201',
        website: 'https://buckheadvillagebistro.com',
        description: 'Upscale French-American cuisine in the heart of Buckhead Village. Perfect for special occasions.',
        image: 'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800',
        status: 'approved',
        package: 'premium',
        featured: true,
        created_at: '2026-01-15',
        reviewed_at: '2026-01-16',
        admin_notes: ''
      },
      {
        id: '11',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'business',
        name: 'Inman Park Yoga Studio',
        category: 'Fitness',
        neighborhood: 'Inman Park',
        address: '889 Euclid Ave NE',
        phone: '(404) 555-0202',
        website: 'https://inmanparkyoga.com',
        description: 'Mindful yoga and meditation classes in a beautifully restored Victorian home.',
        image: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=800',
        status: 'approved',
        package: 'pro',
        featured: true,
        created_at: '2026-01-16',
        reviewed_at: '2026-01-17',
        admin_notes: ''
      },
      {
        id: '12',
        user_id: '3',
        user_email: 'newbiz@example.com',
        user_name: 'Sarah Johnson',
        type: 'business',
        name: 'Old Fourth Ward Brewery',
        featured: true,
        category: 'Bar',
        neighborhood: 'Old Fourth Ward',
        address: '487 Edgewood Ave SE',
        phone: '(404) 555-0203',
        website: 'https://o4wbrewery.com',
        description: 'Craft brewery with rotating taps and a BeltLine-adjacent beer garden.',
        image: 'https://images.unsplash.com/photo-1559526642-c3f001ea68ee?w=800',
        status: 'approved',
        package: 'pro',
        featured: true,
        created_at: '2026-01-17',
        reviewed_at: '2026-01-18',
        admin_notes: ''
      },
      {
        id: '13',
        user_id: '4',
        user_email: 'events@example.com',
        user_name: 'Marcus Williams',
        type: 'event',
        name: 'Inman Park Festival',
        category: 'Festival',
        neighborhood: 'Inman Park',
        date: '2026-04-25',
        start_time: '10:00 AM',
        end_time: '6:00 PM',
        recurring_pattern: 'annual',
        recurring_end_date: null,
        venue_name: 'Inman Park Neighborhood',
        venue_address: 'Euclid Ave NE & Elizabeth St, Atlanta, GA 30307',
        organizer_name: 'Inman Park Neighborhood Association',
        organizer_email: 'festival@inmanpark.org',
        organizer_phone: '(404) 555-0213',
        description: 'Annual neighborhood festival featuring live music, local artists, a parade, and the famous Tour of Homes. Includes street performers, food vendors, craft beer garden, and activities for all ages.',
        image: 'https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1506157786151-b8491531f063?w=800',
          'https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=800',
          'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800'
        ],
        tags: ['festival', 'outdoor', 'family-friendly', 'parade', 'art'],
        ticket_url: null,
        rsvp_url: null,
        ticket_price: 'Free (Tour of Homes: $20)',
        featured: true,
        area_id: 'eastside',
        status: 'approved',
        package: 'premium',
        created_at: '2026-01-10',
        reviewed_at: '2026-01-11',
        admin_notes: ''
      },
      {
        id: '14',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'business',
        name: 'Little Five Points Records',
        category: 'Shopping',
        neighborhood: 'Little Five Points',
        address: '1065 Euclid Ave NE',
        phone: '(404) 555-0204',
        website: 'https://l5precords.com',
        description: 'Vintage vinyl, rare finds, and local music in Atlanta\'s alternative culture hub.',
        image: 'https://images.unsplash.com/photo-1483412033650-1015ddeb83d1?w=800',
        status: 'approved',
        package: 'starter',
        created_at: '2026-01-18',
        reviewed_at: '2026-01-19',
        admin_notes: ''
      },
      {
        id: '15',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'business',
        name: 'Downtown Decatur Bookshop',
        category: 'Shopping',
        neighborhood: 'Downtown Decatur',
        address: '120 E Ponce de Leon Ave',
        phone: '(404) 555-0205',
        website: 'https://decaturbookshop.com',
        description: 'Independent bookstore hosting author events and book clubs since 1989.',
        image: 'https://images.unsplash.com/photo-1507842217343-583bb7270b66?w=800',
        status: 'approved',
        package: 'pro',
        featured: true,
        created_at: '2026-01-19',
        reviewed_at: '2026-01-20',
        admin_notes: ''
      },
      {
        id: '16',
        user_id: '3',
        user_email: 'newbiz@example.com',
        user_name: 'Sarah Johnson',
        type: 'event',
        name: 'Grant Park Summer Shade Festival',
        category: 'Festival',
        neighborhood: 'Grant Park',
        date: '2026-08-22',
        start_time: '10:00 AM',
        end_time: '7:00 PM',
        recurring_pattern: 'annual',
        recurring_end_date: null,
        venue_name: 'Grant Park',
        venue_address: '840 Cherokee Ave SE, Atlanta, GA 30315',
        organizer_name: 'Grant Park Conservancy',
        organizer_email: 'shade@grantpark.org',
        organizer_phone: '(404) 555-0216',
        description: 'Two-day arts festival with 200+ artists, live music stages, kids area, and food vendors. One of Atlanta\'s most beloved summer traditions celebrating art, community, and the beautiful Grant Park neighborhood.',
        image: 'https://images.unsplash.com/photo-1472653431158-6364773b2a56?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=800',
          'https://images.unsplash.com/photo-1478147427282-58a87a120781?w=800'
        ],
        tags: ['festival', 'art', 'family-friendly', 'outdoor', 'summer'],
        ticket_url: null,
        rsvp_url: null,
        ticket_price: 'Free',
        featured: true,
        area_id: 'southeast',
        status: 'approved',
        package: 'pro',
        created_at: '2026-01-20',
        reviewed_at: '2026-01-21',
        admin_notes: ''
      },
      {
        id: '17',
        user_id: '4',
        user_email: 'events@example.com',
        user_name: 'Marcus Williams',
        type: 'business',
        name: 'East Atlanta Village Diner',
        featured: true,
        category: 'Restaurant',
        neighborhood: 'East Atlanta Village',
        address: '1224 Flat Shoals Ave SE',
        phone: '(404) 555-0206',
        website: 'https://eavdiner.com',
        description: 'Classic diner fare with a twist, open late for the neighborhood\'s night owls.',
        image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
        status: 'approved',
        package: 'starter',
        created_at: '2026-01-21',
        reviewed_at: '2026-01-22',
        admin_notes: ''
      },
      {
        id: '18',
        user_id: '1',
        user_email: 'demo@atlvibes.com',
        user_name: 'Demo User',
        type: 'business',
        name: 'Midtown Core Gallery',
        category: 'Art Gallery',
        neighborhood: 'Midtown Core',
        address: '75 14th St NE',
        phone: '(404) 555-0207',
        website: 'https://midtowncoregallery.com',
        description: 'Contemporary art gallery showcasing emerging Southern artists.',
        image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800',
        status: 'approved',
        package: 'pro',
        featured: true,
        created_at: '2026-01-22',
        reviewed_at: '2026-01-23',
        admin_notes: ''
      },
      {
        id: '19',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'event',
        name: 'BeltLine Lantern Parade',
        category: 'Community Event',
        neighborhood: 'Old Fourth Ward',
        date: '2026-09-12',
        start_time: '7:00 PM',
        end_time: '10:00 PM',
        recurring_pattern: 'annual',
        recurring_end_date: null,
        venue_name: 'Atlanta BeltLine Eastside Trail',
        venue_address: 'Irwin St NE & Krog St, Atlanta, GA 30312',
        organizer_name: 'Atlanta BeltLine Partnership',
        organizer_email: 'lanterns@beltline.org',
        organizer_phone: '(404) 446-4400',
        description: 'Annual nighttime parade along the Eastside Trail featuring thousands of handmade lanterns. Join the community in this magical celebration of light, creativity, and the Atlanta BeltLine. Free lantern-making workshops available in the weeks leading up to the event.',
        image: 'https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?w=800',
          'https://images.unsplash.com/photo-1516912481808-3406841bd33c?w=800'
        ],
        tags: ['parade', 'community', 'nighttime', 'family-friendly', 'free'],
        ticket_url: null,
        rsvp_url: 'https://beltline.org/lantern-parade',
        ticket_price: 'Free',
        featured: true,
        area_id: 'eastside',
        status: 'approved',
        package: 'premium',
        created_at: '2026-01-23',
        reviewed_at: '2026-01-24',
        admin_notes: ''
      },
      {
        id: '20',
        user_id: '3',
        user_email: 'newbiz@example.com',
        user_name: 'Sarah Johnson',
        type: 'business',
        name: 'Cabbagetown Cafe',
        category: 'Caf',
        neighborhood: 'Cabbagetown',
        address: '198 Carroll St SE',
        phone: '(404) 555-0208',
        website: 'https://cabbagetowncafe.com',
        description: 'Cozy neighborhood cafe serving locally roasted coffee and fresh pastries.',
        image: 'https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800',
        status: 'approved',
        package: 'starter',
        created_at: '2026-01-24',
        reviewed_at: '2026-01-25',
        admin_notes: ''
      },
      // Past event for testing
      {
        id: '21',
        user_id: '2',
        user_email: 'admin@atlvibes.com',
        user_name: 'Admin',
        type: 'event',
        name: 'New Year\'s Eve on Peachtree',
        category: 'Community Event',
        neighborhood: 'Downtown',
        date: '2025-12-31',
        start_time: '10:00 PM',
        end_time: '12:30 AM',
        recurring_pattern: 'annual',
        recurring_end_date: null,
        venue_name: 'Underground Atlanta',
        venue_address: '50 Upper Alabama St SW, Atlanta, GA 30303',
        organizer_name: 'City of Atlanta',
        organizer_email: 'events@atlanta.gov',
        organizer_phone: '(404) 330-6000',
        description: 'Atlanta\'s biggest New Year\'s Eve celebration featuring the Peach Drop, live performances, and fireworks over downtown. This year marked the return of the iconic Peach Drop tradition.',
        image: 'https://images.unsplash.com/photo-1467810563316-b5476525c0f9?w=800',
        gallery_images: [
          'https://images.unsplash.com/photo-1482517967863-00e15c9b44be?w=800',
          'https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=800'
        ],
        tags: ['new-years', 'downtown', 'fireworks', 'celebration', 'free'],
        ticket_url: null,
        rsvp_url: null,
        ticket_price: 'Free',
        featured: false,
        area_id: 'downtown',
        status: 'approved',
        package: 'premium',
        created_at: '2025-12-01',
        reviewed_at: '2025-12-02',
        admin_notes: ''
      },
      // Free tier business for testing tier visibility
      {
        id: '100',
        user_id: '5',
        user_email: 'freebiz@example.com',
        user_name: 'Free Business Owner',
        type: 'business',
        name: 'Ponce City Market Food Hall',
        category: 'Food Hall',
        neighborhood: 'Old Fourth Ward',
        area: 'oldFourthWard',
        address: '675 Ponce De Leon Ave NE, Atlanta, GA 30308',
        phone: '(404) 900-7900',
        website: 'https://poncecitymarket.com',
        description: 'Atlanta\'s premier food hall featuring over 20 local vendors, rooftop entertainment, and the city\'s best views from Skyline Park.',
        image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
        status: 'approved',
        package: 'free',
        created_at: '2026-01-10',
        reviewed_at: '2026-01-11',
        admin_notes: '',
        slug: 'ponce-city-market',
        latitude: 33.7724,
        longitude: -84.3654,
        price_range: 2,
        claimed: false,
        hours: {
          monday: { open: '10:00 AM', close: '9:00 PM', closed: false },
          tuesday: { open: '10:00 AM', close: '9:00 PM', closed: false },
          wednesday: { open: '10:00 AM', close: '9:00 PM', closed: false },
          thursday: { open: '10:00 AM', close: '9:00 PM', closed: false },
          friday: { open: '10:00 AM', close: '10:00 PM', closed: false },
          saturday: { open: '10:00 AM', close: '10:00 PM', closed: false },
          sunday: { open: '11:00 AM', close: '8:00 PM', closed: false }
        },
        amenities: ['Parking', 'Wheelchair Accessible', 'Family Friendly'],
        social: {},
        photos: ['https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800'],
        video_url: '',
        rating: { average: 4.2, count: 45, breakdown: { 5: 20, 4: 15, 3: 7, 2: 2, 1: 1 } },
        reviews: [],
        related_story_ids: ['blog-1']
      }
    ];

    // Demo blog posts data
    const demoBlogPosts = [
      {
        id: 'blog-1',
        title: 'The Renaissance of Old Fourth Ward',
        category: 'Culture',
        author: 'Marcus Johnson',
        author_bio: 'Marcus is a lifelong Atlanta resident and culture journalist covering the city\'s vibrant neighborhoods.',
        created_at: '2026-01-27',
        excerpt: 'How the BeltLine transformed one of Atlanta\'s most historic neighborhoods into a thriving cultural hub.',
        content: `Old Fourth Ward has undergone a remarkable transformation over the past decade. Once a struggling neighborhood, it's now one of Atlanta's most sought-after areas, thanks largely to the Atlanta BeltLine.

The BeltLine, a former railway corridor turned multi-use trail, has become the spine of the neighborhood's revival. Art installations dot the pathway, and Ponce City Markethoused in a historic Sears buildinghas become a destination for food lovers and shoppers alike.

But beyond the development, O4W maintains its historic character. The Martin Luther King Jr. National Historic Site preserves the civil rights leader's birthplace and early life. Sweet Auburn, the historic Black business district, continues to evolve while honoring its legacy.

Local businesses thrive here: Sister Louisa's Church of the Living Room and Ping Pong Emporium offers irreverent Southern hospitality, while Staplehouse serves award-winning cuisine with a mission to support the community.

The neighborhood exemplifies Atlanta's ability to honor its past while embracing the futurea delicate balance that makes O4W a model for urban renewal done right.`,
        image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1600',
        video_url: '',
        featured: true,
        status: 'published',
        areaTag: 'oldFourthWard',
        areaTags: ['oldFourthWard', 'downtown']
      },
      {
        id: 'blog-2',
        title: 'Atlanta\'s Best Kept Secret Brunch Spots',
        category: 'Food Scene',
        author: 'Sarah Chen',
        author_bio: 'Sarah is a food writer and restaurant critic who has covered Atlanta\'s dining scene for over a decade.',
        created_at: '2026-01-25',
        excerpt: 'Skip the crowded hotspots and discover these hidden gems serving up incredible weekend brunch.',
        content: `Everyone knows about Flying Biscuit and West Egg, but Atlanta's brunch scene runs much deeper than the usual suspects. Here are some spots that locals love but tourists rarely find.

**Home Grown** in Reynoldstown serves Southern comfort food in a cozy setting. Their fried chicken and waffles are legendary, but the shrimp and grits rival any in the city.

**Ria's Bluebird** in Grant Park operates out of a converted gas station and serves some of the best pancakes you'll ever taste. Get there earlythe wait can be brutal but worth every minute.

**Folk Art** in Inman Park combines artistic presentation with bold flavors. Their shakshuka is a standout, and the avocado toast is elevated without being pretentious.

For something different, try **Revival** on Decatur Square. Chef Kevin Gillespie brings fine-dining technique to Southern classics, creating dishes that are both familiar and surprising.

Don't overlook **Java Jive** in Poncey-Highland for a no-frills diner experience with phenomenal coffee and eggs cooked exactly how you want them.`,
        image: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1600',
        video_url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
        featured: true,
        status: 'published',
        areaTag: 'inmanPark',
        areaTags: ['inmanPark', 'grantPark', 'decatur', 'oldFourthWard']
      },
      {
        id: 'blog-3',
        title: 'Inside Atlanta\'s Thriving Street Art Scene',
        category: 'Art',
        author: 'Jordan Williams',
        author_bio: 'Jordan is an art curator and street art enthusiast documenting Atlanta\'s urban canvas.',
        created_at: '2026-01-22',
        excerpt: 'From Cabbagetown to Castleberry Hill, Atlanta\'s walls tell stories of creativity and community.',
        content: `Atlanta has quietly become one of America's most vibrant street art cities. From commissioned murals to guerrilla installations, art covers the city's walls and transforms everyday spaces into outdoor galleries.

The Krog Street Tunnel is perhaps the most famous canvasa constantly evolving graffiti gallery that has become an Instagram staple. But the tunnel is just the beginning.

Cabbagetown's streets are lined with murals, including the iconic "Love" mural by Sever and the haunting works near Oakland Cemetery. The neighborhood has embraced its artistic identity, with new pieces appearing regularly.

The Atlanta BeltLine commissioned major works as part of its development, bringing large-scale installations to the Eastside Trail. These pieces range from abstract geometrics to photo-realistic portraits celebrating Atlanta's diverse communities.

In West Midtown, the warehouses of the Westside Cultural Arts Center showcase both established and emerging artists. The area hosts regular art walks that draw crowds from across the metro area.

Living Walls, an annual street art conference, has brought internationally renowned artists to Atlanta since 2009, leaving behind permanent installations throughout the city.`,
        image: 'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=1600',
        video_url: '',
        featured: false,
        status: 'published',
        areaTag: 'inmanPark',
        areaTags: ['inmanPark', 'westMidtown', 'downtown']
      },
      {
        id: 'blog-4',
        title: 'A Guide to Atlanta\'s Speakeasy Scene',
        category: 'Nightlife',
        author: 'Alex Rivera',
        author_bio: 'Alex covers Atlanta\'s bar and nightlife scene, seeking out the city\'s most creative cocktail programs.',
        created_at: '2026-01-20',
        excerpt: 'Behind unmarked doors and hidden passages, Atlanta\'s best cocktail bars await discovery.',
        content: `The speakeasy trend may have peaked nationally, but Atlanta continues to embrace the hidden bar concept with venues that prioritize craft cocktails and intimate atmospheres.

**Red Phone Booth** in Downtown requires a phone number password to enter through an actual British phone booth. Inside, velvet couches and expert bartenders create a Prohibition-era atmosphere with modern cocktail expertise.

**Prohibition** in Buckhead lives up to its name with a secret entrance and a menu of classic and creative cocktails. The bartenders here take their craft seriouslyexpect perfectly balanced drinks every time.

**Eleanor's** in West Midtown hides behind a cafe front, revealing a moody space with serious cocktails. Their house-infused spirits add unique twists to familiar recipes.

In East Atlanta, **The Basement** at Argosy offers a more casual speakeasy experience. The cocktails are creative and the vibe is neighborhood-friendly.

For the full hidden bar experience, **Himitsu** in Inman Park requires reservations and some detective work to find the entrance. The intimate space seats only a handful of guests, ensuring personalized attention to your drinks.`,
        image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=1600',
        video_url: 'https://vimeo.com/123456789',
        featured: true,
        status: 'published',
        areaTag: 'buckhead',
        areaTags: ['buckhead', 'downtown', 'westMidtown', 'eastAtlanta', 'inmanPark']
      },
      {
        id: 'blog-eats-1',
        title: 'Atlanta\'s Best New Restaurant Openings of 2026',
        category: 'Eats & Drinks',
        author: 'Sarah Chen',
        author_bio: 'Sarah is a food writer and restaurant critic who has covered Atlanta\'s dining scene for over a decade.',
        created_at: '2026-01-26',
        excerpt: 'From innovative tasting menus to neighborhood gems, these are the restaurants defining Atlanta\'s culinary moment.',
        content: `Atlanta's dining scene continues to evolve at a remarkable pace. Here are the new restaurants that have already made their mark in 2026.

**Ember & Oak** in West Midtown brings wood-fired cooking to new heights. Chef Maria Santos combines her Latin American heritage with local Georgia ingredients, creating dishes like peach-glazed pork shoulder and charred okra with chimichurri.

**Noodle Theory** in Decatur is the passion project of Chef David Park, offering a rotating menu of hand-pulled noodles and small plates inspired by his travels across Asia. The dan dan noodles are already legendary.

**The Garden Room** at Ponce City Market transforms brunch with its botanical aesthetic and plant-forward menu. Even committed carnivores leave impressed by the mushroom Benedict and sweet potato hash.

**Coastal** in Buckhead finally gives Atlanta a serious raw bar and seafood destination. The oyster selection rivals anything you'd find on the actual coast, and the lobster roll is worth the splurge.

For something casual but exceptional, **Taco Libre** in East Atlanta Village serves some of the best tacos the city has seen, with house-made tortillas and creative fillings that change weekly.`,
        image: 'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=1600',
        video_url: '',
        featured: true,
        status: 'published',
        areaTag: 'westMidtown',
        areaTags: ['westMidtown', 'decatur', 'buckhead', 'eastAtlanta']
      },
      {
        id: 'blog-eats-2',
        title: 'The Rise of Atlanta\'s Natural Wine Scene',
        category: 'Eats & Drinks',
        author: 'Alex Rivera',
        author_bio: 'Alex covers Atlanta\'s bar and nightlife scene, seeking out the city\'s most creative cocktail programs.',
        created_at: '2026-01-24',
        excerpt: 'How natural wine bars are reshaping the way Atlanta drinks.',
        content: `Natural wine has taken Atlanta by storm, and a new generation of wine bars is leading the charge.

**Vin Natural** in Virginia-Highland was one of the first, and it remains essential. The intimate space focuses on small producers and staff who genuinely love talking about wine without being pretentious.

**Grape & Grain** in Old Fourth Ward pairs natural wines with artisan cheeses and charcuterie. Their weekend tastings draw crowds eager to explore lesser-known regions and grape varieties.

**Pour Culture** in East Atlanta offers a more casual approach, with wines by the glass starting at accessible price points. It's the perfect spot for natural wine newcomers.

The Westside has **Cellar Door**, where the wine list reads like a tour of biodynamic vineyards across Europe. Their orange wines are particularly exceptional.

Even traditional restaurants are getting on board. Many of Atlanta's best new spots now feature dedicated natural wine sections, and sommeliers are increasingly excited to guide diners toward these complex, food-friendly bottles.`,
        image: 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=1600',
        video_url: '',
        featured: false,
        status: 'published',
        areaTag: 'oldFourthWard',
        areaTags: ['oldFourthWard', 'virginiaHighland', 'eastAtlanta', 'westMidtown']
      },
      {
        id: 'blog-eats-3',
        title: 'Where to Find Atlanta\'s Best Coffee Right Now',
        category: 'Eats & Drinks',
        author: 'Jordan Williams',
        author_bio: 'Jordan is a culture journalist documenting Atlanta\'s creative community.',
        created_at: '2026-01-22',
        excerpt: 'From specialty roasters to cozy neighborhood cafes, Atlanta\'s coffee scene has never been stronger.',
        content: `Atlanta's coffee culture has matured into something special. Here's where to find the best cups in the city.

**Revelator Coffee** continues to set the standard with multiple locations, but their Westside spot offers the best atmosphere for lingering over a pour-over.

**Chrome Yellow** in Kirkwood has become a neighborhood institution, combining excellent espresso with a curated selection of vintage goods and local art.

**East Pole Coffee** roasts on-site in East Atlanta, and their seasonal single-origins showcase what specialty coffee can be. The staff here genuinely geeks out over extraction times and origin stories.

**Brash Coffee** in Ponce City Market delivers consistently excellent drinks in a sleek, modern space. Their cold brew is perfect for Atlanta's long summers.

For something different, **Hodgepodge Coffeehouse** in East Atlanta offers a more eclectic vibe with local art, live music, and coffee that holds its own against the specialty newcomers.

**Dancing Goats** remains reliable across multiple locations, and their commitment to ethical sourcing sets an example for the industry.`,
        image: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=1600',
        video_url: '',
        featured: false,
        status: 'published',
        areaTag: 'eastAtlanta',
        areaTags: ['eastAtlanta', 'kirkwood', 'westMidtown', 'midtown']
      },
      {
        id: 'blog-eats-4',
        title: 'Atlanta\'s Food Hall Revolution Continues',
        category: 'Eats & Drinks',
        author: 'Sarah Chen',
        author_bio: 'Sarah is a food writer and restaurant critic who has covered Atlanta\'s dining scene for over a decade.',
        created_at: '2026-01-18',
        excerpt: 'New food halls are bringing diverse cuisines and innovative concepts under one roof.',
        content: `The food hall trend shows no signs of slowing in Atlanta, with new concepts pushing the format in exciting directions.

**Chattahoochee Food Works** in West Midtown remains the gold standard, anchored by established names and adventurous newcomers. The variety here is staggering, from wood-fired pizza to Korean fried chicken to artisan ice cream.

**Sweet Auburn Market** honors the historic district with vendors that reflect the area's African American heritage while welcoming new culinary voices.

**Krog Street Market** in Inman Park continues to evolve, with recent additions including a dedicated sake bar and a plant-based taco stand that's converting skeptics daily.

The newest addition, **Armour Yards Market** in the increasingly hip Armour neighborhood, focuses on local and sustainable vendors. It's smaller than some competitors but thoughtfully curated.

**Colony Square** in Midtown has reinvented its food offerings, creating a mix of fast-casual spots and sit-down restaurants that serve the neighborhood's office workers and residents alike.

These food halls aren't just about conveniencethey're incubators for Atlanta's next generation of restaurateurs.`,
        image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=1600',
        video_url: '',
        featured: false,
        status: 'published',
        areaTag: 'westMidtown',
        areaTags: ['westMidtown', 'inmanPark', 'midtown', 'downtown']
      },
      {
        id: 'blog-eats-5',
        title: 'The Ultimate Guide to Atlanta\'s Patio Dining',
        category: 'Eats & Drinks',
        author: 'Marcus Johnson',
        author_bio: 'Marcus is a lifelong Atlanta resident and culture journalist covering the city\'s vibrant neighborhoods.',
        created_at: '2026-01-15',
        excerpt: 'Atlanta\'s best outdoor dining spots for every occasion and budget.',
        content: `Atlanta's mild climate means patio season extends most of the year. Here are the outdoor spaces worth seeking out.

**The Optimist** in West Midtown offers one of the city's most coveted patios, with a nautical vibe and some of the best seafood in town. Reserve aheadeveryone wants to be here.

**Barcelona Wine Bar** in Inman Park has a romantic courtyard perfect for date nights. The tapas are ideal for sharing, and the sangria flows freely.

**Ladybird Grove & Mess Hall** in the Old Fourth Ward combines BeltLine proximity with eclectic Southern cooking. The sprawling outdoor space feels like a backyard party.

**Wisteria** in Inman Park serves upscale Southern cuisine on a charming porch that feels worlds away from the city.

For casual hangs, **Victory Sandwich Bar** in Inman Park has sidewalk seating perfect for people-watching, while **Hattie B's** in West Midtown lets you nurse your hot chicken burn in the open air.

**Ticonderoga Club** in Krog Street Market spills out onto a covered patio that's ideal for after-work drinks, with creative cocktails and Southern snacks.`,
        image: 'https://images.unsplash.com/photo-1559339352-11d035aa65de?w=1600',
        video_url: '',
        featured: false,
        status: 'published',
        areaTag: 'inmanPark',
        areaTags: ['inmanPark', 'westMidtown', 'oldFourthWard', 'midtown']
      }
    ];

    // Mock Supabase-like functions for demo
    const mockSupabase = {
      auth: {
        signIn: async (email, password) => {
          await new Promise(r => setTimeout(r, 800));
          if (demoUsers[email] && password === 'demo123') {
            return { user: demoUsers[email], error: null };
          }
          return { user: null, error: { message: 'Invalid credentials. Try demo@atlvibes.com / demo123' } };
        },
        signUp: async (email, password, name) => {
          await new Promise(r => setTimeout(r, 800));
          const newUser = { id: Date.now().toString(), email, name, role: 'business' };
          demoUsers[email] = newUser;
          return { user: newUser, error: null };
        },
        signOut: async () => {
          await new Promise(r => setTimeout(r, 300));
          return { error: null };
        }
      },
      businessDetail: {
        getById: async (id) => {
          await new Promise(r => setTimeout(r, 300));
          return demoListings.find(l => l.id === id && l.type === 'business') || null;
        },
        getNearbyListings: async (business, limit = 6) => {
          await new Promise(r => setTimeout(r, 400));
          if (!business) return [];
          const sameNeighborhood = demoListings.filter(l => l.type === 'business' && l.status === 'approved' && l.id !== business.id && l.neighborhood?.toLowerCase() === business.neighborhood?.toLowerCase());
          const sameArea = demoListings.filter(l => l.type === 'business' && l.status === 'approved' && l.id !== business.id && l.area === business.area && !sameNeighborhood.find(n => n.id === l.id));
          const combined = [...sameNeighborhood, ...sameArea];
          combined.sort((a, b) => ({ premium: 0, pro: 1, starter: 2, free: 3 }[a.package] || 3) - ({ premium: 0, pro: 1, starter: 2, free: 3 }[b.package] || 3));
          return combined.slice(0, limit);
        },
        getRelatedStories: async (business, limit = 5) => {
          await new Promise(r => setTimeout(r, 400));
          if (!business) return [];
          let stories = business.related_story_ids?.length > 0 ? demoBlogPosts.filter(p => business.related_story_ids.includes(p.id) && p.status === 'published') : [];
          if (stories.length < limit && business.area) {
            const areaStories = demoBlogPosts.filter(p => p.status === 'published' && !stories.find(s => s.id === p.id) && (p.areaTag === business.area || (p.areaTags && p.areaTags.includes(business.area))));
            stories = [...stories, ...areaStories];
          }
          return stories.slice(0, limit);
        }
      },
      listings: {
        getByUser: async (userId) => {
          await new Promise(r => setTimeout(r, 500));
          return demoListings.filter(l => l.user_id === userId);
        },
        getPending: async () => {
          await new Promise(r => setTimeout(r, 500));
          return demoListings.filter(l => l.status === 'pending');
        },
        create: async (listing) => {
          await new Promise(r => setTimeout(r, 800));
          const newListing = { ...listing, id: Date.now().toString(), status: 'pending', created_at: new Date().toISOString().split('T')[0] };
          demoListings.push(newListing);
          return { data: newListing, error: null };
        },
        update: async (id, updates) => {
          await new Promise(r => setTimeout(r, 500));
          const index = demoListings.findIndex(l => l.id === id);
          if (index >= 0) {
            demoListings[index] = { ...demoListings[index], ...updates };
            return { data: demoListings[index], error: null };
          }
          return { data: null, error: { message: 'Listing not found' } };
        },
        delete: async (id) => {
          await new Promise(r => setTimeout(r, 500));
          const index = demoListings.findIndex(l => l.id === id);
          if (index >= 0) {
            demoListings.splice(index, 1);
            return { error: null };
          }
          return { error: { message: 'Listing not found' } };
        }
      },
      neighborhoods: {
        getByArea: async (areaId) => {
          await new Promise(r => setTimeout(r, 300));
          return demoNeighborhoods[areaId] || [];
        },
        getAll: async () => {
          await new Promise(r => setTimeout(r, 500));
          return Object.values(demoNeighborhoods).flat();
        }
      },
      blogPosts: {
        getAll: async () => {
          await new Promise(r => setTimeout(r, 500));
          return [...demoBlogPosts];
        },
        getPublished: async () => {
          await new Promise(r => setTimeout(r, 500));
          return demoBlogPosts.filter(p => p.status === 'published');
        },
        getFeatured: async () => {
          await new Promise(r => setTimeout(r, 500));
          return demoBlogPosts.filter(p => p.featured && p.status === 'published');
        },
        getById: async (id) => {
          await new Promise(r => setTimeout(r, 300));
          return demoBlogPosts.find(p => p.id === id) || null;
        },
        create: async (post) => {
          await new Promise(r => setTimeout(r, 800));
          const newPost = {
            ...post,
            id: 'blog-' + Date.now(),
            created_at: new Date().toISOString().split('T')[0],
            status: post.status || 'draft'
          };
          demoBlogPosts.push(newPost);
          return { data: newPost, error: null };
        },
        update: async (id, updates) => {
          await new Promise(r => setTimeout(r, 500));
          const index = demoBlogPosts.findIndex(p => p.id === id);
          if (index >= 0) {
            demoBlogPosts[index] = { ...demoBlogPosts[index], ...updates };
            return { data: demoBlogPosts[index], error: null };
          }
          return { data: null, error: { message: 'Blog post not found' } };
        },
        delete: async (id) => {
          await new Promise(r => setTimeout(r, 500));
          const index = demoBlogPosts.findIndex(p => p.id === id);
          if (index >= 0) {
            demoBlogPosts.splice(index, 1);
            return { error: null };
          }
          return { error: { message: 'Blog post not found' } };
        },
        getLatestByArea: async (areaId) => {
          await new Promise(r => setTimeout(r, 300));
          const areaPosts = demoBlogPosts.filter(p =>
            p.status === 'published' &&
            (p.areaTag === areaId || (p.areaTags && p.areaTags.includes(areaId)))
          );
          return areaPosts.sort((a, b) => new Date(b.created_at) - new Date(a.created_at))[0] || null;
        }
      },
      businesses: {
        getByArea: async (areaId, limit = 6) => {
          await new Promise(r => setTimeout(r, 400));
          // Map area IDs to neighborhood names for filtering
          const areaToNeighborhoods = {
            buckhead: ['Buckhead', 'Buckhead Village', 'Chastain Park'],
            midtown: ['Midtown', 'Midtown Core', 'Ansley Park', 'Piedmont Park'],
            downtown: ['Downtown', 'Centennial Hill', 'Five Points'],
            oldFourthWard: ['Old Fourth Ward', 'O4W', 'Ponce City Market'],
            virginiaHighland: ['Virginia-Highland', 'Virginia Highland', 'Morningside'],
            inmanPark: ['Inman Park', 'Little Five Points', 'Candler Park', 'Cabbagetown'],
            westMidtown: ['West Midtown', 'Westside', 'Westside Provisions'],
            eastAtlanta: ['East Atlanta', 'East Atlanta Village', 'Kirkwood'],
            decatur: ['Decatur', 'Downtown Decatur', 'Oakhurst'],
            grantPark: ['Grant Park', 'Summerhill', 'Peoplestown']
          };
          const neighborhoods = areaToNeighborhoods[areaId] || [];
          const areaListings = demoListings.filter(l =>
            l.type === 'business' &&
            l.status === 'approved' &&
            neighborhoods.some(n => l.neighborhood?.toLowerCase().includes(n.toLowerCase()))
          );
          // Sort featured first, then by created date
          return areaListings
            .sort((a, b) => (b.package === 'premium' || b.package === 'pro' ? 1 : 0) - (a.package === 'premium' || a.package === 'pro' ? 1 : 0))
            .slice(0, limit);
        }
      },
      events: {
        getByArea: async (areaId, limit = 6) => {
          await new Promise(r => setTimeout(r, 400));
          const areaToNeighborhoods = {
            buckhead: ['Buckhead', 'Lenox Square', 'Phipps Plaza'],
            midtown: ['Midtown', 'Piedmont Park', 'High Museum', 'Woodruff Arts Center'],
            downtown: ['Downtown', 'Centennial Olympic Park', 'State Farm Arena', 'Mercedes-Benz Stadium'],
            oldFourthWard: ['Old Fourth Ward', 'O4W', 'Ponce City Market', 'Historic Fourth Ward Park'],
            virginiaHighland: ['Virginia-Highland', 'Virginia Highland', 'Morningside'],
            inmanPark: ['Inman Park', 'Little Five Points', 'Candler Park'],
            westMidtown: ['West Midtown', 'Westside', 'Atlantic Station'],
            eastAtlanta: ['East Atlanta', 'East Atlanta Village', 'Kirkwood'],
            decatur: ['Decatur', 'Downtown Decatur', 'Eddie\'s Attic'],
            grantPark: ['Grant Park', 'Zoo Atlanta', 'Summerhill']
          };
          const neighborhoods = areaToNeighborhoods[areaId] || [];
          const areaEvents = demoListings.filter(l =>
            l.type === 'event' &&
            l.status === 'approved' &&
            neighborhoods.some(n => l.neighborhood?.toLowerCase().includes(n.toLowerCase()))
          );
          return areaEvents
            .sort((a, b) => (b.package === 'premium' ? 1 : 0) - (a.package === 'premium' ? 1 : 0))
            .slice(0, limit);
        }
      },
      // Neighborhood-specific data methods
      neighborhoodData: {
        // Get businesses by neighborhood ID, featured first
        getBusinessesByNeighborhood: async (neighborhoodId, limit = 6) => {
          await new Promise(r => setTimeout(r, 300));
          // Find the neighborhood to get its name
          const allNeighborhoods = Object.values(demoNeighborhoods).flat();
          const neighborhood = allNeighborhoods.find(n => n.id === neighborhoodId);
          if (!neighborhood) return [];

          const neighborhoodName = neighborhood.name.toLowerCase();
          const areaListings = demoListings.filter(l =>
            l.type === 'business' &&
            l.status === 'approved' &&
            l.neighborhood?.toLowerCase().includes(neighborhoodName)
          );
          // Sort featured (premium/pro) first, then by created date
          return areaListings
            .sort((a, b) => {
              const aFeatured = a.featured || a.package === 'premium' || a.package === 'pro' ? 1 : 0;
              const bFeatured = b.featured || b.package === 'premium' || b.package === 'pro' ? 1 : 0;
              return bFeatured - aFeatured;
            })
            .slice(0, limit);
        },
        // Get events by neighborhood ID, featured first
        getEventsByNeighborhood: async (neighborhoodId, limit = 6) => {
          await new Promise(r => setTimeout(r, 300));
          const allNeighborhoods = Object.values(demoNeighborhoods).flat();
          const neighborhood = allNeighborhoods.find(n => n.id === neighborhoodId);
          if (!neighborhood) return [];

          const neighborhoodName = neighborhood.name.toLowerCase();
          const areaEvents = demoListings.filter(l =>
            l.type === 'event' &&
            l.status === 'approved' &&
            l.neighborhood?.toLowerCase().includes(neighborhoodName)
          );
          // Sort featured first
          return areaEvents
            .sort((a, b) => {
              const aFeatured = a.featured || a.package === 'premium' ? 1 : 0;
              const bFeatured = b.featured || b.package === 'premium' ? 1 : 0;
              return bFeatured - aFeatured;
            })
            .slice(0, limit);
        },
        // Get stories/blog posts tagged with neighborhood
        getStoriesByNeighborhood: async (neighborhoodId) => {
          await new Promise(r => setTimeout(r, 300));
          const allNeighborhoods = Object.values(demoNeighborhoods).flat();
          const neighborhood = allNeighborhoods.find(n => n.id === neighborhoodId);
          if (!neighborhood) return [];

          // Filter blog posts that match neighborhood or area
          return demoBlogPosts.filter(p =>
            p.status === 'published' && (
              p.neighborhoodId === neighborhoodId ||
              p.neighborhood === neighborhood.name ||
              p.areaTag === neighborhood.area ||
              (p.areaTags && p.areaTags.includes(neighborhood.area))
            )
          );
        },
        // Get related neighborhoods (from same area)
        getRelatedNeighborhoods: async (neighborhood) => {
          await new Promise(r => setTimeout(r, 200));
          if (!neighborhood || !neighborhood.area) return [];

          const areaNeighborhoods = demoNeighborhoods[neighborhood.area] || [];
          return areaNeighborhoods
            .filter(n => n.id !== neighborhood.id)
            .slice(0, 4);
        },
        // Get featured post by ID
        getFeaturedPost: async (postId) => {
          await new Promise(r => setTimeout(r, 200));
          if (!postId) return null;
          return demoBlogPosts.find(p => p.id === postId && p.status === 'published') || null;
        },
        // Get neighborhood by ID
        getById: async (neighborhoodId) => {
          await new Promise(r => setTimeout(r, 200));
          const allNeighborhoods = Object.values(demoNeighborhoods).flat();
          return allNeighborhoods.find(n => n.id === neighborhoodId) || null;
        }
      }
    };

    // Video Embed Component - Parses YouTube/Vimeo URLs and renders responsive iframes
    function VideoEmbed({ url, className = '' }) {
      if (!url) return null;

      // Parse YouTube URLs
      const getYouTubeId = (url) => {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
        const match = url.match(regExp);
        return (match && match[2].length === 11) ? match[2] : null;
      };

      // Parse Vimeo URLs
      const getVimeoId = (url) => {
        const regExp = /vimeo\.com\/(\d+)/;
        const match = url.match(regExp);
        return match ? match[1] : null;
      };

      const youtubeId = getYouTubeId(url);
      const vimeoId = getVimeoId(url);

      if (youtubeId) {
        return (
          <div className={`video-embed-container ${className}`}>
            <iframe
              src={`https://www.youtube.com/embed/${youtubeId}`}
              title="YouTube video"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowFullScreen
            />
          </div>
        );
      }

      if (vimeoId) {
        return (
          <div className={`video-embed-container ${className}`}>
            <iframe
              src={`https://player.vimeo.com/video/${vimeoId}`}
              title="Vimeo video"
              allow="autoplay; fullscreen; picture-in-picture"
              allowFullScreen
            />
          </div>
        );
      }

      return null;
    }

    // Auth Modal Component
    function AuthModal({ isOpen, onClose, onLogin }) {
      const [tab, setTab] = useState('login');
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [name, setName] = useState('');
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');

      if (!isOpen) return null;

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError('');

        try {
          if (tab === 'login') {
            const { user, error } = await mockSupabase.auth.signIn(email, password);
            if (error) throw error;
            onLogin(user);
            onClose();
          } else {
            const { user, error } = await mockSupabase.auth.signUp(email, password, name);
            if (error) throw error;
            onLogin(user);
            onClose();
          }
        } catch (err) {
          setError(err.message);
        } finally {
          setLoading(false);
        }
      };

      return (
        <div className="auth-modal" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="auth-card">
            <button className="auth-close" onClick={onClose}>&times;</button>
            <h2 className="auth-title">{tab === 'login' ? 'Welcome Back' : 'Join ATL Vibes'}</h2>
            <p className="auth-subtitle">
              {tab === 'login' ? 'Sign in to manage your listings' : 'Create an account to submit listings'}
            </p>

            <div className="auth-tabs">
              <button className={`auth-tab ${tab === 'login' ? 'active' : ''}`} onClick={() => setTab('login')}>
                Sign In
              </button>
              <button className={`auth-tab ${tab === 'register' ? 'active' : ''}`} onClick={() => setTab('register')}>
                Register
              </button>
            </div>

            {error && <div className="form-error" style={{marginBottom: '1rem', padding: '0.75rem', background: '#F8D7DA', borderRadius: '6px'}}>{error}</div>}

            <form onSubmit={handleSubmit}>
              {tab === 'register' && (
                <div className="form-group">
                  <label className="form-label">Full Name</label>
                  <input type="text" className="form-input" value={name} onChange={(e) => setName(e.target.value)} placeholder="Your name" required />
                </div>
              )}
              <div className="form-group">
                <label className="form-label">Email</label>
                <input type="email" className="form-input" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="you@example.com" required />
              </div>
              <div className="form-group">
                <label className="form-label">Password</label>
                <input type="password" className="form-input" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="" required />
              </div>
              <button type="submit" className="btn-primary" disabled={loading}>
                {loading ? 'Please wait...' : (tab === 'login' ? 'Sign In' : 'Create Account')}
              </button>
            </form>

            <p className="auth-divider">Demo: demo@atlvibes.com / demo123</p>
          </div>
        </div>
      );
    }

    // IDX Widget Container Component
    // Renders IDX Broker widgets with proper lifecycle management
    function IDXWidgetContainer({ type, config, filters, onPropertyClick }) {
      const containerRef = React.useRef(null);
      const [loading, setLoading] = React.useState(true);
      const [error, setError] = React.useState(null);

      React.useEffect(() => {
        if (!containerRef.current) return;

        setLoading(true);
        setError(null);

        // Check if IDX widgets script is loaded
        if (typeof window.idxWidgets === 'undefined') {
          // Fallback: Display placeholder until IDX script loads
          setLoading(false);
          return;
        }

        try {
          // Clear previous widget content
          containerRef.current.innerHTML = '';

          // Initialize IDX widget based on type
          if (type === 'showcase') {
            window.idxWidgets.showcase({
              container: containerRef.current,
              widgetId: config.showcaseWidgetId || IDX_CONFIG.showcaseWidgetId,
              columns: 3,
              rows: 1,
              city: filters?.city || IDX_CONFIG.defaultCity,
              state: IDX_CONFIG.defaultState,
              zip: filters?.zips?.join(',') || '',
              minPrice: filters?.minPrice || '',
              maxPrice: filters?.maxPrice || '',
              beds: filters?.beds || '',
              baths: filters?.baths || '',
              onSelect: (listing) => onPropertyClick && onPropertyClick(listing)
            });
          } else if (type === 'search') {
            window.idxWidgets.search({
              container: containerRef.current,
              widgetId: config.searchWidgetId || IDX_CONFIG.searchWidgetId,
              city: filters?.city || IDX_CONFIG.defaultCity,
              state: IDX_CONFIG.defaultState
            });
          }

          setLoading(false);
        } catch (err) {
          console.error('IDX Widget Error:', err);
          setError('Unable to load property listings. Please try again later.');
          setLoading(false);
        }

        // Cleanup on unmount
        return () => {
          if (containerRef.current) {
            containerRef.current.innerHTML = '';
          }
        };
      }, [type, filters]);

      if (error) {
        return (
          <div className="idx-error">
            <div className="idx-error-icon">!</div>
            <p>{error}</p>
          </div>
        );
      }

      return (
        <div className="idx-widget-container" ref={containerRef}>
          {loading && (
            <div className="idx-loading">
              <div className="idx-loading-spinner"></div>
              <p>Loading FMLS listings...</p>
            </div>
          )}
        </div>
      );
    }

    // Property Search Filters Component
    function PropertySearchFilters({ neighborhoods, onFilterChange, onSearch }) {
      const [filters, setFilters] = React.useState({
        neighborhood: '',
        minPrice: '',
        maxPrice: '',
        beds: '',
        baths: '',
        propertyType: ''
      });

      // Flatten all neighborhoods for dropdown
      const allNeighborhoods = React.useMemo(() => {
        return Object.entries(neighborhoods).flatMap(([area, hoods]) =>
          hoods.map(h => ({ ...h, areaId: area }))
        );
      }, [neighborhoods]);

      const handleChange = (e) => {
        const { name, value } = e.target;
        const newFilters = { ...filters, [name]: value };
        setFilters(newFilters);

        // Get FMLS params if neighborhood selected
        if (name === 'neighborhood' && value) {
          const fmlsParams = getFMLSParams(value);
          onFilterChange && onFilterChange({ ...newFilters, ...fmlsParams });
        } else {
          onFilterChange && onFilterChange(newFilters);
        }
      };

      const handleSearch = () => {
        const fmlsParams = filters.neighborhood ? getFMLSParams(filters.neighborhood) : {};
        onSearch && onSearch({ ...filters, ...fmlsParams });
      };

      const handleClear = () => {
        const clearedFilters = {
          neighborhood: '',
          minPrice: '',
          maxPrice: '',
          beds: '',
          baths: '',
          propertyType: ''
        };
        setFilters(clearedFilters);
        onFilterChange && onFilterChange(clearedFilters);
      };

      const priceOptions = [
        { value: '', label: 'Any' },
        { value: '100000', label: '$100,000' },
        { value: '200000', label: '$200,000' },
        { value: '300000', label: '$300,000' },
        { value: '400000', label: '$400,000' },
        { value: '500000', label: '$500,000' },
        { value: '750000', label: '$750,000' },
        { value: '1000000', label: '$1,000,000' },
        { value: '1500000', label: '$1,500,000' },
        { value: '2000000', label: '$2,000,000+' }
      ];

      return (
        <div className="property-search-filters">
          <div className="property-filter-group">
            <label className="property-filter-label">Neighborhood</label>
            <select
              name="neighborhood"
              value={filters.neighborhood}
              onChange={handleChange}
              className="property-filter-select"
            >
              <option value="">All Atlanta</option>
              {allNeighborhoods.map(n => (
                <option key={n.id} value={n.id}>{n.name}</option>
              ))}
            </select>
          </div>

          <div className="property-filter-group">
            <label className="property-filter-label">Min Price</label>
            <select
              name="minPrice"
              value={filters.minPrice}
              onChange={handleChange}
              className="property-filter-select"
            >
              {priceOptions.map(opt => (
                <option key={`min-${opt.value}`} value={opt.value}>{opt.label}</option>
              ))}
            </select>
          </div>

          <div className="property-filter-group">
            <label className="property-filter-label">Max Price</label>
            <select
              name="maxPrice"
              value={filters.maxPrice}
              onChange={handleChange}
              className="property-filter-select"
            >
              {priceOptions.map(opt => (
                <option key={`max-${opt.value}`} value={opt.value}>{opt.label}</option>
              ))}
            </select>
          </div>

          <div className="property-filter-group">
            <label className="property-filter-label">Beds</label>
            <select
              name="beds"
              value={filters.beds}
              onChange={handleChange}
              className="property-filter-select"
            >
              <option value="">Any</option>
              <option value="1">1+</option>
              <option value="2">2+</option>
              <option value="3">3+</option>
              <option value="4">4+</option>
              <option value="5">5+</option>
            </select>
          </div>

          <div className="property-filter-group">
            <label className="property-filter-label">Baths</label>
            <select
              name="baths"
              value={filters.baths}
              onChange={handleChange}
              className="property-filter-select"
            >
              <option value="">Any</option>
              <option value="1">1+</option>
              <option value="2">2+</option>
              <option value="3">3+</option>
              <option value="4">4+</option>
            </select>
          </div>

          <button className="property-filter-button" onClick={handleSearch}>
            Search
          </button>
          <button className="property-filter-clear" onClick={handleClear}>
            Clear
          </button>
        </div>
      );
    }

    // Property Lead Form Modal Component
    function PropertyLeadForm({ isOpen, onClose, property, user }) {
      const [formData, setFormData] = React.useState({
        name: user?.name || '',
        email: user?.email || '',
        phone: '',
        message: property ? `I'm interested in ${property.address || 'this property'}` : ''
      });
      const [loading, setLoading] = React.useState(false);
      const [success, setSuccess] = React.useState(false);
      const [error, setError] = React.useState(null);

      React.useEffect(() => {
        if (user) {
          setFormData(prev => ({
            ...prev,
            name: user.name || '',
            email: user.email || ''
          }));
        }
      }, [user]);

      React.useEffect(() => {
        if (property) {
          setFormData(prev => ({
            ...prev,
            message: `I'm interested in ${property.address || 'this property'}`
          }));
        }
      }, [property]);

      if (!isOpen) return null;

      const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError(null);

        try {
          // Save to Supabase (mock for demo)
          const leadData = {
            ...formData,
            property_id: property?.id,
            property_address: property?.address,
            property_price: property?.price,
            source: 'idx_broker',
            created_at: new Date().toISOString()
          };

          // Mock save to Supabase
          console.log('Lead saved to Supabase:', leadData);

          // In production, also send to IDX Broker API
          // await fetch(`https://api.idxbroker.com/leads/lead`, {
          //   method: 'POST',
          //   headers: {
          //     'Content-Type': 'application/json',
          //     'accesskey': IDX_CONFIG.apiKey
          //   },
          //   body: JSON.stringify({
          //     firstName: formData.name.split(' ')[0],
          //     lastName: formData.name.split(' ').slice(1).join(' '),
          //     email: formData.email,
          //     phone: formData.phone,
          //     message: formData.message,
          //     propertyId: property?.id
          //   })
          // });

          setSuccess(true);
          setTimeout(() => {
            onClose();
            setSuccess(false);
            setFormData({ name: '', email: '', phone: '', message: '' });
          }, 2000);
        } catch (err) {
          setError('Unable to submit your request. Please try again.');
        } finally {
          setLoading(false);
        }
      };

      return (
        <div className="property-lead-modal" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="property-lead-card">
            <button className="auth-close" onClick={onClose}>&times;</button>
            <h2 className="property-lead-title">Request Information</h2>
            <p className="property-lead-subtitle">Get more details about this property</p>

            {property && (
              <div className="property-lead-property-preview">
                {property.image && (
                  <img src={property.image} alt={property.address} />
                )}
                <div className="property-lead-property-info">
                  <div className="property-lead-property-price">{property.price}</div>
                  <div className="property-lead-property-address">{property.address}</div>
                </div>
              </div>
            )}

            {success && (
              <div className="form-success" style={{marginBottom: '1rem'}}>
                Thank you! A real estate professional will contact you shortly.
              </div>
            )}

            {error && (
              <div className="form-error" style={{marginBottom: '1rem', padding: '0.75rem', background: '#F8D7DA', borderRadius: '6px'}}>
                {error}
              </div>
            )}

            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">Name</label>
                <input
                  type="text"
                  name="name"
                  className="form-input"
                  value={formData.name}
                  onChange={handleChange}
                  placeholder="Your name"
                  required
                />
              </div>
              <div className="form-group">
                <label className="form-label">Email</label>
                <input
                  type="email"
                  name="email"
                  className="form-input"
                  value={formData.email}
                  onChange={handleChange}
                  placeholder="you@example.com"
                  required
                />
              </div>
              <div className="form-group">
                <label className="form-label">Phone</label>
                <input
                  type="tel"
                  name="phone"
                  className="form-input"
                  value={formData.phone}
                  onChange={handleChange}
                  placeholder="(404) 555-0000"
                />
              </div>
              <div className="form-group">
                <label className="form-label">Message</label>
                <textarea
                  name="message"
                  className="form-input"
                  value={formData.message}
                  onChange={handleChange}
                  placeholder="Tell us what you're looking for..."
                  rows="3"
                />
              </div>
              <button type="submit" className="btn-primary" disabled={loading}>
                {loading ? 'Sending...' : 'Send Request'}
              </button>
            </form>
          </div>
        </div>
      );
    }

    // IDX Property Detail Modal Component
    function IDXPropertyDetail({ isOpen, onClose, property, listingUrl }) {
      if (!isOpen) return null;

      // Build the IDX hosted page URL for the property
      const detailUrl = listingUrl || (property?.idx_url) ||
        `https://${IDX_CONFIG.subdomain}.idxbroker.com/idx/details/listing/${property?.id || ''}`;

      return (
        <div className="idx-property-detail-modal" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="idx-property-detail-container">
            <button className="idx-property-detail-close" onClick={onClose}>&times;</button>
            <iframe
              src={detailUrl}
              className="idx-property-detail-iframe"
              title="Property Details"
              allowFullScreen
            />
          </div>
        </div>
      );
    }

    // Submit Listing Modal Component
    function SubmitModal({ isOpen, onClose, user, type = 'business' }) {
      const [formData, setFormData] = useState({
        type: type,
        name: '',
        category: '',
        neighborhood: '',
        address: '',
        date: '',
        description: '',
        phone: '',
        website: '',
        image: ''
      });
      const [loading, setLoading] = useState(false);
      const [success, setSuccess] = useState(false);

      useEffect(() => {
        setFormData(prev => ({ ...prev, type }));
      }, [type]);

      if (!isOpen) return null;

      const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);

        const { data, error } = await mockSupabase.listings.create({
          ...formData,
          user_id: user.id,
          image: formData.image || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800'
        });

        setLoading(false);
        if (!error) {
          setSuccess(true);
          setTimeout(() => {
            onClose();
            setSuccess(false);
            setFormData({ type: 'business', name: '', category: '', neighborhood: '', address: '', date: '', description: '', phone: '', website: '', image: '' });
          }, 2000);
        }
      };

      const categories = formData.type === 'business'
        ? ['Restaurant', 'Caf', 'Bar', 'Retail', 'Salon/Spa', 'Fitness', 'Entertainment', 'Professional Services', 'Other']
        : ['Music', 'Art', 'Food & Drink', 'Festival', 'Sports', 'Networking', 'Community', 'Other'];

      const neighborhoods = ['Buckhead', 'Midtown', 'Downtown', 'Old Fourth Ward', 'Virginia-Highland', 'Inman Park', 'West Midtown', 'East Atlanta', 'Decatur', 'Grant Park'];

      return (
        <div className="submit-modal" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="submit-card">
            <button className="auth-close" onClick={onClose}>&times;</button>
            <h2 className="auth-title">Submit {formData.type === 'business' ? 'Business' : 'Event'}</h2>
            <p className="auth-subtitle">Fill out the details below. Submissions are reviewed before publishing.</p>

            {success && <div className="form-success">Submitted successfully! Your listing is pending review.</div>}

            <div className="auth-tabs">
              <button className={`auth-tab ${formData.type === 'business' ? 'active' : ''}`} onClick={() => setFormData({...formData, type: 'business'})}>
                Business
              </button>
              <button className={`auth-tab ${formData.type === 'event' ? 'active' : ''}`} onClick={() => setFormData({...formData, type: 'event'})}>
                Event
              </button>
            </div>

            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">{formData.type === 'business' ? 'Business Name' : 'Event Name'} *</label>
                <input type="text" name="name" className="form-input" value={formData.name} onChange={handleChange} required />
              </div>

              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Category *</label>
                  <select name="category" className="form-select" value={formData.category} onChange={handleChange} required>
                    <option value="">Select category</option>
                    {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Neighborhood *</label>
                  <select name="neighborhood" className="form-select" value={formData.neighborhood} onChange={handleChange} required>
                    <option value="">Select area</option>
                    {neighborhoods.map(n => <option key={n} value={n}>{n}</option>)}
                  </select>
                </div>
              </div>

              {formData.type === 'business' ? (
                <div className="form-group">
                  <label className="form-label">Address *</label>
                  <input type="text" name="address" className="form-input" value={formData.address} onChange={handleChange} placeholder="123 Peachtree St, Atlanta, GA" required />
                </div>
              ) : (
                <div className="form-row">
                  <div className="form-group">
                    <label className="form-label">Event Date *</label>
                    <input type="date" name="date" className="form-input" value={formData.date} onChange={handleChange} required />
                  </div>
                  <div className="form-group">
                    <label className="form-label">Location/Venue *</label>
                    <input type="text" name="address" className="form-input" value={formData.address} onChange={handleChange} required />
                  </div>
                </div>
              )}

              <div className="form-group">
                <label className="form-label">Description *</label>
                <textarea name="description" className="form-textarea" value={formData.description} onChange={handleChange} placeholder="Tell us about your business/event..." required />
                <p className="form-hint">Minimum 50 characters recommended for better visibility</p>
              </div>

              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Phone</label>
                  <input type="tel" name="phone" className="form-input" value={formData.phone} onChange={handleChange} placeholder="(404) 555-0123" />
                </div>
                <div className="form-group">
                  <label className="form-label">Website</label>
                  <input type="url" name="website" className="form-input" value={formData.website} onChange={handleChange} placeholder="https://..." />
                </div>
              </div>

              <div className="form-group">
                <label className="form-label">Image URL</label>
                <input type="url" name="image" className="form-input" value={formData.image} onChange={handleChange} placeholder="https://..." />
                <p className="form-hint">Paste a link to your best photo. We'll add image uploads in the future.</p>
              </div>

              <button type="submit" className="btn-primary" disabled={loading}>
                {loading ? 'Submitting...' : 'Submit for Review'}
              </button>
            </form>
          </div>
        </div>
      );
    }

    // Blog Post Form Component - For creating/editing blog posts in CMS
    function BlogPostForm({ isOpen, onClose, onSave, post = null }) {
      const [formData, setFormData] = useState({
        title: '',
        category: 'Culture',
        author: '',
        author_bio: '',
        excerpt: '',
        content: '',
        image: '',
        video_url: '',
        featured: false,
        status: 'draft'
      });
      const [loading, setLoading] = useState(false);
      const [success, setSuccess] = useState(false);

      useEffect(() => {
        if (post) {
          setFormData({
            title: post.title || '',
            category: post.category || 'Culture',
            author: post.author || '',
            author_bio: post.author_bio || '',
            excerpt: post.excerpt || '',
            content: post.content || '',
            image: post.image || '',
            video_url: post.video_url || '',
            featured: post.featured || false,
            status: post.status || 'draft'
          });
        } else {
          setFormData({
            title: '',
            category: 'Culture',
            author: '',
            author_bio: '',
            excerpt: '',
            content: '',
            image: '',
            video_url: '',
            featured: false,
            status: 'draft'
          });
        }
      }, [post, isOpen]);

      if (!isOpen) return null;

      const handleChange = (e) => {
        const { name, value, type, checked } = e.target;
        setFormData(prev => ({
          ...prev,
          [name]: type === 'checkbox' ? checked : value
        }));
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);

        if (post) {
          await mockSupabase.blogPosts.update(post.id, formData);
        } else {
          await mockSupabase.blogPosts.create(formData);
        }

        setLoading(false);
        setSuccess(true);
        setTimeout(() => {
          onSave();
          onClose();
          setSuccess(false);
        }, 1500);
      };

      const categories = ['Culture', 'Food Scene', 'Art', 'Nightlife', 'Real Estate', 'Events', 'Neighborhoods', 'Lifestyle'];

      return (
        <div className="submit-modal" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="submit-card" style={{maxWidth: '700px'}}>
            <button className="auth-close" onClick={onClose}>&times;</button>
            <h2 className="auth-title">{post ? 'Edit Blog Post' : 'Create Blog Post'}</h2>
            <p className="auth-subtitle">Write compelling stories about Atlanta's culture and communities.</p>

            {success && <div className="form-success">{post ? 'Post updated!' : 'Post created!'} Refreshing...</div>}

            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">Title *</label>
                <input
                  type="text"
                  name="title"
                  className="form-input"
                  value={formData.title}
                  onChange={handleChange}
                  placeholder="Enter a compelling title"
                  required
                />
              </div>

              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Category *</label>
                  <select name="category" className="form-select" value={formData.category} onChange={handleChange} required>
                    {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Status</label>
                  <select name="status" className="form-select" value={formData.status} onChange={handleChange}>
                    <option value="draft">Draft</option>
                    <option value="published">Published</option>
                  </select>
                </div>
              </div>

              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Author Name *</label>
                  <input
                    type="text"
                    name="author"
                    className="form-input"
                    value={formData.author}
                    onChange={handleChange}
                    placeholder="Author name"
                    required
                  />
                </div>
                <div className="form-group">
                  <label className="form-label">
                    <input
                      type="checkbox"
                      name="featured"
                      checked={formData.featured}
                      onChange={handleChange}
                      style={{marginRight: '0.5rem'}}
                    />
                    Featured Post
                  </label>
                </div>
              </div>

              <div className="form-group">
                <label className="form-label">Author Bio</label>
                <input
                  type="text"
                  name="author_bio"
                  className="form-input"
                  value={formData.author_bio}
                  onChange={handleChange}
                  placeholder="Brief author description"
                />
              </div>

              <div className="form-group">
                <label className="form-label">Excerpt *</label>
                <textarea
                  name="excerpt"
                  className="form-textarea"
                  value={formData.excerpt}
                  onChange={handleChange}
                  placeholder="A short summary that appears in story cards (1-2 sentences)"
                  style={{minHeight: '80px'}}
                  required
                />
              </div>

              <div className="form-group">
                <label className="form-label">Content *</label>
                <textarea
                  name="content"
                  className="form-textarea"
                  value={formData.content}
                  onChange={handleChange}
                  placeholder="Full article content. Use **bold** for emphasis and blank lines for paragraphs."
                  style={{minHeight: '200px'}}
                  required
                />
                <p className="form-hint">Separate paragraphs with blank lines. Use **text** for bold.</p>
              </div>

              <div className="form-group">
                <label className="form-label">Featured Image URL *</label>
                <input
                  type="url"
                  name="image"
                  className="form-input"
                  value={formData.image}
                  onChange={handleChange}
                  placeholder="https://images.unsplash.com/..."
                  required
                />
                {formData.image && (
                  <img src={formData.image} alt="Preview" style={{width: '100%', height: '150px', objectFit: 'cover', borderRadius: '8px', marginTop: '0.75rem'}} />
                )}
              </div>

              <div className="form-group">
                <label className="form-label">Video URL (Optional)</label>
                <input
                  type="url"
                  name="video_url"
                  className="form-input"
                  value={formData.video_url}
                  onChange={handleChange}
                  placeholder="YouTube or Vimeo URL"
                />
                <p className="form-hint">Paste a YouTube or Vimeo URL to embed a video in your post.</p>
                {formData.video_url && (
                  <div className="video-preview-container">
                    <VideoEmbed url={formData.video_url} />
                  </div>
                )}
              </div>

              <button type="submit" className="btn-primary" disabled={loading}>
                {loading ? 'Saving...' : (post ? 'Update Post' : 'Create Post')}
              </button>
            </form>
          </div>
        </div>
      );
    }

    // Admin Review Card Component
    function AdminReviewCard({ listing, onApprove, onDecline, onUpdate }) {
      const [adminNotes, setAdminNotes] = useState(listing.admin_notes || '');
      const [selectedReason, setSelectedReason] = useState('');
      const [customReason, setCustomReason] = useState('');
      const [showDeclineOptions, setShowDeclineOptions] = useState(false);
      const [processing, setProcessing] = useState(false);
      const [actionMessage, setActionMessage] = useState('');

      const pkg = subscriptionPackages[listing.package] || subscriptionPackages.free;

      const handleApprove = async () => {
        setProcessing(true);
        setActionMessage('');

        // Simulate charging if paid package
        if (pkg.price > 0) {
          await new Promise(r => setTimeout(r, 1000));
        }

        await onApprove(listing.id, adminNotes);
        setActionMessage(`Approved! ${pkg.price > 0 ? `$${pkg.price} charged.` : ''} Confirmation email sent to ${listing.user_email}`);
        setProcessing(false);
      };

      const handleDecline = async () => {
        if (!selectedReason) {
          alert('Please select a decline reason');
          return;
        }

        setProcessing(true);
        const reason = selectedReason === 'custom' ? customReason : declineReasons.find(r => r.id === selectedReason)?.message;
        await onDecline(listing.id, reason, adminNotes);
        setActionMessage(`Declined. Email sent to ${listing.user_email} with reason.`);
        setProcessing(false);
      };

      const handleNotesChange = (e) => {
        setAdminNotes(e.target.value);
        onUpdate(listing.id, { admin_notes: e.target.value });
      };

      if (actionMessage) {
        return (
          <div className="review-success-message">
            <span></span> {actionMessage}
          </div>
        );
      }

      return (
        <div className="admin-review-card">
          <div className="admin-review-header">
            <img src={listing.image} alt={listing.name} className="admin-review-image" />
            <div className="admin-review-info">
              <div className="admin-review-meta">
                <span className="admin-review-type">{listing.type}</span>
                <span className={`admin-review-package package-${listing.package}`}>{pkg.name}</span>
                {pkg.price > 0 && (
                  <span className="admin-review-price">${pkg.price}/mo pending</span>
                )}
              </div>
              <h3 className="admin-review-title">{listing.name}</h3>
              <p className="admin-review-subtitle">
                {listing.category}  {listing.neighborhood}
                {listing.address && `  ${listing.address}`}
              </p>
              <p className="admin-review-desc">{listing.description}</p>
              <div className="admin-review-user">
                <span className="admin-review-user-avatar">{listing.user_name?.charAt(0) || 'U'}</span>
                <span>{listing.user_name} ({listing.user_email})</span>
              </div>
            </div>
          </div>

          <div className="admin-review-body">
            <div className="admin-field-group">
              <label className="admin-field-label">Admin Notes (Internal - Not sent to user)</label>
              <textarea
                className="admin-notes-textarea"
                placeholder="Add internal notes about this submission..."
                value={adminNotes}
                onChange={handleNotesChange}
              />
            </div>

            {showDeclineOptions && (
              <div className="admin-field-group">
                <label className="admin-field-label">Decline Reason (Sent to user)</label>
                <div className="decline-reasons">
                  {declineReasons.map(reason => (
                    <div
                      key={reason.id}
                      className={`decline-reason-option ${selectedReason === reason.id ? 'selected' : ''}`}
                      onClick={() => setSelectedReason(reason.id)}
                    >
                      <input
                        type="radio"
                        name={`reason-${listing.id}`}
                        checked={selectedReason === reason.id}
                        onChange={() => setSelectedReason(reason.id)}
                      />
                      <label>{reason.label}</label>
                    </div>
                  ))}
                  {selectedReason === 'custom' && (
                    <input
                      type="text"
                      className="custom-reason-input"
                      placeholder="Enter custom decline reason..."
                      value={customReason}
                      onChange={(e) => setCustomReason(e.target.value)}
                    />
                  )}
                </div>
              </div>
            )}
          </div>

          <div className="admin-review-footer">
            <span className="admin-review-date">Submitted {listing.created_at}</span>
            <div className="admin-review-actions">
              {pkg.price > 0 && (
                <button className="btn-charge" disabled={processing}>
                  <span></span> ${pkg.price} pending
                </button>
              )}
              {!showDeclineOptions ? (
                <>
                  <button
                    className="btn-decline-large"
                    onClick={() => setShowDeclineOptions(true)}
                    disabled={processing}
                  >
                    <span></span> Decline
                  </button>
                  <button
                    className="btn-approve-large"
                    onClick={handleApprove}
                    disabled={processing}
                  >
                    <span></span> {pkg.price > 0 ? `Approve & Charge $${pkg.price}` : 'Approve'}
                  </button>
                </>
              ) : (
                <>
                  <button
                    className="btn-secondary"
                    onClick={() => setShowDeclineOptions(false)}
                    disabled={processing}
                  >
                    Cancel
                  </button>
                  <button
                    className="btn-decline-large"
                    onClick={handleDecline}
                    disabled={processing || !selectedReason}
                  >
                    <span></span> Confirm Decline
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      );
    }

    // Dashboard Component
    function Dashboard({ user, onClose }) {
      const [tab, setTab] = useState('listings');
      const [reviewFilter, setReviewFilter] = useState('pending');
      const [listings, setListings] = useState([]);
      const [allSubmissions, setAllSubmissions] = useState([]);
      const [loading, setLoading] = useState(true);

      useEffect(() => {
        loadData();
      }, [user]);

      const loadData = async () => {
        setLoading(true);
        const userListings = await mockSupabase.listings.getByUser(user.id);
        setListings(userListings);

        if (user.role === 'admin') {
          // Get all submissions for admin
          setAllSubmissions([...demoListings]);
        }
        setLoading(false);
      };

      const pendingCount = allSubmissions.filter(l => l.status === 'pending').length;
      const approvedCount = allSubmissions.filter(l => l.status === 'approved').length;
      const declinedCount = allSubmissions.filter(l => l.status === 'rejected').length;

      const filteredSubmissions = allSubmissions.filter(l => {
        if (reviewFilter === 'pending') return l.status === 'pending';
        if (reviewFilter === 'approved') return l.status === 'approved';
        if (reviewFilter === 'declined') return l.status === 'rejected';
        return true;
      });

      const handleApprove = async (id, notes) => {
        await mockSupabase.listings.update(id, {
          status: 'approved',
          admin_notes: notes,
          reviewed_at: new Date().toISOString().split('T')[0]
        });
        // Update local state
        setAllSubmissions(prev => prev.map(l =>
          l.id === id ? { ...l, status: 'approved', admin_notes: notes } : l
        ));
      };

      const handleDecline = async (id, reason, notes) => {
        await mockSupabase.listings.update(id, {
          status: 'rejected',
          decline_reason: reason,
          admin_notes: notes,
          reviewed_at: new Date().toISOString().split('T')[0]
        });
        // Update local state
        setAllSubmissions(prev => prev.map(l =>
          l.id === id ? { ...l, status: 'rejected', admin_notes: notes } : l
        ));
      };

      const handleUpdateNotes = async (id, updates) => {
        // Just update locally for demo
        setAllSubmissions(prev => prev.map(l =>
          l.id === id ? { ...l, ...updates } : l
        ));
      };

      const handleDelete = async (id) => {
        if (confirm('Are you sure you want to delete this listing?')) {
          await mockSupabase.listings.delete(id);
          loadData();
        }
      };

      return (
        <section className="dashboard-section" id="dashboard">
          <div className="dashboard-header">
            <div>
              <h2 className="section-title" style={{marginBottom: '0.5rem'}}>
                {user.role === 'admin' ? 'Admin Dashboard' : 'My Dashboard'}
              </h2>
              <p style={{color: 'var(--text-light)'}}>Welcome back, {user.name}</p>
            </div>
            <button className="btn-secondary" onClick={onClose}>Back to Site</button>
          </div>

          <div className="dashboard-tabs">
            <button className={`dashboard-tab ${tab === 'listings' ? 'active' : ''}`} onClick={() => setTab('listings')}>
              My Listings ({listings.length})
            </button>
            {user.role === 'admin' && (
              <button className={`dashboard-tab ${tab === 'review' ? 'active' : ''}`} onClick={() => setTab('review')}>
                Review Submissions {pendingCount > 0 && <span style={{background: 'var(--primary-red)', color: 'white', padding: '0.15rem 0.5rem', borderRadius: '10px', fontSize: '0.75rem', marginLeft: '0.5rem'}}>{pendingCount}</span>}
              </button>
            )}
          </div>

          {loading ? (
            <div className="empty-state"><p>Loading...</p></div>
          ) : tab === 'listings' ? (
            listings.length > 0 ? (
              <div className="listings-grid">
                {listings.map(listing => (
                  <div key={listing.id} className="listing-card">
                    <img src={listing.image} alt={listing.name} className="listing-image" />
                    <div className="listing-content">
                      <span className={`listing-status ${listing.status}`}>{listing.status}</span>
                      <h3 className="listing-title">{listing.name}</h3>
                      <p className="listing-meta">{listing.category}  {listing.neighborhood}</p>
                      <div className="listing-actions">
                        <button className="listing-action-btn">Edit</button>
                        <button className="listing-action-btn delete" onClick={() => handleDelete(listing.id)}>Delete</button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="empty-state">
                <h3>No listings yet</h3>
                <p>Submit your first business or event to get started!</p>
              </div>
            )
          ) : (
            <>
              <div className="review-tabs">
                <button
                  className={`review-tab-btn ${reviewFilter === 'pending' ? 'active' : ''}`}
                  onClick={() => setReviewFilter('pending')}
                >
                  Pending <span className="count">{pendingCount}</span>
                </button>
                <button
                  className={`review-tab-btn ${reviewFilter === 'approved' ? 'active' : ''}`}
                  onClick={() => setReviewFilter('approved')}
                >
                  Approved <span className="count">{approvedCount}</span>
                </button>
                <button
                  className={`review-tab-btn ${reviewFilter === 'declined' ? 'active' : ''}`}
                  onClick={() => setReviewFilter('declined')}
                >
                  Declined <span className="count">{declinedCount}</span>
                </button>
              </div>

              {filteredSubmissions.length > 0 ? (
                <div>
                  {filteredSubmissions.map(listing => (
                    listing.status === 'pending' ? (
                      <AdminReviewCard
                        key={listing.id}
                        listing={listing}
                        onApprove={handleApprove}
                        onDecline={handleDecline}
                        onUpdate={handleUpdateNotes}
                      />
                    ) : (
                      <div key={listing.id} className="admin-review-card" style={{opacity: 0.8}}>
                        <div className="admin-review-header">
                          <img src={listing.image} alt={listing.name} className="admin-review-image" />
                          <div className="admin-review-info">
                            <div className="admin-review-meta">
                              <span className="admin-review-type">{listing.type}</span>
                              <span className={`listing-status ${listing.status}`}>{listing.status}</span>
                            </div>
                            <h3 className="admin-review-title">{listing.name}</h3>
                            <p className="admin-review-subtitle">{listing.category}  {listing.neighborhood}</p>
                            {listing.admin_notes && (
                              <p style={{fontSize: '0.85rem', color: 'var(--text-light)', marginTop: '0.5rem', fontStyle: 'italic'}}>
                                Notes: {listing.admin_notes}
                              </p>
                            )}
                          </div>
                        </div>
                      </div>
                    )
                  ))}
                </div>
              ) : (
                <div className="empty-state">
                  <h3>No {reviewFilter} submissions</h3>
                  <p>
                    {reviewFilter === 'pending' ? 'All caught up! No submissions waiting for review.' :
                     reviewFilter === 'approved' ? 'No approved submissions yet.' :
                     'No declined submissions.'}
                  </p>
                </div>
              )}
            </>
          )}
        </section>
      );
    }

    // Neighborhood Filter Component - Shows neighborhoods within an area
    function NeighborhoodFilter({ area, onClose, onSelectNeighborhood }) {
      const [neighborhoods, setNeighborhoods] = useState([]);
      const [loading, setLoading] = useState(true);
      const [searchTerm, setSearchTerm] = useState('');

      // Neighborhood images based on area type
      const areaImages = {
        buckhead: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=600',
        midtown: 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=600',
        downtown: 'https://images.unsplash.com/photo-1519501025264-65ba15a82390?w=600',
        oldFourthWard: 'https://images.unsplash.com/photo-1545987796-200677ee1011?w=600',
        virginiaHighland: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=600',
        inmanPark: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=600',
        westMidtown: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600',
        eastAtlanta: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=600',
        decatur: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=600',
        grantPark: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600'
      };

      // Different images for variety within each area
      const getNeighborhoodImage = (neighborhood, index) => {
        const imagePool = [
          'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=600',
          'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=600',
          'https://images.unsplash.com/photo-1519501025264-65ba15a82390?w=600',
          'https://images.unsplash.com/photo-1545987796-200677ee1011?w=600',
          'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=600',
          'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=600',
          'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600',
          'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=600',
          'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=600',
          'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600',
          'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=600',
          'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=600'
        ];
        return neighborhood.image || imagePool[index % imagePool.length];
      };

      // SVG Icons for each area
      const AreaIcon = ({ type }) => {
        const icons = {
          buckhead: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M3 21h18M5 21V7l7-4 7 4v14M9 21v-6h6v6M9 9h.01M15 9h.01M9 13h.01M15 13h.01"/>
            </svg>
          ),
          midtown: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01"/>
            </svg>
          ),
          downtown: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <rect x="3" y="10" width="6" height="11"/><rect x="9" y="4" width="6" height="17"/><rect x="15" y="8" width="6" height="13"/><line x1="3" y1="21" x2="21" y2="21"/>
            </svg>
          ),
          oldFourthWard: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <circle cx="12" cy="5" r="3"/><path d="M12 8v4M8 21l2-9h4l2 9M10 12l-2 3M14 12l2 3"/>
            </svg>
          ),
          virginiaHighland: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M12 3l-8 9h4v9h8v-9h4z"/><path d="M9 21v-6h6v6"/>
            </svg>
          ),
          inmanPark: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
          ),
          westMidtown: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
          ),
          eastAtlanta: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/>
            </svg>
          ),
          decatur: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M18 8h1a4 4 0 010 8h-1"/><path d="M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
          ),
          grantPark: (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
              <path d="M12 2a5 5 0 015 5c0 2-1 3-2 4l-1 1v3h-4v-3l-1-1c-1-1-2-2-2-4a5 5 0 015-5z"/><path d="M9 18h6M10 21h4"/>
            </svg>
          )
        };
        return icons[type] || (
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/>
          </svg>
        );
      };

      useEffect(() => {
        loadNeighborhoods();
      }, [area]);

      const loadNeighborhoods = async () => {
        setLoading(true);
        const data = await mockSupabase.neighborhoods.getByArea(area.id);
        setNeighborhoods(data);
        setLoading(false);
      };

      const filteredNeighborhoods = neighborhoods.filter(n =>
        n.name.toLowerCase().includes(searchTerm.toLowerCase())
      );

      return (
        <div className="neighborhood-filter-overlay" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="neighborhood-filter-panel">
            <div className="filter-header">
              <div className="filter-header-left">
                <div className="filter-area-icon"><AreaIcon type={area.id} /></div>
                <div>
                  <h2 className="filter-title">{area.name}</h2>
                  <p className="filter-subtitle">{neighborhoods.length} neighborhoods to explore</p>
                </div>
              </div>
              <button className="filter-close" onClick={onClose}>&times;</button>
            </div>

            <div className="filter-search">
              <input
                type="text"
                placeholder="Search neighborhoods..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
            </div>

            <div className="filter-content">
              {loading ? (
                <div className="filter-loading">Loading neighborhoods...</div>
              ) : filteredNeighborhoods.length > 0 ? (
                <div className="neighborhoods-grid">
                  {filteredNeighborhoods.map((neighborhood, index) => (
                    <div
                      key={neighborhood.id}
                      className="neighborhood-card"
                      onClick={() => onSelectNeighborhood(neighborhood)}
                    >
                      <img
                        src={getNeighborhoodImage(neighborhood, index)}
                        alt={neighborhood.name}
                        className="neighborhood-card-image"
                      />
                      <div className="neighborhood-card-overlay">
                        <h4>{neighborhood.name}</h4>
                        <p>{neighborhood.description}</p>
                      </div>
                      <span className="neighborhood-card-arrow">&rarr;</span>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="filter-empty">No neighborhoods found</div>
              )}
            </div>

            <div className="filter-footer">
              <p>Click a neighborhood to explore businesses, events & properties</p>
            </div>
          </div>
        </div>
      );
    }

    // Neighborhood Modal Component
    function NeighborhoodModal({ neighborhood, onClose }) {
      // Close on escape key
      useEffect(() => {
        const handleEscape = (e) => {
          if (e.key === 'Escape') onClose();
        };
        window.addEventListener('keydown', handleEscape);
        return () => window.removeEventListener('keydown', handleEscape);
      }, [onClose]);

      return (
        <div className="modal-overlay" onClick={(e) => e.target === e.currentTarget && onClose()}>
          <div className="neighborhood-modal">
            <button className="modal-close" onClick={onClose}>&times;</button>
            <img src={neighborhood.image} alt={neighborhood.name} className="modal-hero" />
            <div className="modal-content">
              <div className="modal-header">
                <h2 className="modal-title">{neighborhood.name}</h2>
                <div className="modal-vibe">
                  {neighborhood.vibes.map((vibe, i) => (
                    <span key={i} className="vibe-tag">{vibe}</span>
                  ))}
                </div>
              </div>
              <p className="modal-description">{neighborhood.description}</p>

              <div className="modal-section">
                <h3 className="modal-section-title">Popular Spots</h3>
                <ul className="modal-list">
                  {neighborhood.businesses.map((biz, i) => (
                    <li key={i}>
                      <strong>{biz.name}</strong>
                      <span>{biz.type}</span>
                    </li>
                  ))}
                </ul>
              </div>

              <div className="modal-section">
                <h3 className="modal-section-title">Events & Activities</h3>
                <ul className="modal-list">
                  {neighborhood.events.map((evt, i) => (
                    <li key={i}>
                      <strong>{evt.name}</strong>
                      <span>{evt.type}</span>
                    </li>
                  ))}
                </ul>
              </div>

              <div className="modal-section">
                <h3 className="modal-section-title">Sample Properties</h3>
                <ul className="modal-list">
                  {neighborhood.properties.map((prop, i) => (
                    <li key={i}>
                      <strong>{prop.price}</strong>
                      <span>{prop.details}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // ============================================
    // DETAIL PAGE COMPONENTS
    // ============================================

    // Blog Post Detail Page
    function BlogPostDetail({ post, onBack }) {
      // Format content with paragraphs and bold text
      const formatContent = (content) => {
        if (!content) return null;
        return content.split('\n\n').map((paragraph, index) => {
          // Handle **bold** text
          const formattedParagraph = paragraph.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
          return (
            <p key={index} dangerouslySetInnerHTML={{ __html: formattedParagraph }} />
          );
        });
      };

      return (
        <div className="detail-page">
          <div className="detail-hero">
            <img src={post.image} alt={post.title} className="detail-hero-image" />
            <div className="detail-hero-overlay">
              <span className="detail-category-badge">{post.category}</span>
              <h1 className="detail-title">{post.title}</h1>
              <div className="detail-meta">
                <span>By {post.author}</span>
                <span>{post.created_at}</span>
              </div>
            </div>
          </div>

          <div className="detail-content">
            <button className="back-button" onClick={onBack}>
               Back to Stories
            </button>

            {post.video_url && (
              <VideoEmbed url={post.video_url} />
            )}

            {formatContent(post.content)}

            {post.author_bio && (
              <div className="author-bio">
                <div className="author-avatar">
                  {post.author.charAt(0)}
                </div>
                <div className="author-info">
                  <h4>{post.author}</h4>
                  <p>{post.author_bio}</p>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    // Business Detail Page
    function BusinessDetail({ business, onBack }) {
      return (
        <div className="detail-page">
          <div className="detail-hero">
            <img src={business.image} alt={business.title} className="detail-hero-image" />
            <div className="detail-hero-overlay">
              <span className="detail-category-badge">{business.badge}</span>
              <h1 className="detail-title">{business.title}</h1>
              <div className="detail-meta">
                <span> {business.neighborhood}</span>
                <span> {business.category}</span>
              </div>
            </div>
          </div>

          <div className="detail-content">
            <button className="back-button" onClick={onBack}>
               Back to Directory
            </button>

            <p>{business.description}</p>

            <div className="contact-cards">
              {business.phone && (
                <div className="contact-card">
                  <div className="contact-card-icon"></div>
                  <div className="contact-card-label">Phone</div>
                  <div className="contact-card-value">
                    <a href={`tel:${business.phone}`}>{business.phone}</a>
                  </div>
                </div>
              )}
              {business.website && (
                <div className="contact-card">
                  <div className="contact-card-icon"></div>
                  <div className="contact-card-label">Website</div>
                  <div className="contact-card-value">
                    <a href={business.website} target="_blank" rel="noopener noreferrer">Visit Site</a>
                  </div>
                </div>
              )}
              {business.address && (
                <div className="contact-card">
                  <div className="contact-card-icon"></div>
                  <div className="contact-card-label">Address</div>
                  <div className="contact-card-value">{business.address}</div>
                </div>
              )}
            </div>

            <div style={{background: '#f0f0f0', borderRadius: '12px', height: '250px', display: 'flex', alignItems: 'center', justifyContent: 'center', marginTop: '2rem', color: 'var(--text-light)'}}>
              Map placeholder - {business.neighborhood}
            </div>
          </div>
        </div>
      );
    }

    // Event Detail Page
    function EventDetail({ event, onBack }) {
      // Parse date for badge display
      const getDateParts = (dateStr) => {
        if (!dateStr) return { month: '', day: '' };
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const parts = dateStr.split(' ');
        if (parts.length >= 2) {
          return { month: parts[0].substring(0, 3), day: parts[1].replace(',', '').split('-')[0] };
        }
        return { month: dateStr.substring(0, 3), day: '' };
      };

      const dateParts = getDateParts(event.date);

      return (
        <div className="detail-page">
          <div className="detail-hero">
            <img src={event.image} alt={event.title} className="detail-hero-image" />
            <div className="event-date-badge">
              <div className="event-date-month">{dateParts.month}</div>
              <div className="event-date-day">{dateParts.day}</div>
            </div>
            <div className="detail-hero-overlay">
              <span className="detail-category-badge">{event.badge}</span>
              <h1 className="detail-title">{event.title}</h1>
              <div className="detail-meta">
                <span> {event.date}</span>
                <span> {event.location}</span>
              </div>
            </div>
          </div>

          <div className="detail-content">
            <button className="back-button" onClick={onBack}>
               Back to Events
            </button>

            <p>{event.description}</p>

            {event.video_url && (
              <VideoEmbed url={event.video_url} />
            )}

            <div className="contact-cards">
              <div className="contact-card">
                <div className="contact-card-icon"></div>
                <div className="contact-card-label">Date</div>
                <div className="contact-card-value">{event.date}</div>
              </div>
              <div className="contact-card">
                <div className="contact-card-icon"></div>
                <div className="contact-card-label">Location</div>
                <div className="contact-card-value">{event.location}</div>
              </div>
            </div>

            {event.ticket_url && (
              <a href={event.ticket_url} target="_blank" rel="noopener noreferrer" className="detail-cta-button" style={{marginTop: '2rem'}}>
                Get Tickets
              </a>
            )}
          </div>
        </div>
      );
    }

    // Event Detail V2 - Enhanced Event Detail Page
    function EventDetailV2({ event, onBack, onNavigate }) {
      const getDateParts = (dateStr) => {
        if (!dateStr) return { month: '', day: '' };
        const d = new Date(dateStr);
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        return { month: months[d.getMonth()], day: d.getDate().toString() };
      };

      const dateParts = getDateParts(event.date);
      const isPastEvent = new Date(event.date) < new Date();

      const getRecurringText = (pattern) => {
        if (!pattern) return null;
        const texts = { weekly: 'Every Week', monthly: 'Monthly', annual: 'Annual Event' };
        return texts[pattern];
      };

      const formatDisplayDate = (dateStr) => {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        return d.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      };

      const getMapEmbedUrl = (address) => {
        const encoded = encodeURIComponent(address);
        return `https://maps.google.com/maps?q=${encoded}&output=embed`;
      };

      const relatedEvents = demoListings
        .filter(l => l.type === 'event' && l.id !== event.id && l.status === 'approved')
        .filter(l => l.category === event.category || l.neighborhood === event.neighborhood)
        .slice(0, 3);

      const handleEventClick = (evt) => {
        const detailItem = { ...evt, title: evt.name, badge: evt.category, location: evt.neighborhood };
        onNavigate('detail', 'event', detailItem);
      };

      return (
        <div className="event-detail-v2">
          <div className="event-main">
            <div className="event-hero-v2">
              <img src={event.image} alt={event.name || event.title} className="event-hero-image" />
              <div className="event-datetime-badge">
                <div className="event-datetime-month">{dateParts.month}</div>
                <div className="event-datetime-day">{dateParts.day}</div>
                {event.start_time && <div className="event-datetime-time">{event.start_time}</div>}
              </div>
              <div className="event-hero-overlay">
                <div className="event-hero-badges">
                  <span className="event-category-badge">{event.category}</span>
                  {event.featured && <span className="event-featured-badge">Featured</span>}
                  {isPastEvent && <span className="event-past-badge">Past Event</span>}
                  {getRecurringText(event.recurring_pattern) && (
                    <span className="event-recurring-badge">{getRecurringText(event.recurring_pattern)}</span>
                  )}
                </div>
                <h1 className="event-hero-title">{event.name || event.title}</h1>
                <p className="event-hero-neighborhood">{event.neighborhood}</p>
              </div>
            </div>

            <div className="event-content">
              <button className="event-back-btn" onClick={onBack}> Back to Events</button>

              <div className="event-info-grid">
                <div className="event-info-card">
                  <div className="event-info-icon"></div>
                  <div className="event-info-content">
                    <div className="event-info-label">Date & Time</div>
                    <div className="event-info-value">{formatDisplayDate(event.date)}</div>
                    {(event.start_time || event.end_time) && (
                      <div className="event-info-subvalue">{event.start_time}{event.end_time ? ` - ${event.end_time}` : ''}</div>
                    )}
                  </div>
                </div>
                {(event.venue_name || event.venue_address) && (
                  <div className="event-info-card">
                    <div className="event-info-icon"></div>
                    <div className="event-info-content">
                      <div className="event-info-label">Location</div>
                      <div className="event-info-value">{event.venue_name || event.neighborhood}</div>
                      {event.venue_address && <div className="event-info-subvalue">{event.venue_address}</div>}
                    </div>
                  </div>
                )}
                {event.organizer_name && (
                  <div className="event-info-card">
                    <div className="event-info-icon"></div>
                    <div className="event-info-content">
                      <div className="event-info-label">Organizer</div>
                      <div className="event-info-value">{event.organizer_name}</div>
                      {event.organizer_phone && <div className="event-info-subvalue">{event.organizer_phone}</div>}
                    </div>
                  </div>
                )}
                {event.ticket_price && (
                  <div className="event-info-card">
                    <div className="event-info-icon"></div>
                    <div className="event-info-content">
                      <div className="event-info-label">Admission</div>
                      <div className="event-info-value">{event.ticket_price}</div>
                    </div>
                  </div>
                )}
              </div>

              <div className="event-description">
                <h2>About This Event</h2>
                <p>{event.description}</p>
              </div>

              {event.gallery_images && event.gallery_images.length > 0 && (
                <div className="event-gallery">
                  <h2>Event Photos</h2>
                  <div className="event-gallery-grid">
                    {event.gallery_images.map((img, idx) => (
                      <div key={idx} className="event-gallery-thumb"><img src={img} alt={`Photo ${idx + 1}`} /></div>
                    ))}
                  </div>
                </div>
              )}

              {event.venue_address && (
                <div className="event-map-container">
                  <iframe src={getMapEmbedUrl(event.venue_address)} allowFullScreen loading="lazy" title="Event Location" />
                </div>
              )}

              {event.tags && event.tags.length > 0 && (
                <div className="event-tags">
                  <h2>Tags</h2>
                  <div className="event-tags-list">
                    {event.tags.map((tag, idx) => <span key={idx} className="event-tag">{tag}</span>)}
                  </div>
                </div>
              )}

              <div className="event-reviews-section">
                <h2>Reviews & Ratings</h2>
                <p>Reviews coming soon. Be the first to share your experience!</p>
              </div>

              {relatedEvents.length > 0 && (
                <div className="related-events-section">
                  <h2>Related Events</h2>
                  <div className="related-events-grid">
                    {relatedEvents.map(evt => (
                      <div key={evt.id} className="related-event-card" onClick={() => handleEventClick(evt)}>
                        <img src={evt.image} alt={evt.name} className="related-event-image" />
                        <div className="related-event-content">
                          <div className="related-event-date">{formatDisplayDate(evt.date)}</div>
                          <h3 className="related-event-title">{evt.name}</h3>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>

          <aside className="event-sidebar">
            {(event.ticket_url || event.rsvp_url) && !isPastEvent && (
              <div className="event-ticket-cta">
                <div className="event-ticket-price">{event.ticket_price || 'Free'}</div>
                <a href={event.ticket_url || event.rsvp_url} target="_blank" rel="noopener noreferrer">
                  {event.ticket_url ? 'Get Tickets' : 'RSVP Now'}
                </a>
              </div>
            )}
            {isPastEvent && (
              <div className="event-sidebar-cta">
                <h3>This Event Has Passed</h3>
                <p>Check out similar upcoming events in the {event.category} category.</p>
              </div>
            )}
            <NewsletterSignup />
            <SidebarAd />
            <div className="event-sidebar-cta">
              <h3>Have an Event?</h3>
              <p>Get your event featured on ATL Vibes & Views</p>
              <button onClick={() => onNavigate && onNavigate('submit', 'event')}>Submit Your Event</button>
            </div>
            <div className="event-sidebar-cta">
              <h3>Get Featured</h3>
              <p>Boost your event visibility with premium placement</p>
              <button>Learn More</button>
            </div>
          </aside>
        </div>
      );
    }

    // Property Detail Page
    function PropertyDetail({ property, onBack }) {
      return (
        <div className="detail-page property-detail-page">
          <div className="detail-hero">
            <img src={property.image} alt={property.address} className="detail-hero-image" />
            <div className="property-price-badge">{property.price}</div>
            <div className="detail-hero-overlay">
              <h1 className="detail-title">{property.address}</h1>
              <div className="detail-meta">
                <span> {property.neighborhood}</span>
              </div>
            </div>
          </div>

          <div className="detail-content">
            <button className="back-button" onClick={onBack} style={{background: 'rgba(255,255,255,0.1)', borderColor: 'rgba(255,255,255,0.3)', color: 'white'}}>
               Back to Properties
            </button>

            <div className="property-specs-grid">
              <div className="property-spec">
                <div className="property-spec-value">{property.beds}</div>
                <div className="property-spec-label">Bedrooms</div>
              </div>
              <div className="property-spec">
                <div className="property-spec-value">{property.baths}</div>
                <div className="property-spec-label">Bathrooms</div>
              </div>
              <div className="property-spec">
                <div className="property-spec-value">{property.sqft}</div>
                <div className="property-spec-label">Square Feet</div>
              </div>
            </div>

            <p>This stunning property in {property.neighborhood} offers {property.beds} bedrooms and {property.baths} bathrooms across {property.sqft} square feet of living space. Located in one of Atlanta's most desirable neighborhoods, this home features modern amenities and classic Southern charm.</p>

            <p>Contact us today to schedule a viewing and discover why this property could be your perfect Atlanta home.</p>

            <button className="detail-cta-button dark" style={{marginTop: '2rem'}}>
              Contact Agent
            </button>
          </div>
        </div>
      );
    }

    // ============================================
    // CATEGORY LANDING PAGE COMPONENTS
    // ============================================

    // Newsletter Signup Sidebar Component
    function NewsletterSignup() {
      const [email, setEmail] = useState('');
      const [submitted, setSubmitted] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        if (email) {
          setSubmitted(true);
        }
      };

      return (
        <div className="sidebar-newsletter">
          <h3>Get the Latest</h3>
          <p>Atlanta food news delivered weekly</p>
          {submitted ? (
            <p style={{color: 'var(--primary-red)', fontWeight: '600'}}>Thanks for subscribing!</p>
          ) : (
            <form onSubmit={handleSubmit}>
              <input
                type="email"
                placeholder="your@email.com"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
              />
              <button type="submit">Subscribe</button>
            </form>
          )}
        </div>
      );
    }

    // Sidebar Ad Placeholder Component
    function SidebarAd() {
      return (
        <div className="sidebar-ad">
          <span>Advertisement</span>
        </div>
      );
    }

    // Neighborhoods Module Sidebar Component
    function NeighborhoodsModule({ neighborhoods }) {
      return (
        <div className="sidebar-neighborhoods">
          <h3>Browse by Neighborhood</h3>
          <div className="neighborhoods-list">
            {neighborhoods.map(n => (
              <a key={n} className="neighborhood-link" href={`#${n.toLowerCase().replace(/\s+/g, '-')}`}>
                <span></span> {n}
              </a>
            ))}
          </div>
        </div>
      );
    }

    // Submit Eats CTA Sidebar Component
    function SubmitEatsCTA({ onSubmit }) {
      return (
        <div className="sidebar-cta">
          <h3>Own a Restaurant?</h3>
          <p>Get your business featured on ATL Vibes</p>
          <button onClick={onSubmit}>Submit Your Listing</button>
        </div>
      );
    }

    // Events Landing Page Component
    function EventsLandingPage({ onBack, onNavigate, onSubmit }) {
      const now = new Date();

      const formatDisplayDate = (dateStr) => {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        return d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
      };

      // Get all approved events
      const allEvents = demoListings
        .filter(l => l.type === 'event' && l.status === 'approved')
        .sort((a, b) => new Date(a.date) - new Date(b.date));

      // Featured events (featured: true and future dates)
      const featuredEvents = allEvents
        .filter(e => e.featured && new Date(e.date) >= now)
        .slice(0, 4);

      // Upcoming events (future dates, not including featured ones already shown)
      const upcomingEvents = allEvents
        .filter(e => new Date(e.date) >= now && !featuredEvents.find(f => f.id === e.id))
        .slice(0, 6);

      // Check if there are past events
      const hasPastEvents = allEvents.some(e => new Date(e.date) < now);

      const handleEventClick = (evt) => {
        const detailItem = { ...evt, title: evt.name, badge: evt.category, location: evt.neighborhood };
        onNavigate('detail', 'event', detailItem);
      };

      return (
        <div className="events-landing">
          <div className="events-main">
            <button className="event-back-btn" onClick={onBack}> Back to Home</button>

            <div className="events-header">
              <h1>Upcoming Events in Atlanta</h1>
              <p>Discover festivals, concerts, food events, and community gatherings across the city</p>
            </div>

            {featuredEvents.length > 0 && (
              <section className="featured-events-section">
                <h2>Featured Events</h2>
                <div className="featured-events-grid">
                  {featuredEvents.map(evt => (
                    <div key={evt.id} className="featured-event-card" onClick={() => handleEventClick(evt)}>
                      <img src={evt.image} alt={evt.name} />
                      <span className="featured-event-badge">Featured</span>
                      <div className="featured-event-overlay">
                        <div className="featured-event-date">{formatDisplayDate(evt.date)}</div>
                        <h3 className="featured-event-title">{evt.name}</h3>
                      </div>
                    </div>
                  ))}
                </div>
              </section>
            )}

            <section className="upcoming-events-section">
              <h2>All Upcoming Events</h2>
              {upcomingEvents.length > 0 ? (
                <div className="events-grid">
                  {upcomingEvents.map(evt => (
                    <div key={evt.id} className="event-list-card" onClick={() => handleEventClick(evt)}>
                      <img src={evt.image} alt={evt.name} className="event-list-image" />
                      <div className="event-list-content">
                        <div className="event-list-date">{formatDisplayDate(evt.date)}</div>
                        <h3 className="event-list-title">{evt.name}</h3>
                        <p className="event-list-meta">{evt.neighborhood}  {evt.category}</p>
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                <p style={{color: 'var(--text-light)', fontStyle: 'italic'}}>No upcoming events at this time. Check back soon!</p>
              )}
            </section>

            {hasPastEvents && (
              <a className="past-events-link" onClick={() => onNavigate('past-events')}>
                View Past Events 
              </a>
            )}
          </div>

          <aside className="event-sidebar">
            <NewsletterSignup />
            <SidebarAd />
            <div className="event-sidebar-cta">
              <h3>Have an Event?</h3>
              <p>Get your event featured on ATL Vibes & Views</p>
              <button onClick={() => onSubmit && onSubmit()}>Submit Your Event</button>
            </div>
          </aside>
        </div>
      );
    }

    // Past Events Archive Component
    function PastEventsArchive({ onBack, onNavigate }) {
      const now = new Date();

      const formatDisplayDate = (dateStr) => {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        return d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });
      };

      // Get past events
      const pastEvents = demoListings
        .filter(l => l.type === 'event' && l.status === 'approved' && new Date(l.date) < now)
        .sort((a, b) => new Date(b.date) - new Date(a.date)); // Most recent first

      const handleEventClick = (evt) => {
        const detailItem = { ...evt, title: evt.name, badge: evt.category, location: evt.neighborhood };
        onNavigate('detail', 'event', detailItem);
      };

      return (
        <div className="events-landing">
          <div className="events-main">
            <button className="event-back-btn" onClick={onBack}> Back to Events</button>

            <div className="events-header">
              <h1>Past Events</h1>
              <p>Browse events that have already taken place</p>
            </div>

            <section className="upcoming-events-section">
              {pastEvents.length > 0 ? (
                <div className="events-grid">
                  {pastEvents.map(evt => (
                    <div key={evt.id} className="event-list-card" onClick={() => handleEventClick(evt)}>
                      <img src={evt.image} alt={evt.name} className="event-list-image" />
                      <div className="event-list-content">
                        <div className="event-list-date">
                          {formatDisplayDate(evt.date)}
                          <span className="past-event-label">Past</span>
                        </div>
                        <h3 className="event-list-title">{evt.name}</h3>
                        <p className="event-list-meta">{evt.neighborhood}  {evt.category}</p>
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                <p style={{color: 'var(--text-light)', fontStyle: 'italic'}}>No past events to display.</p>
              )}
            </section>
          </div>

          <aside className="event-sidebar">
            <div className="event-sidebar-cta primary">
              <h3>View Upcoming Events</h3>
              <p>Check out what's happening next in Atlanta</p>
              <button onClick={() => onNavigate('events')}>See Upcoming Events</button>
            </div>
            <NewsletterSignup />
            <SidebarAd />
          </aside>
        </div>
      );
    }

    // Eats & Drinks Landing Page Component
    function EatsDrinksLanding({ onBack, onNavigate, onSubmit }) {
      // Filter content for Eats & Drinks
      const eatsStories = demoBlogPosts
        .filter(p => p.category === 'Eats & Drinks' && p.status === 'published');

      const featuredStory = eatsStories.find(p => p.featured) || eatsStories[0];
      const additionalStories = eatsStories.filter(p => p.id !== featuredStory?.id).slice(0, 3);

      // Get food-related listings (businesses and events)
      const eatsListings = demoListings
        .filter(l =>
          (l.status === 'approved') &&
          (['Restaurant', 'Caf', 'Bar'].includes(l.category) || l.category === 'Food & Drink')
        )
        .slice(0, 4);

      // Neighborhoods with most food content
      const foodNeighborhoods = ['Buckhead', 'Midtown', 'Old Fourth Ward', 'West Midtown', 'Inman Park', 'Virginia-Highland'];

      return (
        <div className="category-landing">
          <div className="category-main">
            {/* Section Header */}
            <div className="category-header">
              <button className="category-back-btn" onClick={onBack}>
                 Back to Home
              </button>
              <h1>Eats & Drinks</h1>
              <p>Atlanta's food and beverage scene explored</p>
            </div>

            {/* Primary Featured Story */}
            {featuredStory && (
              <div
                className="primary-story-card"
                onClick={() => onNavigate('detail', 'blog', featuredStory)}
              >
                <img src={featuredStory.image} alt={featuredStory.title} className="primary-story-image" />
                <div className="primary-story-overlay">
                  <span className="primary-story-tag">{featuredStory.category}</span>
                  <h2 className="primary-story-title">{featuredStory.title}</h2>
                  <p className="primary-story-excerpt">{featuredStory.excerpt}</p>
                  <div className="primary-story-meta">
                    <span>By {featuredStory.author}</span>
                    <span>{featuredStory.created_at}</span>
                  </div>
                </div>
              </div>
            )}

            {/* Additional Featured Stories */}
            {additionalStories.length > 0 && (
              <section className="secondary-stories-section">
                <h2>More Stories</h2>
                <div className="secondary-stories-grid">
                  {additionalStories.map(story => (
                    <div
                      key={story.id}
                      className="secondary-story-card"
                      onClick={() => onNavigate('detail', 'blog', story)}
                    >
                      <img src={story.image} alt={story.title} className="secondary-story-image" />
                      <div className="secondary-story-content">
                        <div className="secondary-story-tag">{story.category}</div>
                        <h3 className="secondary-story-title">{story.title}</h3>
                      </div>
                    </div>
                  ))}
                </div>
              </section>
            )}

            {/* Upcoming Eats & Drinks Listings */}
            <section className="upcoming-listings">
              <h2>Featured Eats & Drinks</h2>
              <div className="listing-cards-grid">
                {eatsListings.map(listing => {
                  // Transform listing to match detail component expectations
                  const detailItem = listing.type === 'business'
                    ? { ...listing, title: listing.name, badge: listing.category }
                    : { ...listing, title: listing.name, badge: listing.category, location: listing.neighborhood };

                  return (
                    <div
                      key={listing.id}
                      className="listing-card"
                      onClick={() => onNavigate('detail', listing.type, detailItem)}
                    >
                      <img src={listing.image} alt={listing.name} className="listing-card-image" />
                      <div className="listing-card-content">
                        <div className="listing-card-category">
                          {listing.category}
                        </div>
                        <h3 className="listing-card-title">{listing.name}</h3>
                        <p className="listing-card-meta">
                          {listing.type === 'event' ? listing.date : listing.neighborhood}
                        </p>
                      </div>
                    </div>
                  );
                })}
              </div>
            </section>

            {/* See All CTA */}
            <a href="#directory" className="see-all-cta">
              See All Eats & Drinks 
            </a>
          </div>

          <aside className="category-sidebar">
            <NewsletterSignup />
            <SidebarAd />
            <NeighborhoodsModule neighborhoods={foodNeighborhoods} />
            <SubmitEatsCTA onSubmit={onSubmit} />
          </aside>
        </div>
      );
    }

    // Area Card Component for Homepage Map System V1
    // Displays selected area info with sticky positioning
    function AreaCard({ area, areaData, onExplore, onClose }) {
      if (!area || !areaData) return null;

      return (
        <div className="area-card">
          <button className="area-card-close" onClick={onClose} aria-label="Close"></button>
          <img src={areaData.image} alt={areaData.name} className="area-card-image" />
          <div className="area-card-content">
            <h3 className="area-card-title">{areaData.name}</h3>
            <p className="area-card-description">{areaData.shortDescription}</p>
            <div className="area-card-vibes">
              {areaData.vibes.map(vibe => (
                <span key={vibe} className="vibe-tag">{vibe}</span>
              ))}
            </div>
            <button className="area-card-btn" onClick={() => onExplore(area)}>
              Explore {areaData.name} 
            </button>
          </div>
        </div>
      );
    }

    // Illustrated Atlanta Map Component with SVG Region Overlays - 9 Core Areas
    // Updated for Homepage Map System V1 with selection state
    function AtlantaMap({ neighborhoods, onSelect, selectedArea, onAreaSelect, onClear }) {
      const [hoveredRegion, setHoveredRegion] = useState(null);
      const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });
      const mapRef = React.useRef(null);

      // 9 Consolidated Core Areas
      const regions = [
        { id: 'downtown', label: 'Downtown', path: 'M 40 50 L 58 48 L 62 62 L 52 68 L 38 65 Z' },
        { id: 'midtown', label: 'Midtown', path: 'M 45 28 L 72 30 L 74 48 L 58 48 L 45 45 Z' },
        { id: 'eastside', label: 'Eastside', path: 'M 72 30 L 100 32 L 100 68 L 75 70 L 62 62 L 58 48 L 74 48 L 72 30 Z' },
        { id: 'westside', label: 'Westside', path: 'M 0 22 L 45 20 L 45 45 L 40 50 L 38 65 L 15 60 L 0 52 Z' },
        { id: 'southwest', label: 'Southwest Atlanta', path: 'M 0 52 L 15 60 L 30 65 L 25 100 L 0 100 Z' },
        { id: 'southeast', label: 'Southeast Atlanta', path: 'M 52 68 L 75 70 L 80 100 L 50 100 Z' },
        { id: 'buckhead', label: 'Buckhead', path: 'M 35 0 L 90 0 L 90 25 L 72 30 L 45 28 L 35 18 Z' },
        { id: 'south-atlanta', label: 'South Atlanta', path: 'M 30 65 L 52 68 L 50 100 L 25 100 Z' },
        { id: 'north-atlanta', label: 'North Atlanta', path: 'M 90 0 L 100 0 L 100 32 L 90 25 Z' }
      ];

      const handleRegionClick = (id) => {
        // If onAreaSelect is provided (homepage map system), use selection behavior
        if (onAreaSelect) {
          // Toggle selection: if already selected, deselect; otherwise select
          if (selectedArea === id) {
            onAreaSelect(null);
          } else {
            onAreaSelect(id);
          }
        } else {
          // Fallback to original navigation behavior
          window.location.href = `${id}.html`;
        }
      };

      const handleRegionHover = (id, e) => {
        setHoveredRegion(id);
        if (mapRef.current && e) {
          const rect = mapRef.current.getBoundingClientRect();
          setTooltipPos({
            x: e.clientX - rect.left,
            y: e.clientY - rect.top
          });
        }
      };

      const handleMouseMove = (e) => {
        if (hoveredRegion && mapRef.current) {
          const rect = mapRef.current.getBoundingClientRect();
          setTooltipPos({
            x: e.clientX - rect.left,
            y: e.clientY - rect.top
          });
        }
      };

      const handleRegionLeave = () => {
        setHoveredRegion(null);
      };

      const getRegionLabel = (id) => {
        const region = regions.find(r => r.id === id);
        return region ? region.label : '';
      };

      // Determine CSS class for region based on hover and selection state
      const getRegionClass = (regionId) => {
        let classes = 'map-region';
        if (hoveredRegion === regionId) classes += ' active';
        if (selectedArea === regionId) classes += ' selected';
        return classes;
      };

      return (
        <div className="illustrated-map-wrapper" ref={mapRef} onMouseMove={handleMouseMove}>
          <div className="map-image-container">
            {/* Full Color Map Image */}
            <img src="atlanta-map.png" alt="Atlanta Neighborhoods Map" className="illustrated-map-image" />
          </div>

          {/* SVG Overlay with Clickable Regions */}
          <svg
            className="map-svg-overlay"
            viewBox="0 0 100 100"
            preserveAspectRatio="none"
            onMouseLeave={handleRegionLeave}
          >
            {regions.map((region) => (
              <path
                key={region.id}
                d={region.path}
                className={getRegionClass(region.id)}
                onClick={() => handleRegionClick(region.id)}
                onMouseEnter={(e) => handleRegionHover(region.id, e)}
              />
            ))}
          </svg>

          {/* Hover Tooltip */}
          {hoveredRegion && (
            <div
              className="map-tooltip"
              style={{
                left: tooltipPos.x,
                top: tooltipPos.y - 40,
                transform: 'translateX(-50%)'
              }}
            >
              {getRegionLabel(hoveredRegion)}
            </div>
          )}

          {/* Clear Selection Button */}
          {selectedArea && onClear && (
            <button className="map-clear-btn" onClick={onClear}>
               Clear Selection
            </button>
          )}
        </div>
      );
    }

    // Area Page Component - Dedicated landing page for each Atlanta area
    function AreaPage({ area, neighborhoods, onBack, onSelectNeighborhood, onNavigateTo }) {
      const [latestPost, setLatestPost] = useState(null);
      const [businesses, setBusinesses] = useState([]);
      const [events, setEvents] = useState([]);
      const [areaNeighborhoods, setAreaNeighborhoods] = useState([]);
      const [loading, setLoading] = useState(true);
      const [email, setEmail] = useState('');
      const [newsletterSubmitted, setNewsletterSubmitted] = useState(false);
      const [newsletterLoading, setNewsletterLoading] = useState(false);

      // Area metadata for hero and SEO
      const areaData = {
        buckhead: {
          title: 'Buckhead',
          tagline: 'Atlanta\'s upscale district where luxury shopping meets vibrant nightlife',
          image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1600',
          vibes: ['Upscale', 'Shopping', 'Nightlife', 'Fine Dining']
        },
        midtown: {
          title: 'Midtown',
          tagline: 'The heart of Atlanta\'s arts, culture, and urban lifestyle',
          image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=1600',
          vibes: ['Arts District', 'Walkable', 'Parks', 'Cultural Hub']
        },
        downtown: {
          title: 'Downtown',
          tagline: 'Atlanta\'s business core with world-class attractions and sports',
          image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=1600',
          vibes: ['Business District', 'Sports', 'Attractions', 'Historic']
        },
        oldFourthWard: {
          title: 'Old Fourth Ward',
          tagline: 'Historic charm meets modern revival along the BeltLine',
          image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=1600',
          vibes: ['BeltLine', 'Historic', 'Trendy', 'Food Scene']
        },
        virginiaHighland: {
          title: 'Virginia-Highland',
          tagline: 'Atlanta\'s beloved walkable village with boutiques and brunch',
          image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1600',
          vibes: ['Walkable', 'Boutiques', 'Brunch', 'Family-Friendly']
        },
        inmanPark: {
          title: 'Inman Park',
          tagline: 'Victorian elegance and creative energy in Atlanta\'s first suburb',
          image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=1600',
          vibes: ['Victorian Homes', 'BeltLine', 'Creative', 'Historic']
        },
        westMidtown: {
          title: 'West Midtown',
          tagline: 'Atlanta\'s industrial-chic hub for food, art, and nightlife',
          image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=1600',
          vibes: ['Restaurants', 'Galleries', 'Industrial-Chic', 'Nightlife']
        },
        eastAtlanta: {
          title: 'East Atlanta',
          tagline: 'Eclectic vibes and live music in Atlanta\'s village scene',
          image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=1600',
          vibes: ['Live Music', 'Dive Bars', 'Eclectic', 'Community']
        },
        decatur: {
          title: 'Decatur',
          tagline: 'A city within a city with great schools, dining, and walkability',
          image: 'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=1600',
          vibes: ['Family-Friendly', 'Downtown Square', 'Dining', 'Progressive']
        },
        grantPark: {
          title: 'Grant Park',
          tagline: 'Historic homes and Zoo Atlanta in a tight-knit community',
          image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1600',
          vibes: ['Historic Homes', 'Zoo Atlanta', 'Parks', 'Community']
        }
      };

      const currentArea = areaData[area.id] || {
        title: area.name,
        tagline: area.description,
        image: area.image,
        vibes: area.vibes || []
      };

      useEffect(() => {
        loadAreaContent();
      }, [area.id]);

      const loadAreaContent = async () => {
        setLoading(true);
        try {
          const [post, bizList, eventList, neighborhoodList] = await Promise.all([
            mockSupabase.blogPosts.getLatestByArea(area.id),
            mockSupabase.businesses.getByArea(area.id, 6),
            mockSupabase.events.getByArea(area.id, 6),
            mockSupabase.neighborhoods.getByArea(area.id)
          ]);
          setLatestPost(post);
          setBusinesses(bizList);
          setEvents(eventList);
          setAreaNeighborhoods(neighborhoodList.slice(0, 9));
        } catch (err) {
          console.error('Error loading area content:', err);
        }
        setLoading(false);
      };

      const handleNewsletterSubmit = async (e) => {
        e.preventDefault();
        if (!email) return;
        setNewsletterLoading(true);
        await new Promise(r => setTimeout(r, 1000));
        setNewsletterSubmitted(true);
        setNewsletterLoading(false);
      };

      const schemaData = {
        "@context": "https://schema.org",
        "@type": "Place",
        "name": currentArea.title + ", Atlanta",
        "description": currentArea.tagline,
        "address": {
          "@type": "PostalAddress",
          "addressLocality": currentArea.title,
          "addressRegion": "GA",
          "addressCountry": "US"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": area.lat,
          "longitude": area.lng
        },
        "image": currentArea.image
      };

      return (
        <div className="area-page">
          <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(schemaData) }} />

          <section className="area-hero">
            <img src={currentArea.image} alt={currentArea.title} className="area-hero-image" />
            <div className="area-hero-overlay"></div>
            <div className="area-hero-content">
              <button className="area-back-button" onClick={onBack}>
                <span>&larr;</span> Back to Atlanta
              </button>
              <h1 className="area-hero-title">{currentArea.title}</h1>
              <p className="area-hero-tagline">{currentArea.tagline}</p>
              <div className="area-vibe-tags">
                {currentArea.vibes.map((vibe, i) => (
                  <span key={i} className="area-vibe-tag">{vibe}</span>
                ))}
              </div>
            </div>
          </section>

          <div className="area-content-wrapper">
            <main className="area-main-content">
              {latestPost && (
                <section className="area-featured-section">
                  <h2 className="area-section-title">Latest from {currentArea.title}</h2>
                  <div className="area-featured-post" onClick={() => onNavigateTo('detail', 'blog', latestPost)}>
                    <img src={latestPost.image} alt={latestPost.title} className="area-featured-post-image" />
                    <div className="area-featured-post-content">
                      <span className="area-featured-post-category">{latestPost.category}</span>
                      <h3 className="area-featured-post-title">{latestPost.title}</h3>
                      <p className="area-featured-post-excerpt">{latestPost.excerpt}</p>
                      <div className="area-featured-post-meta">
                        <span>By {latestPost.author}</span>
                        <span>{latestPost.created_at}</span>
                      </div>
                    </div>
                  </div>
                </section>
              )}

              {areaNeighborhoods.length > 0 && (
                <section className="area-map-section">
                  <h2 className="area-section-title">Explore {currentArea.title} Neighborhoods</h2>
                  <div className="area-neighborhoods-grid">
                    {areaNeighborhoods.map((neighborhood, i) => (
                      <div key={neighborhood.id} className="area-neighborhood-card" onClick={() => onSelectNeighborhood(neighborhood)}>
                        <div className="area-neighborhood-name">{neighborhood.name}</div>
                        <div className="area-neighborhood-desc">{neighborhood.description}</div>
                      </div>
                    ))}
                  </div>
                </section>
              )}

              <div className="area-inline-ad">
                <div className="area-inline-ad-label">Advertisement</div>
                <div className="area-inline-ad-content">Your Ad Here - Partner with ATL Vibes & Views</div>
              </div>

              <section className="area-listings-section">
                <h2 className="area-section-title">Featured Businesses</h2>
                {businesses.length > 0 ? (
                  <div className="area-listings-grid">
                    {businesses.map((biz, i) => (
                      <div key={biz.id} className={`area-listing-card ${biz.package === 'premium' || biz.package === 'pro' ? 'featured' : ''}`} onClick={() => onNavigateTo('detail', 'business', biz)}>
                        <img src={biz.image} alt={biz.name} className="area-listing-image" />
                        <div className="area-listing-content">
                          <span className="area-listing-badge">{biz.category}</span>
                          <h4 className="area-listing-title">{biz.name}</h4>
                          <p className="area-listing-desc">{biz.description}</p>
                          <div className="area-listing-meta"><span> {biz.neighborhood}</span></div>
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  <p style={{color: 'var(--text-light)', fontStyle: 'italic'}}>No businesses listed in {currentArea.title} yet. Be the first to add yours!</p>
                )}
              </section>

              <section className="area-listings-section">
                <h2 className="area-section-title">Upcoming Events</h2>
                {events.length > 0 ? (
                  <div className="area-listings-grid">
                    {events.map((evt, i) => (
                      <div key={evt.id} className={`area-listing-card ${evt.package === 'premium' ? 'featured' : ''}`} onClick={() => onNavigateTo('detail', 'event', evt)}>
                        <img src={evt.image} alt={evt.name} className="area-listing-image" />
                        <div className="area-listing-content">
                          <span className="area-listing-badge">{evt.category}</span>
                          <h4 className="area-listing-title">{evt.name}</h4>
                          <p className="area-listing-desc">{evt.description}</p>
                          <div className="area-listing-meta"><span> {evt.date}</span></div>
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  <p style={{color: 'var(--text-light)', fontStyle: 'italic'}}>No upcoming events in {currentArea.title}. Submit yours today!</p>
                )}
              </section>
            </main>

            <aside className="area-sidebar">
              <div className="area-sidebar-ad">
                <div className="area-sidebar-ad-label">Advertisement</div>
                <div className="area-sidebar-ad-placeholder small">300 x 250</div>
              </div>

              <div className="area-newsletter-box">
                <h3 className="area-newsletter-title">Stay in the Know</h3>
                <p className="area-newsletter-desc">Get the latest {currentArea.title} news, events, and insider tips delivered weekly.</p>
                {newsletterSubmitted ? (
                  <div className="area-newsletter-success">Thanks for subscribing! Check your inbox soon.</div>
                ) : (
                  <form className="area-newsletter-form" onSubmit={handleNewsletterSubmit}>
                    <input type="email" className="area-newsletter-input" placeholder="Your email address" value={email} onChange={(e) => setEmail(e.target.value)} required />
                    <button type="submit" className="area-newsletter-button" disabled={newsletterLoading}>{newsletterLoading ? 'Subscribing...' : 'Subscribe'}</button>
                  </form>
                )}
              </div>

              <div className="area-sidebar-ad">
                <div className="area-sidebar-ad-label">Advertisement</div>
                <div className="area-sidebar-ad-placeholder large">300 x 600</div>
              </div>

              <div className="area-quick-links">
                <h4 className="area-quick-links-title">Quick Links</h4>
                <div className="area-quick-link" onClick={() => onNavigateTo('home')}><div className="area-quick-link-icon"></div><span>Back to Home</span></div>
                <div className="area-quick-link" onClick={onBack}><div className="area-quick-link-icon"></div><span>View All Areas</span></div>
                <div className="area-quick-link" onClick={() => window.location.hash = '#directory'}><div className="area-quick-link-icon"></div><span>Business Directory</span></div>
                <div className="area-quick-link" onClick={() => window.location.hash = '#events'}><div className="area-quick-link-icon"></div><span>All Events</span></div>
                <div className="area-quick-link" onClick={() => window.location.hash = '#properties'}><div className="area-quick-link-icon"></div><span>Real Estate</span></div>
              </div>
            </aside>
          </div>
        </div>
      );
    }

    // Neighborhood Page Component - Individual neighborhood detail page
    function NeighborhoodPage({ neighborhood, onBack, onNavigateTo }) {
      const [businesses, setBusinesses] = useState([]);
      const [events, setEvents] = useState([]);
      const [stories, setStories] = useState([]);
      const [relatedNeighborhoods, setRelatedNeighborhoods] = useState([]);
      const [featuredPost, setFeaturedPost] = useState(null);
      const [loading, setLoading] = useState(true);
      const [email, setEmail] = useState('');
      const [newsletterSubmitted, setNewsletterSubmitted] = useState(false);
      const [newsletterLoading, setNewsletterLoading] = useState(false);

      // Area display names for the back button
      const areaNames = {
        buckhead: 'Buckhead',
        midtown: 'Midtown',
        downtown: 'Downtown',
        oldFourthWard: 'Old Fourth Ward',
        virginiaHighland: 'Virginia-Highland',
        inmanPark: 'Inman Park',
        westMidtown: 'West Midtown',
        eastAtlanta: 'East Atlanta',
        decatur: 'Decatur',
        grantPark: 'Grant Park'
      };

      useEffect(() => {
        loadNeighborhoodContent();
      }, [neighborhood.id]);

      const loadNeighborhoodContent = async () => {
        setLoading(true);
        try {
          const [bizList, eventList, storyList, relatedList, featured] = await Promise.all([
            mockSupabase.neighborhoodData.getBusinessesByNeighborhood(neighborhood.id, 6),
            mockSupabase.neighborhoodData.getEventsByNeighborhood(neighborhood.id, 6),
            mockSupabase.neighborhoodData.getStoriesByNeighborhood(neighborhood.id),
            mockSupabase.neighborhoodData.getRelatedNeighborhoods(neighborhood),
            neighborhood.featuredPostId ? mockSupabase.neighborhoodData.getFeaturedPost(neighborhood.featuredPostId) : null
          ]);
          setBusinesses(bizList);
          setEvents(eventList);
          setStories(storyList);
          setRelatedNeighborhoods(relatedList);
          setFeaturedPost(featured);
        } catch (err) {
          console.error('Error loading neighborhood content:', err);
        }
        setLoading(false);
      };

      const handleNewsletterSubmit = async (e) => {
        e.preventDefault();
        if (!email) return;
        setNewsletterLoading(true);
        await new Promise(r => setTimeout(r, 1000));
        setNewsletterSubmitted(true);
        setNewsletterLoading(false);
      };

      // Schema.org structured data for SEO
      const schemaData = {
        "@context": "https://schema.org",
        "@type": "Place",
        "name": neighborhood.name + ", Atlanta",
        "description": neighborhood.description,
        "address": {
          "@type": "PostalAddress",
          "addressLocality": neighborhood.name,
          "addressRegion": "GA",
          "addressCountry": "US"
        },
        "image": neighborhood.image
      };

      return (
        <div className="neighborhood-page">
          <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(schemaData) }} />

          {/* Header */}
          <header className="neighborhood-header">
            <button className="neighborhood-back-btn" onClick={onBack}>
              <span>&larr;</span> Back to {areaNames[neighborhood.area] || 'Atlanta'}
            </button>
            <div className="neighborhood-title-row">
              <h1 className="neighborhood-title">{neighborhood.name}</h1>
              {neighborhood.vibes && neighborhood.vibes.length > 0 && (
                <div className="neighborhood-vibe-tags">
                  {neighborhood.vibes.map((vibe, i) => (
                    <span key={i} className="neighborhood-vibe-tag">{vibe}</span>
                  ))}
                </div>
              )}
            </div>
          </header>

          {/* Featured Story Hero */}
          {featuredPost ? (
            <div
              className="neighborhood-featured-hero"
              onClick={() => onNavigateTo('detail', 'blog', featuredPost)}
            >
              <img
                src={featuredPost.image}
                alt={featuredPost.title}
                className="neighborhood-featured-hero-image"
              />
              <div className="neighborhood-featured-hero-overlay"></div>
              <div className="neighborhood-featured-hero-content">
                <span className="neighborhood-featured-tag">{featuredPost.category}</span>
                <h2 className="neighborhood-featured-title">{featuredPost.title}</h2>
                <p className="neighborhood-featured-excerpt">{featuredPost.excerpt}</p>
                <div className="neighborhood-featured-meta">
                  <span>By {featuredPost.author}</span>
                  <span>{featuredPost.created_at}</span>
                </div>
              </div>
            </div>
          ) : neighborhood.image && (
            <div className="neighborhood-featured-hero" style={{height: '250px'}}>
              <img
                src={neighborhood.image}
                alt={neighborhood.name}
                className="neighborhood-featured-hero-image"
              />
              <div className="neighborhood-featured-hero-overlay"></div>
              <div className="neighborhood-featured-hero-content">
                <p className="neighborhood-featured-excerpt" style={{maxWidth: '800px'}}>
                  {neighborhood.description}
                </p>
              </div>
            </div>
          )}

          {/* Content Wrapper */}
          <div className="neighborhood-content-wrapper">
            <main className="neighborhood-main-content">
              {/* Businesses Section */}
              <section className="neighborhood-section">
                <h2 className="neighborhood-section-title">Local Businesses</h2>
                {loading ? (
                  <p style={{color: 'var(--text-light)'}}>Loading businesses...</p>
                ) : businesses.length > 0 ? (
                  <div className="neighborhood-listings-grid">
                    {businesses.map((biz) => (
                      <div
                        key={biz.id}
                        className={`neighborhood-listing-card ${biz.featured || biz.package === 'premium' || biz.package === 'pro' ? 'featured' : ''}`}
                        onClick={() => onNavigateTo('detail', 'business', biz)}
                      >
                        <img src={biz.image} alt={biz.name} className="neighborhood-listing-image" />
                        <div className="neighborhood-listing-content">
                          <span className="neighborhood-listing-badge">{biz.category}</span>
                          <h4 className="neighborhood-listing-title">{biz.name}</h4>
                          <p className="neighborhood-listing-desc">{biz.description}</p>
                          <div className="neighborhood-listing-meta">
                            <span> {biz.neighborhood}</span>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="neighborhood-empty-state">
                    No businesses listed in {neighborhood.name} yet. Be the first to add yours!
                  </div>
                )}
              </section>

              {/* Inline Ad */}
              <div className="neighborhood-inline-ad">
                <div className="neighborhood-inline-ad-label">Advertisement</div>
                <div className="neighborhood-inline-ad-content">Your Ad Here - Partner with ATL Vibes & Views</div>
              </div>

              {/* Events Section */}
              <section className="neighborhood-section">
                <h2 className="neighborhood-section-title">Upcoming Events</h2>
                {loading ? (
                  <p style={{color: 'var(--text-light)'}}>Loading events...</p>
                ) : events.length > 0 ? (
                  <div className="neighborhood-listings-grid">
                    {events.map((evt) => (
                      <div
                        key={evt.id}
                        className={`neighborhood-listing-card ${evt.featured || evt.package === 'premium' ? 'featured' : ''}`}
                        onClick={() => onNavigateTo('detail', 'event', evt)}
                      >
                        <img src={evt.image} alt={evt.name} className="neighborhood-listing-image" />
                        <div className="neighborhood-listing-content">
                          <span className="neighborhood-listing-badge">{evt.category}</span>
                          <h4 className="neighborhood-listing-title">{evt.name}</h4>
                          <p className="neighborhood-listing-desc">{evt.description}</p>
                          <div className="neighborhood-listing-meta">
                            <span> {evt.date}</span>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="neighborhood-empty-state">
                    No upcoming events in {neighborhood.name}. Submit yours today!
                  </div>
                )}
              </section>

              {/* Stories/Posts Section */}
              {stories.length > 0 && (
                <section className="neighborhood-section">
                  <h2 className="neighborhood-section-title">Stories from {neighborhood.name}</h2>
                  <div className="neighborhood-stories-grid">
                    {stories.slice(0, 4).map((story) => (
                      <div
                        key={story.id}
                        className="neighborhood-story-card"
                        onClick={() => onNavigateTo('detail', 'blog', story)}
                      >
                        <img src={story.image} alt={story.title} className="neighborhood-story-image" />
                        <div className="neighborhood-story-content">
                          <span className="neighborhood-story-category">{story.category}</span>
                          <h4 className="neighborhood-story-title">{story.title}</h4>
                          <span className="neighborhood-story-date">{story.created_at}</span>
                        </div>
                      </div>
                    ))}
                  </div>
                </section>
              )}
            </main>

            {/* Sidebar */}
            <aside className="neighborhood-sidebar">
              {/* Ad Placeholder (300x250) */}
              <div className="neighborhood-sidebar-ad">
                <div className="neighborhood-sidebar-ad-label">Advertisement</div>
                <div className="neighborhood-sidebar-ad-placeholder small">300 x 250</div>
              </div>

              {/* Related Neighborhoods */}
              {relatedNeighborhoods.length > 0 && (
                <div className="neighborhood-related-box">
                  <h3 className="neighborhood-related-title">Nearby in {areaNames[neighborhood.area]}</h3>
                  <div className="neighborhood-related-grid">
                    {relatedNeighborhoods.map((related) => (
                      <div
                        key={related.id}
                        className="neighborhood-related-card"
                        onClick={() => onNavigateTo('detail', 'neighborhood', related)}
                      >
                        <span className="neighborhood-related-name">{related.name}</span>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {/* Newsletter Signup */}
              <div className="neighborhood-newsletter-box">
                <h3 className="neighborhood-newsletter-title">{neighborhood.name} Updates</h3>
                <p className="neighborhood-newsletter-desc">
                  Get the latest news, events, and insider tips from {neighborhood.name} delivered to your inbox.
                </p>
                {newsletterSubmitted ? (
                  <div className="neighborhood-newsletter-success">
                    Thanks for subscribing! Check your inbox soon.
                  </div>
                ) : (
                  <form className="neighborhood-newsletter-form" onSubmit={handleNewsletterSubmit}>
                    <input
                      type="email"
                      className="neighborhood-newsletter-input"
                      placeholder="Your email address"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      required
                    />
                    <button
                      type="submit"
                      className="neighborhood-newsletter-button"
                      disabled={newsletterLoading}
                    >
                      {newsletterLoading ? 'Subscribing...' : 'Subscribe'}
                    </button>
                  </form>
                )}
              </div>

              {/* Ad Placeholder (300x600) */}
              <div className="neighborhood-sidebar-ad">
                <div className="neighborhood-sidebar-ad-label">Advertisement</div>
                <div className="neighborhood-sidebar-ad-placeholder large">300 x 600</div>
              </div>
            </aside>
          </div>
        </div>
      );
    }

    // CMS Portal Component - Content Management System for Client
    function CMSPortal({ onClose }) {
      const [activeTab, setActiveTab] = useState('overview');
      const [showEditModal, setShowEditModal] = useState(false);
      const [editItem, setEditItem] = useState(null);
      const [editType, setEditType] = useState('');
      const [showBlogPostForm, setShowBlogPostForm] = useState(false);
      const [editingBlogPost, setEditingBlogPost] = useState(null);
      const [blogPosts, setBlogPosts] = useState([...demoBlogPosts]);

      // Demo content state - in production, this would come from Supabase
      const [heroStory, setHeroStory] = useState({
        id: 'hero-1',
        category: 'Featured Story',
        title: 'The Renaissance of Old Fourth Ward',
        author: 'Marcus Johnson',
        date: 'January 27, 2026',
        image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1600',
        featured: true
      });

      const [editorsChoice, setEditorsChoice] = useState([
        { id: 'ec-1', tag: 'Culture', title: 'Ponce City Market: Where History Meets Innovation', date: '25 Jan 2026', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800', featured: true },
        { id: 'ec-2', tag: 'Food Scene', title: 'Best Brunch Spots in Inman Park', date: '24 Jan 2026', image: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800', featured: true },
        { id: 'ec-3', tag: 'Nightlife', title: 'Hidden Speakeasies You Need to Visit', date: '23 Jan 2026', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800', featured: true },
        { id: 'ec-4', tag: 'Art', title: 'Street Art Walking Tours in Atlanta', date: '22 Jan 2026', image: 'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=800', featured: false }
      ]);

      const [businesses, setBusinesses] = useState([
        { id: 'biz-1', badge: 'Restaurant', title: 'Buttermilk Kitchen', description: 'Farm-to-table Southern comfort food in Buckhead.', neighborhood: 'Buckhead', category: 'Dining', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800', featured: true },
        { id: 'biz-2', badge: 'Coffee Shop', title: 'Octane Coffee', description: 'Award-winning coffee roasters with multiple locations.', neighborhood: 'West Midtown', category: 'Caf', image: 'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800', featured: true },
        { id: 'biz-3', badge: 'Boutique', title: 'Bill Hallman', description: 'Curated fashion and lifestyle boutique in Virginia-Highland.', neighborhood: 'Virginia-Highland', category: 'Shopping', image: 'https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=800', featured: false }
      ]);

      const [events, setEvents] = useState([
        { id: 'evt-1', badge: 'Music Festival', title: 'Atlanta Jazz Festival 2026', description: 'Three days of world-class jazz performances in Piedmont Park.', date: 'May 25-27, 2026', location: 'Piedmont Park', image: 'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800', featured: true },
        { id: 'evt-2', badge: 'Art Exhibition', title: 'High Museum Contemporary Showcase', description: 'Exploring the intersection of technology and traditional art forms.', date: 'Feb 15 - Apr 30, 2026', location: 'High Museum', image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800', featured: true },
        { id: 'evt-3', badge: 'Food Festival', title: 'Atlanta Food & Wine Festival', description: 'Celebrating Southern cuisine with top chefs.', date: 'Mar 10-12, 2026', location: 'Midtown', image: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800', featured: false }
      ]);

      const [properties, setProperties] = useState([
        { id: 'prop-1', price: '$575,000', address: '123 Piedmont Ave NE', neighborhood: 'Midtown', beds: 3, baths: 2, sqft: '2,100', image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800', featured: true },
        { id: 'prop-2', price: '$425,000', address: '456 Highland Ave', neighborhood: 'Old Fourth Ward', beds: 2, baths: 2, sqft: '1,650', image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', featured: true },
        { id: 'prop-3', price: '$1,250,000', address: '789 West Paces Ferry Rd', neighborhood: 'Buckhead', beds: 5, baths: 4, sqft: '4,200', image: 'https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800', featured: true },
        { id: 'prop-4', price: '$350,000', address: '321 Memorial Dr', neighborhood: 'Grant Park', beds: 2, baths: 1, sqft: '1,200', image: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800', featured: false }
      ]);

      const openEditModal = (item, type) => {
        setEditItem({...item});
        setEditType(type);
        setShowEditModal(true);
      };

      const handleSave = () => {
        if (editType === 'hero') {
          setHeroStory(editItem);
        } else if (editType === 'story') {
          setEditorsChoice(prev => prev.map(s => s.id === editItem.id ? editItem : s));
        } else if (editType === 'business') {
          setBusinesses(prev => prev.map(b => b.id === editItem.id ? editItem : b));
        } else if (editType === 'event') {
          setEvents(prev => prev.map(e => e.id === editItem.id ? editItem : e));
        } else if (editType === 'property') {
          setProperties(prev => prev.map(p => p.id === editItem.id ? editItem : p));
        }
        setShowEditModal(false);
        setEditItem(null);
      };

      const toggleFeatured = (id, type) => {
        if (type === 'story') {
          setEditorsChoice(prev => prev.map(s => s.id === id ? {...s, featured: !s.featured} : s));
        } else if (type === 'business') {
          setBusinesses(prev => prev.map(b => b.id === id ? {...b, featured: !b.featured} : b));
        } else if (type === 'event') {
          setEvents(prev => prev.map(e => e.id === id ? {...e, featured: !e.featured} : e));
        } else if (type === 'property') {
          setProperties(prev => prev.map(p => p.id === id ? {...p, featured: !p.featured} : p));
        }
      };

      const navItems = [
        { id: 'overview', icon: '', label: 'Overview' },
        { id: 'blogposts', icon: '', label: 'Blog Posts' },
        { id: 'hero', icon: '', label: 'Featured News' },
        { id: 'stories', icon: '', label: "Editor's Choice" },
        { id: 'businesses', icon: '', label: 'Featured Business' },
        { id: 'events', icon: '', label: 'Upcoming Events' },
        { id: 'properties', icon: '', label: 'Featured Properties' },
        { id: 'integrations', icon: '', label: 'Integrations' }
      ];

      // Blog post handlers
      const loadBlogPosts = async () => {
        const posts = await mockSupabase.blogPosts.getAll();
        setBlogPosts(posts);
      };

      const handleDeleteBlogPost = async (id) => {
        if (confirm('Are you sure you want to delete this post?')) {
          await mockSupabase.blogPosts.delete(id);
          loadBlogPosts();
        }
      };

      const toggleBlogPostFeatured = async (id) => {
        const post = blogPosts.find(p => p.id === id);
        if (post) {
          await mockSupabase.blogPosts.update(id, { featured: !post.featured });
          loadBlogPosts();
        }
      };

      const toggleBlogPostStatus = async (id) => {
        const post = blogPosts.find(p => p.id === id);
        if (post) {
          const newStatus = post.status === 'published' ? 'draft' : 'published';
          await mockSupabase.blogPosts.update(id, { status: newStatus });
          loadBlogPosts();
        }
      };

      const stats = {
        totalViews: '24,582',
        submissions: '47',
        featured: editorsChoice.filter(s => s.featured).length + businesses.filter(b => b.featured).length + events.filter(e => e.featured).length + properties.filter(p => p.featured).length,
        hubspotLeads: '156'
      };

      return (
        <div className="cms-portal">
          {/* CMS Header */}
          <div className="cms-header">
            <div className="cms-header-content">
              <div>
                <h1>Content Management</h1>
                <p>Manage your featured content, businesses, events, and properties</p>
              </div>
              <div style={{display: 'flex', gap: '1rem', alignItems: 'center'}}>
                <span className="cms-demo-badge">Demo Mode</span>
                <button className="btn-secondary" style={{background: 'transparent', color: 'white', borderColor: 'rgba(255,255,255,0.3)'}} onClick={onClose}>
                  Back to Site
                </button>
              </div>
            </div>
          </div>

          {/* CMS Layout */}
          <div className="cms-layout">
            {/* Sidebar */}
            <div className="cms-sidebar">
              <div className="cms-sidebar-title">Content</div>
              {navItems.map(item => (
                <button
                  key={item.id}
                  className={`cms-nav-item ${activeTab === item.id ? 'active' : ''}`}
                  onClick={() => setActiveTab(item.id)}
                >
                  <span className="cms-nav-icon">{item.icon}</span>
                  {item.label}
                </button>
              ))}
            </div>

            {/* Main Content */}
            <div className="cms-main">
              {/* Overview Tab */}
              {activeTab === 'overview' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Dashboard Overview</h2>
                      <p className="cms-section-subtitle">Quick stats and recent activity</p>
                    </div>
                  </div>

                  <div className="cms-stats">
                    <div className="cms-stat-card">
                      <div className="cms-stat-label">Monthly Views</div>
                      <div className="cms-stat-value">{stats.totalViews}</div>
                      <div className="cms-stat-change"> 12% from last month</div>
                    </div>
                    <div className="cms-stat-card">
                      <div className="cms-stat-label">Pending Submissions</div>
                      <div className="cms-stat-value">{stats.submissions}</div>
                      <div className="cms-stat-change">8 new this week</div>
                    </div>
                    <div className="cms-stat-card">
                      <div className="cms-stat-label">Featured Items</div>
                      <div className="cms-stat-value">{stats.featured}</div>
                      <div className="cms-stat-change">Across all sections</div>
                    </div>
                    <div className="cms-stat-card">
                      <div className="cms-stat-label">HubSpot Leads</div>
                      <div className="cms-stat-value">{stats.hubspotLeads}</div>
                      <div className="cms-stat-change"> 24% conversion</div>
                    </div>
                  </div>

                  <h3 style={{marginBottom: '1rem', fontFamily: 'Cormorant Garamond, serif', fontSize: '1.5rem'}}>Recent Activity</h3>
                  <div className="cms-card">
                    <div style={{padding: '1rem 1.25rem', borderBottom: '1px solid var(--border-color)', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                      <div>
                        <strong>New business submission</strong>
                        <p style={{fontSize: '0.85rem', color: 'var(--text-light)'}}>Sweet Auburn Coffee - Pending Review</p>
                      </div>
                      <span style={{fontSize: '0.8rem', color: 'var(--text-light)'}}>2 hours ago</span>
                    </div>
                    <div style={{padding: '1rem 1.25rem', borderBottom: '1px solid var(--border-color)', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                      <div>
                        <strong>Event approved</strong>
                        <p style={{fontSize: '0.85rem', color: 'var(--text-light)'}}>Midtown Music Festival - Now Live</p>
                      </div>
                      <span style={{fontSize: '0.8rem', color: 'var(--text-light)'}}>5 hours ago</span>
                    </div>
                    <div style={{padding: '1rem 1.25rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                      <div>
                        <strong>Property featured</strong>
                        <p style={{fontSize: '0.85rem', color: 'var(--text-light)'}}>123 Piedmont Ave added to homepage</p>
                      </div>
                      <span style={{fontSize: '0.8rem', color: 'var(--text-light)'}}>1 day ago</span>
                    </div>
                  </div>
                </div>
              )}

              {/* Blog Posts Tab */}
              {activeTab === 'blogposts' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Blog Posts</h2>
                      <p className="cms-section-subtitle">Manage all blog posts ({blogPosts.length} total, {blogPosts.filter(p => p.status === 'published').length} published)</p>
                    </div>
                    <button className="cms-btn-add" onClick={() => { setEditingBlogPost(null); setShowBlogPostForm(true); }}>
                      + Create Post
                    </button>
                  </div>

                  {blogPosts.map(post => (
                    <div key={post.id} className="cms-card">
                      <div className="cms-card-header">
                        <img src={post.image} alt={post.title} className="cms-card-image" />
                        <div className="cms-card-info">
                          <div className="cms-card-meta">
                            <span className="cms-card-badge">{post.category}</span>
                            {post.featured && <span className="cms-card-featured">Featured</span>}
                            <span className={`listing-status ${post.status === 'published' ? 'approved' : 'pending'}`} style={{marginLeft: '0.5rem'}}>
                              {post.status}
                            </span>
                          </div>
                          <h3 className="cms-card-title">{post.title}</h3>
                          <p className="cms-card-desc">{post.excerpt}</p>
                          <p style={{fontSize: '0.8rem', color: 'var(--text-light)', marginTop: '0.5rem'}}>
                             {post.author}   {post.created_at}
                            {post.video_url && '   Has Video'}
                          </p>
                        </div>
                      </div>
                      <div className="cms-card-actions">
                        <button className="cms-action-btn" onClick={() => { setEditingBlogPost(post); setShowBlogPostForm(true); }}>Edit</button>
                        <button
                          className={`cms-action-btn ${post.featured ? 'unfeature' : 'feature'}`}
                          onClick={() => toggleBlogPostFeatured(post.id)}
                        >
                          {post.featured ? 'Unfeature' : 'Feature'}
                        </button>
                        <button
                          className="cms-action-btn"
                          onClick={() => toggleBlogPostStatus(post.id)}
                        >
                          {post.status === 'published' ? 'Unpublish' : 'Publish'}
                        </button>
                        <button className="cms-action-btn delete" onClick={() => handleDeleteBlogPost(post.id)}>Delete</button>
                      </div>
                    </div>
                  ))}

                  {blogPosts.length === 0 && (
                    <div className="empty-state">
                      <h3>No blog posts yet</h3>
                      <p>Create your first blog post to get started!</p>
                    </div>
                  )}
                </div>
              )}

              {/* Hero/Featured News Tab */}
              {activeTab === 'hero' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Featured News</h2>
                      <p className="cms-section-subtitle">The main hero story on the homepage</p>
                    </div>
                    <button className="cms-btn-add" onClick={() => openEditModal(heroStory, 'hero')}>
                      Edit Hero
                    </button>
                  </div>

                  <div className="cms-hero-preview">
                    <img src={heroStory.image} alt={heroStory.title} className="cms-hero-image" />
                    <div className="cms-hero-overlay">
                      <span className="cms-hero-category">{heroStory.category}</span>
                      <h2 className="cms-hero-title">{heroStory.title}</h2>
                      <p className="cms-hero-meta">By {heroStory.author}  {heroStory.date}</p>
                    </div>
                  </div>

                  <div className="cms-card">
                    <div className="cms-card-header">
                      <img src={heroStory.image} alt={heroStory.title} className="cms-card-image" />
                      <div className="cms-card-info">
                        <div className="cms-card-meta">
                          <span className="cms-card-badge">{heroStory.category}</span>
                          <span className="cms-card-featured">Currently Featured</span>
                        </div>
                        <h3 className="cms-card-title">{heroStory.title}</h3>
                        <p className="cms-card-desc">By {heroStory.author}  {heroStory.date}</p>
                      </div>
                    </div>
                    <div className="cms-card-actions">
                      <button className="cms-action-btn" onClick={() => openEditModal(heroStory, 'hero')}>Edit</button>
                      <button className="cms-action-btn">Preview</button>
                      <button className="cms-action-btn">Change Image</button>
                    </div>
                  </div>
                </div>
              )}

              {/* Editor's Choice Tab */}
              {activeTab === 'stories' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Editor's Choice</h2>
                      <p className="cms-section-subtitle">Curated stories displayed on homepage ({editorsChoice.filter(s => s.featured).length} featured)</p>
                    </div>
                    <button className="cms-btn-add">+ Add Story</button>
                  </div>

                  {editorsChoice.map(story => (
                    <div key={story.id} className="cms-card">
                      <div className="cms-card-header">
                        <img src={story.image} alt={story.title} className="cms-card-image" />
                        <div className="cms-card-info">
                          <div className="cms-card-meta">
                            <span className="cms-card-badge">{story.tag}</span>
                            {story.featured && <span className="cms-card-featured">Featured</span>}
                          </div>
                          <h3 className="cms-card-title">{story.title}</h3>
                          <p className="cms-card-desc">{story.date}</p>
                        </div>
                      </div>
                      <div className="cms-card-actions">
                        <button className="cms-action-btn" onClick={() => openEditModal(story, 'story')}>Edit</button>
                        <button
                          className={`cms-action-btn ${story.featured ? 'unfeature' : 'feature'}`}
                          onClick={() => toggleFeatured(story.id, 'story')}
                        >
                          {story.featured ? 'Unfeature' : 'Feature'}
                        </button>
                        <button className="cms-action-btn delete">Delete</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Featured Business Tab */}
              {activeTab === 'businesses' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Featured Businesses</h2>
                      <p className="cms-section-subtitle">Local businesses displayed on homepage ({businesses.filter(b => b.featured).length} featured)</p>
                    </div>
                    <button className="cms-btn-add">+ Add Business</button>
                  </div>

                  {businesses.map(business => (
                    <div key={business.id} className="cms-card">
                      <div className="cms-card-header">
                        <img src={business.image} alt={business.title} className="cms-card-image" />
                        <div className="cms-card-info">
                          <div className="cms-card-meta">
                            <span className="cms-card-badge">{business.badge}</span>
                            {business.featured && <span className="cms-card-featured">Featured</span>}
                          </div>
                          <h3 className="cms-card-title">{business.title}</h3>
                          <p className="cms-card-desc">{business.description}</p>
                          <p style={{fontSize: '0.8rem', color: 'var(--text-light)', marginTop: '0.5rem'}}>
                             {business.neighborhood}   {business.category}
                          </p>
                        </div>
                      </div>
                      <div className="cms-card-actions">
                        <button className="cms-action-btn" onClick={() => openEditModal(business, 'business')}>Edit</button>
                        <button
                          className={`cms-action-btn ${business.featured ? 'unfeature' : 'feature'}`}
                          onClick={() => toggleFeatured(business.id, 'business')}
                        >
                          {business.featured ? 'Unfeature' : 'Feature'}
                        </button>
                        <button className="cms-action-btn delete">Delete</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Events Tab */}
              {activeTab === 'events' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Upcoming Events</h2>
                      <p className="cms-section-subtitle">Events displayed on homepage ({events.filter(e => e.featured).length} featured)</p>
                    </div>
                    <button className="cms-btn-add">+ Add Event</button>
                  </div>

                  {events.map(event => (
                    <div key={event.id} className="cms-card">
                      <div className="cms-card-header">
                        <img src={event.image} alt={event.title} className="cms-card-image" />
                        <div className="cms-card-info">
                          <div className="cms-card-meta">
                            <span className="cms-card-badge">{event.badge}</span>
                            {event.featured && <span className="cms-card-featured">Featured</span>}
                          </div>
                          <h3 className="cms-card-title">{event.title}</h3>
                          <p className="cms-card-desc">{event.description}</p>
                          <p style={{fontSize: '0.8rem', color: 'var(--text-light)', marginTop: '0.5rem'}}>
                             {event.date}   {event.location}
                          </p>
                        </div>
                      </div>
                      <div className="cms-card-actions">
                        <button className="cms-action-btn" onClick={() => openEditModal(event, 'event')}>Edit</button>
                        <button
                          className={`cms-action-btn ${event.featured ? 'unfeature' : 'feature'}`}
                          onClick={() => toggleFeatured(event.id, 'event')}
                        >
                          {event.featured ? 'Unfeature' : 'Feature'}
                        </button>
                        <button className="cms-action-btn delete">Delete</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Properties Tab */}
              {activeTab === 'properties' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Featured Properties</h2>
                      <p className="cms-section-subtitle">Real estate listings on homepage ({properties.filter(p => p.featured).length} featured)</p>
                    </div>
                    <button className="cms-btn-add">+ Add Property</button>
                  </div>

                  {properties.map(property => (
                    <div key={property.id} className="cms-card">
                      <div className="cms-card-header">
                        <img src={property.image} alt={property.address} className="cms-card-image" />
                        <div className="cms-card-info">
                          <div className="cms-card-meta">
                            <span className="cms-card-badge">{property.price}</span>
                            {property.featured && <span className="cms-card-featured">Featured</span>}
                          </div>
                          <h3 className="cms-card-title">{property.address}</h3>
                          <p className="cms-card-desc">
                             {property.beds} beds   {property.baths} baths   {property.sqft} sq ft
                          </p>
                          <p style={{fontSize: '0.8rem', color: 'var(--text-light)', marginTop: '0.5rem'}}>
                             {property.neighborhood}
                          </p>
                        </div>
                      </div>
                      <div className="cms-card-actions">
                        <button className="cms-action-btn" onClick={() => openEditModal(property, 'property')}>Edit</button>
                        <button
                          className={`cms-action-btn ${property.featured ? 'unfeature' : 'feature'}`}
                          onClick={() => toggleFeatured(property.id, 'property')}
                        >
                          {property.featured ? 'Unfeature' : 'Feature'}
                        </button>
                        <button className="cms-action-btn delete">Delete</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Integrations Tab */}
              {activeTab === 'integrations' && (
                <div className="cms-section">
                  <div className="cms-section-header">
                    <div>
                      <h2 className="cms-section-title">Integrations</h2>
                      <p className="cms-section-subtitle">Connect with third-party services</p>
                    </div>
                  </div>

                  <div className="cms-integration-card">
                    <div className="cms-integration-icon">H</div>
                    <div className="cms-integration-info">
                      <h3>HubSpot CRM</h3>
                      <p>Sync leads, contacts, and submissions with your HubSpot account</p>
                    </div>
                    <div className="cms-integration-status">
                      <span></span> Connected
                    </div>
                  </div>

                  <div className="cms-card" style={{padding: '1.5rem'}}>
                    <h4 style={{marginBottom: '1rem'}}>HubSpot Settings</h4>
                    <div className="form-group">
                      <label className="form-label">API Key</label>
                      <input type="text" className="form-input" value="" readOnly style={{background: '#f5f5f5'}} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Portal ID</label>
                      <input type="text" className="form-input" value="12345678" readOnly style={{background: '#f5f5f5'}} />
                    </div>
                    <div style={{display: 'flex', gap: '1rem', flexWrap: 'wrap', marginTop: '1rem'}}>
                      <div className="cms-toggle-container">
                        <label className="cms-toggle">
                          <input type="checkbox" defaultChecked />
                          <span className="cms-toggle-slider"></span>
                        </label>
                        <span className="cms-toggle-label">Sync new submissions</span>
                      </div>
                      <div className="cms-toggle-container">
                        <label className="cms-toggle">
                          <input type="checkbox" defaultChecked />
                          <span className="cms-toggle-slider"></span>
                        </label>
                        <span className="cms-toggle-label">Auto-create contacts</span>
                      </div>
                      <div className="cms-toggle-container">
                        <label className="cms-toggle">
                          <input type="checkbox" />
                          <span className="cms-toggle-slider"></span>
                        </label>
                        <span className="cms-toggle-label">Send email notifications</span>
                      </div>
                    </div>
                  </div>

                  <div className="cms-integration-card" style={{marginTop: '1rem'}}>
                    <div className="cms-integration-icon" style={{background: '#4A90D9'}}>S</div>
                    <div className="cms-integration-info">
                      <h3>Supabase</h3>
                      <p>Database and authentication backend</p>
                    </div>
                    <div className="cms-integration-status pending">
                      <span></span> Demo Mode
                    </div>
                  </div>

                  <div className="cms-integration-card" style={{marginTop: '1rem'}}>
                    <div className="cms-integration-icon" style={{background: '#000'}}>V</div>
                    <div className="cms-integration-info">
                      <h3>Vercel</h3>
                      <p>Hosting and deployment</p>
                    </div>
                    <div className="cms-integration-status">
                      <span></span> Connected
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>

          {/* Blog Post Form Modal */}
          <BlogPostForm
            isOpen={showBlogPostForm}
            onClose={() => { setShowBlogPostForm(false); setEditingBlogPost(null); }}
            onSave={loadBlogPosts}
            post={editingBlogPost}
          />

          {/* Edit Modal */}
          {showEditModal && editItem && (
            <div className="cms-modal" onClick={(e) => e.target === e.currentTarget && setShowEditModal(false)}>
              <div className="cms-modal-content">
                <div className="cms-modal-header">
                  <h2>Edit {editType === 'hero' ? 'Featured News' : editType === 'story' ? 'Story' : editType === 'business' ? 'Business' : editType === 'event' ? 'Event' : 'Property'}</h2>
                  <button className="cms-modal-close" onClick={() => setShowEditModal(false)}>&times;</button>
                </div>
                <div className="cms-modal-body">
                  {(editType === 'hero' || editType === 'story') && (
                    <>
                      <div className="form-group">
                        <label className="form-label">Title</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.title}
                          onChange={(e) => setEditItem({...editItem, title: e.target.value})}
                        />
                      </div>
                      {editType === 'hero' && (
                        <>
                          <div className="form-group">
                            <label className="form-label">Category</label>
                            <input
                              type="text"
                              className="form-input"
                              value={editItem.category}
                              onChange={(e) => setEditItem({...editItem, category: e.target.value})}
                            />
                          </div>
                          <div className="form-row">
                            <div className="form-group">
                              <label className="form-label">Author</label>
                              <input
                                type="text"
                                className="form-input"
                                value={editItem.author}
                                onChange={(e) => setEditItem({...editItem, author: e.target.value})}
                              />
                            </div>
                            <div className="form-group">
                              <label className="form-label">Date</label>
                              <input
                                type="text"
                                className="form-input"
                                value={editItem.date}
                                onChange={(e) => setEditItem({...editItem, date: e.target.value})}
                              />
                            </div>
                          </div>
                        </>
                      )}
                      {editType === 'story' && (
                        <div className="form-row">
                          <div className="form-group">
                            <label className="form-label">Tag</label>
                            <input
                              type="text"
                              className="form-input"
                              value={editItem.tag}
                              onChange={(e) => setEditItem({...editItem, tag: e.target.value})}
                            />
                          </div>
                          <div className="form-group">
                            <label className="form-label">Date</label>
                            <input
                              type="text"
                              className="form-input"
                              value={editItem.date}
                              onChange={(e) => setEditItem({...editItem, date: e.target.value})}
                            />
                          </div>
                        </div>
                      )}
                      <div className="form-group">
                        <label className="form-label">Image URL</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.image}
                          onChange={(e) => setEditItem({...editItem, image: e.target.value})}
                        />
                      </div>
                    </>
                  )}

                  {editType === 'business' && (
                    <>
                      <div className="form-group">
                        <label className="form-label">Business Name</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.title}
                          onChange={(e) => setEditItem({...editItem, title: e.target.value})}
                        />
                      </div>
                      <div className="form-row">
                        <div className="form-group">
                          <label className="form-label">Badge/Type</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.badge}
                            onChange={(e) => setEditItem({...editItem, badge: e.target.value})}
                          />
                        </div>
                        <div className="form-group">
                          <label className="form-label">Category</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.category}
                            onChange={(e) => setEditItem({...editItem, category: e.target.value})}
                          />
                        </div>
                      </div>
                      <div className="form-group">
                        <label className="form-label">Description</label>
                        <textarea
                          className="form-textarea"
                          value={editItem.description}
                          onChange={(e) => setEditItem({...editItem, description: e.target.value})}
                        />
                      </div>
                      <div className="form-group">
                        <label className="form-label">Neighborhood</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.neighborhood}
                          onChange={(e) => setEditItem({...editItem, neighborhood: e.target.value})}
                        />
                      </div>
                      <div className="form-group">
                        <label className="form-label">Image URL</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.image}
                          onChange={(e) => setEditItem({...editItem, image: e.target.value})}
                        />
                      </div>
                    </>
                  )}

                  {editType === 'event' && (
                    <>
                      <div className="form-group">
                        <label className="form-label">Event Name</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.title}
                          onChange={(e) => setEditItem({...editItem, title: e.target.value})}
                        />
                      </div>
                      <div className="form-row">
                        <div className="form-group">
                          <label className="form-label">Badge/Type</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.badge}
                            onChange={(e) => setEditItem({...editItem, badge: e.target.value})}
                          />
                        </div>
                        <div className="form-group">
                          <label className="form-label">Date</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.date}
                            onChange={(e) => setEditItem({...editItem, date: e.target.value})}
                          />
                        </div>
                      </div>
                      <div className="form-group">
                        <label className="form-label">Description</label>
                        <textarea
                          className="form-textarea"
                          value={editItem.description}
                          onChange={(e) => setEditItem({...editItem, description: e.target.value})}
                        />
                      </div>
                      <div className="form-group">
                        <label className="form-label">Location</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.location}
                          onChange={(e) => setEditItem({...editItem, location: e.target.value})}
                        />
                      </div>
                      <div className="form-group">
                        <label className="form-label">Image URL</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.image}
                          onChange={(e) => setEditItem({...editItem, image: e.target.value})}
                        />
                      </div>
                    </>
                  )}

                  {editType === 'property' && (
                    <>
                      <div className="form-group">
                        <label className="form-label">Address</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.address}
                          onChange={(e) => setEditItem({...editItem, address: e.target.value})}
                        />
                      </div>
                      <div className="form-row">
                        <div className="form-group">
                          <label className="form-label">Price</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.price}
                            onChange={(e) => setEditItem({...editItem, price: e.target.value})}
                          />
                        </div>
                        <div className="form-group">
                          <label className="form-label">Neighborhood</label>
                          <input
                            type="text"
                            className="form-input"
                            value={editItem.neighborhood}
                            onChange={(e) => setEditItem({...editItem, neighborhood: e.target.value})}
                          />
                        </div>
                      </div>
                      <div className="form-row">
                        <div className="form-group">
                          <label className="form-label">Beds</label>
                          <input
                            type="number"
                            className="form-input"
                            value={editItem.beds}
                            onChange={(e) => setEditItem({...editItem, beds: parseInt(e.target.value)})}
                          />
                        </div>
                        <div className="form-group">
                          <label className="form-label">Baths</label>
                          <input
                            type="number"
                            className="form-input"
                            value={editItem.baths}
                            onChange={(e) => setEditItem({...editItem, baths: parseInt(e.target.value)})}
                          />
                        </div>
                      </div>
                      <div className="form-group">
                        <label className="form-label">Square Feet</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.sqft}
                          onChange={(e) => setEditItem({...editItem, sqft: e.target.value})}
                        />
                      </div>
                      <div className="form-group">
                        <label className="form-label">Image URL</label>
                        <input
                          type="text"
                          className="form-input"
                          value={editItem.image}
                          onChange={(e) => setEditItem({...editItem, image: e.target.value})}
                        />
                      </div>
                    </>
                  )}
                </div>
                <div className="cms-modal-footer">
                  <button className="cms-btn-cancel" onClick={() => setShowEditModal(false)}>Cancel</button>
                  <button className="cms-btn-save" onClick={handleSave}>Save Changes</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    // Archive Item Card Component
    function ArchiveItem({ item, type, onSave, isSaved, onClick }) {
      const isEvent = type === 'event';
      const isBusiness = type === 'business';

      // Generate a unique ID based on item properties
      const itemId = item.id || item.title.toLowerCase().replace(/\s+/g, '-');

      return (
        <div className="archive-item" onClick={() => onClick(item)}>
          <div className="archive-item-image-wrapper">
            <img
              src={item.image}
              alt={item.title}
              className="archive-item-image"
            />
            {item.featured && (
              <span className="archive-item-featured-badge">Featured</span>
            )}
            {isEvent && item.date && (
              <span className="archive-item-date-badge">{item.date}</span>
            )}
            <button
              className={`archive-item-save-btn ${isSaved ? 'saved' : ''}`}
              onClick={(e) => onSave(type, itemId, e)}
              aria-label={isSaved ? 'Unsave item' : 'Save item'}
            >
              {isSaved ? '' : ''}
            </button>
          </div>
          <div className="archive-item-content">
            <span className="archive-item-category">{item.badge || item.category}</span>
            <h3 className="archive-item-title">{item.title}</h3>
            <p className="archive-item-neighborhood">
               {isEvent ? item.location : item.neighborhood}
            </p>
            <p className="archive-item-description">{item.description}</p>
          </div>
        </div>
      );
    }

    function App() {
      const [activeSection, setActiveSection] = useState('home');
      const [selectedNeighborhood, setSelectedNeighborhood] = useState(null);
      const [selectedArea, setSelectedArea] = useState(null);
      const [user, setUser] = useState(null);
      const [showAuth, setShowAuth] = useState(false);
      const [showSubmit, setShowSubmit] = useState(false);
      const [submitType, setSubmitType] = useState('business');
      const [showDashboard, setShowDashboard] = useState(false);
      const [showUserMenu, setShowUserMenu] = useState(false);
      const [showCMS, setShowCMS] = useState(false);

      // Mobile menu state
      const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
      const [mobileDropdownOpen, setMobileDropdownOpen] = useState(null);

      const toggleMobileMenu = () => {
        setMobileMenuOpen(!mobileMenuOpen);
        setMobileDropdownOpen(null);
      };

      const toggleMobileDropdown = (dropdown) => {
        setMobileDropdownOpen(mobileDropdownOpen === dropdown ? null : dropdown);
      };

      const closeMobileMenu = () => {
        setMobileMenuOpen(false);
        setMobileDropdownOpen(null);
      };

      // Area groupings - mapping 8 areas to existing neighborhood IDs
      const areaGroupings = {
        buckhead: { name: 'Buckhead', neighborhoods: ['buckhead'] },
        midtown: { name: 'Midtown', neighborhoods: ['midtown'] },
        downtown: { name: 'Downtown', neighborhoods: ['downtown'] },
        eastside: { name: 'Eastside', neighborhoods: ['oldFourthWard', 'virginiaHighland', 'inmanPark', 'decatur'] },
        westside: { name: 'Westside', neighborhoods: ['westMidtown'] },
        southeast: { name: 'Southeast', neighborhoods: ['eastAtlanta', 'grantPark'] },
        southwest: { name: 'Southwest', neighborhoods: [] },
        northwest: { name: 'Northwest', neighborhoods: [] }
      };

      // Saved items state for archive cards
      const [savedItems, setSavedItems] = useState({ events: [], businesses: [] });

      const toggleSaveItem = (type, id, e) => {
        e.stopPropagation();
        setSavedItems(prev => ({
          ...prev,
          [type]: prev[type].includes(id)
            ? prev[type].filter(i => i !== id)
            : [...prev[type], id]
        }));
      };

      const isItemSaved = (type, id) => savedItems[type].includes(id);

      // IDX Broker / Property state
      const [propertyFilters, setPropertyFilters] = useState({});
      const [showPropertySearch, setShowPropertySearch] = useState(false);
      const [showPropertyLead, setShowPropertyLead] = useState(false);
      const [showPropertyDetail, setShowPropertyDetail] = useState(false);
      const [selectedProperty, setSelectedProperty] = useState(null);

      // IDX property handlers
      const handlePropertyFilterChange = (filters) => {
        setPropertyFilters(filters);
      };

      const handlePropertySearch = (filters) => {
        // Open full search results in IDX hosted page
        const searchUrl = buildIDXSearchUrl(filters);
        window.open(searchUrl, '_blank');
      };

      const handlePropertyClick = (property) => {
        setSelectedProperty(property);
        setShowPropertyDetail(true);
      };

      const handlePropertyInquiry = (property) => {
        setSelectedProperty(property);
        setShowPropertyLead(true);
      };

      // Homepage Map System V1 - Area selection state for filtering
      const [mapSelectedArea, setMapSelectedArea] = useState(null);
      const [mapVisible, setMapVisible] = useState(false);
      const mapSectionRef = React.useRef(null);

      // Lazy load map when scrolled into view
      useEffect(() => {
        const observer = new IntersectionObserver(
          ([entry]) => {
            if (entry.isIntersecting) {
              setMapVisible(true);
              observer.disconnect();
            }
          },
          { rootMargin: '200px' }
        );

        if (mapSectionRef.current) {
          observer.observe(mapSectionRef.current);
        }

        return () => observer.disconnect();
      }, []);

      // Get featured listings (priority) or fallback to recent
      const getFeaturedListings = (type, limit) => {
        const approvedListings = demoListings.filter(item => item.type === type && item.status === 'approved');
        const featured = approvedListings.filter(item => item.featured).slice(0, limit);

        if (featured.length < limit) {
          const recent = approvedListings
            .filter(item => !item.featured)
            .slice(0, limit - featured.length);
          return [...featured, ...recent];
        }
        return featured;
      };

      // Map area IDs to listing area values (handle different naming conventions)
      const mapAreaToListingAreas = (areaId) => {
        const areaMapping = {
          'downtown': ['downtown'],
          'midtown': ['midtown'],
          'eastside': ['eastside', 'oldFourthWard', 'virginiaHighland', 'inmanPark', 'inman park', 'old fourth ward', 'virginia-highland'],
          'westside': ['westside', 'westMidtown', 'west midtown'],
          'southwest': ['southwest', 'westEnd', 'west end'],
          'southeast': ['southeast', 'eastAtlanta', 'grantPark', 'east atlanta', 'grant park', 'east atlanta village'],
          'buckhead': ['buckhead'],
          'south-atlanta': ['southAtlanta', 'south atlanta'],
          'north-atlanta': ['northAtlanta', 'north atlanta']
        };
        return areaMapping[areaId] || [areaId];
      };

      // Filter by selected area
      const getFilteredListings = (type) => {
        if (!mapSelectedArea) {
          return getFeaturedListings(type, 3);
        }
        const areaVariants = mapAreaToListingAreas(mapSelectedArea);
        return demoListings
          .filter(item =>
            item.type === type &&
            item.status === 'approved' &&
            (areaVariants.some(av =>
              (item.area && item.area.toLowerCase().includes(av.toLowerCase())) ||
              (item.area_id && item.area_id.toLowerCase().includes(av.toLowerCase())) ||
              (item.neighborhood && item.neighborhood.toLowerCase().includes(av.toLowerCase()))
            ))
          )
          .slice(0, 6);
      };

      // Filter stories by area
      const getFilteredStories = () => {
        if (!mapSelectedArea) {
          return demoBlogPosts.filter(p => p.status === 'published').slice(0, 3);
        }
        const areaVariants = mapAreaToListingAreas(mapSelectedArea);
        return demoBlogPosts
          .filter(p =>
            p.status === 'published' &&
            (areaVariants.some(av =>
              (p.areaTag && p.areaTag.toLowerCase().includes(av.toLowerCase())) ||
              (p.areaTags && p.areaTags.some(t => t.toLowerCase().includes(av.toLowerCase()))) ||
              (p.neighborhood && p.neighborhood.toLowerCase().includes(av.toLowerCase()))
            ))
          )
          .slice(0, 6);
      };

      // Routing state for detail pages
      const [currentView, setCurrentView] = useState('home');
      const [viewItemId, setViewItemId] = useState(null);
      const [viewItemType, setViewItemType] = useState(null);
      const [viewItem, setViewItem] = useState(null);
      const [currentArea, setCurrentArea] = useState(null);

      // Navigation function for detail pages
      const navigateTo = (view, itemType = null, item = null) => {
        setCurrentView(view);
        setViewItemType(itemType);
        setViewItem(item);
        if (view === 'area' && item) {
          setCurrentArea(item);
        } else if (view === 'detail' && itemType === 'neighborhood' && item) {
          // When navigating to a neighborhood, find and store the parent area
          // so the back button can return to the area page
          const parentArea = neighborhoods.find(n => n.id === item.area);
          if (parentArea) {
            setCurrentArea(parentArea);
          }
        } else if (view === 'home') {
          setCurrentArea(null);
        }
        window.scrollTo(0, 0);
      };

      const handleLogin = (userData) => {
        setUser(userData);
        setShowAuth(false);
      };

      const handleLogout = async () => {
        await mockSupabase.auth.signOut();
        setUser(null);
        setShowUserMenu(false);
        setShowDashboard(false);
      };

      const openSubmit = (type) => {
        if (!user) {
          setShowAuth(true);
        } else {
          setSubmitType(type);
          setShowSubmit(true);
        }
      };

      // Sample data
      const heroStory = {
        category: 'Featured Story',
        title: 'The Renaissance of Old Fourth Ward',
        author: 'Marcus Johnson',
        date: 'January 27, 2026',
        image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1600'
      };

      const featuredStories = [
        {
          tag: 'Culture',
          title: 'Ponce City Market: Where History Meets Innovation',
          date: '25 Jan 2026',
          image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800'
        },
        {
          tag: 'Food Scene',
          title: 'Best Brunch Spots in Inman Park',
          date: '24 Jan 2026',
          image: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800'
        },
        {
          tag: 'Nightlife',
          title: 'Hidden Speakeasies You Need to Visit',
          date: '23 Jan 2026',
          image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800'
        }
      ];

      const businesses = [
        {
          badge: 'Restaurant',
          title: 'Buttermilk Kitchen',
          description: 'Farm-to-table Southern comfort food in Buckhead. Known for their legendary fried chicken and homemade biscuits.',
          neighborhood: 'Buckhead',
          category: 'Dining',
          image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800'
        },
        {
          badge: 'Coffee Shop',
          title: 'Octane Coffee',
          description: 'Award-winning coffee roasters with multiple locations across Atlanta. Perfect workspace with excellent wifi.',
          neighborhood: 'West Midtown',
          category: 'Caf',
          image: 'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800'
        }
      ];

      const events = [
        {
          badge: 'Music Festival',
          title: 'Atlanta Jazz Festival 2026',
          description: 'Three days of world-class jazz performances in Piedmont Park. Featuring international and local artists.',
          date: 'May 25-27, 2026',
          location: 'Piedmont Park',
          image: 'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800'
        },
        {
          badge: 'Art Exhibition',
          title: 'High Museum Contemporary Showcase',
          description: 'Exploring the intersection of technology and traditional art forms through immersive installations.',
          date: 'Feb 15 - Apr 30, 2026',
          location: 'High Museum',
          image: 'https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=800'
        }
      ];

      const properties = [
        {
          price: '$575,000',
          address: '123 Piedmont Ave NE',
          neighborhood: 'Midtown',
          beds: 3,
          baths: 2,
          sqft: '2,100',
          image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800'
        },
        {
          price: '$425,000',
          address: '456 Highland Ave',
          neighborhood: 'Old Fourth Ward',
          beds: 2,
          baths: 2,
          sqft: '1,650',
          image: 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800'
        },
        {
          price: '$1,250,000',
          address: '789 West Paces Ferry Rd',
          neighborhood: 'Buckhead',
          beds: 5,
          baths: 4,
          sqft: '4,200',
          image: 'https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800'
        }
      ];

      const neighborhoods = [
        {
          id: 'buckhead',
          name: 'Buckhead',
          lat: 33.8384,
          lng: -84.3794,
          description: 'Atlanta\'s upscale district known for luxury shopping at Lenox Square and Phipps Plaza, high-end dining, and vibrant nightlife. Tree-lined streets, historic estates, and modern high-rises define this affluent neighborhood.',
          vibes: ['Upscale', 'Shopping', 'Nightlife', 'Dining'],
          image: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800',
          businesses: [
            { name: 'Bones Restaurant', type: 'Fine Dining Steakhouse' },
            { name: 'Lenox Square', type: 'Luxury Shopping Mall' },
            { name: 'Blue Ridge Grill', type: 'Upscale Southern Cuisine' }
          ],
          events: [
            { name: 'Buckhead Art Walk', type: 'Monthly Gallery Tour' },
            { name: 'Wine & Dine Festival', type: 'Annual Food Event' }
          ],
          properties: [
            { price: '$1,250,000', details: '5 bed, 4 bath - West Paces Ferry' },
            { price: '$875,000', details: '4 bed, 3 bath - Peachtree Battle' }
          ]
        },
        {
          id: 'midtown',
          name: 'Midtown',
          lat: 33.7866,
          lng: -84.3829,
          description: 'The heart of Atlanta\'s arts and culture scene. Home to the High Museum, Woodruff Arts Center, and beautiful Piedmont Park. A walkable urban neighborhood with stunning high-rises and a thriving LGBTQ+ community.',
          vibes: ['Arts District', 'Walkable', 'Parks', 'Cultural Hub'],
          image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800',
          businesses: [
            { name: 'High Museum of Art', type: 'World-Class Art Museum' },
            { name: 'Park Tavern', type: 'Restaurant & Event Venue' },
            { name: 'Colony Square', type: 'Mixed-Use Development' }
          ],
          events: [
            { name: 'Music Midtown', type: 'Annual Music Festival' },
            { name: 'Piedmont Park Arts Festival', type: 'Annual Arts Fair' }
          ],
          properties: [
            { price: '$575,000', details: '3 bed, 2 bath - Piedmont Ave' },
            { price: '$425,000', details: '2 bed, 2 bath - 10th Street' }
          ]
        },
        {
          id: 'downtown',
          name: 'Downtown',
          lat: 33.7537,
          lng: -84.3901,
          description: 'Atlanta\'s business and entertainment hub featuring Mercedes-Benz Stadium, State Farm Arena, and iconic attractions like the Georgia Aquarium and World of Coca-Cola. Rich in history and constantly evolving.',
          vibes: ['Business District', 'Sports', 'Attractions', 'Historic'],
          image: 'https://images.unsplash.com/photo-1534430480872-3498386e7856?w=800',
          businesses: [
            { name: 'Georgia Aquarium', type: 'World\'s Largest Aquarium' },
            { name: 'Centennial Olympic Park', type: 'Urban Park & Landmark' },
            { name: 'Sweet Auburn Market', type: 'Historic Public Market' }
          ],
          events: [
            { name: 'Atlanta Hawks Games', type: 'NBA Basketball' },
            { name: 'Peach Drop', type: 'New Year\'s Eve Celebration' }
          ],
          properties: [
            { price: '$350,000', details: '2 bed, 2 bath - Luckie Street Loft' },
            { price: '$495,000', details: '2 bed, 2 bath - Centennial Park Condo' }
          ]
        },
        {
          id: 'oldFourthWard',
          name: 'Old Fourth Ward',
          lat: 33.7696,
          lng: -84.3636,
          description: 'Historic neighborhood transformed by the Atlanta BeltLine. Home to Ponce City Market, Martin Luther King Jr.\'s birthplace, and a thriving food and art scene. A perfect blend of history and modern urban living.',
          vibes: ['BeltLine', 'Historic', 'Trendy', 'Food Scene'],
          image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800',
          businesses: [
            { name: 'Ponce City Market', type: 'Food Hall & Shops' },
            { name: 'Krog Street Market', type: 'Local Food Hall' },
            { name: 'King Center', type: 'Historic Memorial' }
          ],
          events: [
            { name: 'BeltLine Lantern Parade', type: 'Annual Community Event' },
            { name: 'O4W Food Festival', type: 'Annual Culinary Event' }
          ],
          properties: [
            { price: '$425,000', details: '2 bed, 2 bath - Highland Ave Loft' },
            { price: '$650,000', details: '3 bed, 2 bath - North Ave Townhome' }
          ]
        },
        {
          id: 'virginiaHighland',
          name: 'Virginia-Highland',
          lat: 33.7741,
          lng: -84.3519,
          description: 'One of Atlanta\'s most beloved walkable neighborhoods. Tree-lined streets, local boutiques, sidewalk cafes, and a strong sense of community. Popular with young professionals and families alike.',
          vibes: ['Walkable', 'Boutiques', 'Restaurants', 'Community'],
          image: 'https://images.unsplash.com/photo-1416339306562-f3d12fefd36f?w=800',
          businesses: [
            { name: 'Murphy\'s', type: 'Classic American Restaurant' },
            { name: 'Highland Bakery', type: 'Local Breakfast Spot' },
            { name: 'Bill Hallman', type: 'Boutique Clothing Store' }
          ],
          events: [
            { name: 'Summerfest', type: 'Annual Street Festival' },
            { name: 'Tour of Homes', type: 'Annual Home Tour' }
          ],
          properties: [
            { price: '$725,000', details: '3 bed, 2 bath - Virginia Ave Craftsman' },
            { price: '$550,000', details: '2 bed, 2 bath - St. Charles Ave' }
          ]
        },
        {
          id: 'inmanPark',
          name: 'Inman Park',
          lat: 33.7619,
          lng: -84.3522,
          description: 'Atlanta\'s first planned suburb with stunning Victorian architecture. Known for the Inman Park Festival, eclectic restaurants, and access to the BeltLine. A charming neighborhood with historic character.',
          vibes: ['Historic', 'Victorian', 'Festivals', 'BeltLine Access'],
          image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800',
          businesses: [
            { name: 'Barcelona Wine Bar', type: 'Spanish Tapas & Wine' },
            { name: 'Wrecking Bar Brewpub', type: 'Craft Brewery & Restaurant' },
            { name: 'Little Five Points', type: 'Alternative Shopping District' }
          ],
          events: [
            { name: 'Inman Park Festival', type: 'Annual Arts & Music Festival' },
            { name: 'Parade of Homes', type: 'Historic Home Tour' }
          ],
          properties: [
            { price: '$895,000', details: '4 bed, 3 bath - Victorian on Euclid' },
            { price: '$625,000', details: '3 bed, 2 bath - Delta Place Bungalow' }
          ]
        },
        {
          id: 'westMidtown',
          name: 'West Midtown',
          lat: 33.7918,
          lng: -84.4108,
          description: 'Former industrial zone turned trendy hotspot. Converted warehouses house acclaimed restaurants, art galleries, and creative offices. The Westside Provisions District anchors this rapidly evolving area.',
          vibes: ['Industrial Chic', 'Restaurants', 'Galleries', 'Creative'],
          image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800',
          businesses: [
            { name: 'Westside Provisions', type: 'Shopping & Dining District' },
            { name: 'Miller Union', type: 'Award-Winning Restaurant' },
            { name: 'Octane Coffee', type: 'Artisanal Coffee Roaster' }
          ],
          events: [
            { name: 'Westside Art Walk', type: 'Monthly Gallery Event' },
            { name: 'Atlanta Food & Wine', type: 'Annual Festival' }
          ],
          properties: [
            { price: '$520,000', details: '2 bed, 2 bath - Howell Mill Loft' },
            { price: '$785,000', details: '3 bed, 2 bath - Marietta St Townhome' }
          ]
        },
        {
          id: 'eastAtlanta',
          name: 'East Atlanta',
          lat: 33.7400,
          lng: -84.3422,
          description: 'Eclectic and unpretentious neighborhood centered around East Atlanta Village. Known for its live music venues, dive bars, and independent spirit. A haven for artists, musicians, and free thinkers.',
          vibes: ['Eclectic', 'Live Music', 'Dive Bars', 'Indie'],
          image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800',
          businesses: [
            { name: 'The Earl', type: 'Legendary Live Music Venue' },
            { name: 'Argosy', type: 'Neighborhood Bar & Grill' },
            { name: 'Holy Taco', type: 'Mexican Street Food' }
          ],
          events: [
            { name: 'East Atlanta Strut', type: 'Annual Neighborhood Festival' },
            { name: 'Live at The Earl', type: 'Weekly Concert Series' }
          ],
          properties: [
            { price: '$375,000', details: '2 bed, 1 bath - Flat Shoals Bungalow' },
            { price: '$485,000', details: '3 bed, 2 bath - Glenwood Ave' }
          ]
        },
        {
          id: 'decatur',
          name: 'Decatur',
          lat: 33.7748,
          lng: -84.2963,
          description: 'Charming city-within-a-city known for its walkable downtown square, excellent schools, and thriving food scene. Family-friendly with a progressive vibe and strong community events throughout the year.',
          vibes: ['Family-Friendly', 'Downtown Square', 'Dining', 'Progressive'],
          image: 'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=800',
          businesses: [
            { name: 'Leon\'s Full Service', type: 'Southern Gastropub' },
            { name: 'Eddie\'s Attic', type: 'Acoustic Music Venue' },
            { name: 'The Brick Store Pub', type: 'Craft Beer Destination' }
          ],
          events: [
            { name: 'Decatur Book Festival', type: 'Annual Literary Event' },
            { name: 'Decatur BBQ Festival', type: 'Annual BBQ Competition' }
          ],
          properties: [
            { price: '$595,000', details: '3 bed, 2 bath - Historic District' },
            { price: '$450,000', details: '2 bed, 2 bath - Downtown Condo' }
          ]
        },
        {
          id: 'grantPark',
          name: 'Grant Park',
          lat: 33.7400,
          lng: -84.3700,
          description: 'Historic neighborhood surrounding Atlanta\'s oldest park. Home to Zoo Atlanta and beautifully preserved Victorian homes. A tight-knit community with excellent restaurants and a beloved farmers market.',
          vibes: ['Historic Homes', 'Zoo Atlanta', 'Parks', 'Community'],
          image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800',
          businesses: [
            { name: 'Zoo Atlanta', type: 'Major Zoo & Conservation' },
            { name: 'Six Feet Under', type: 'Rooftop Seafood Restaurant' },
            { name: 'Grant Park Market', type: 'Weekly Farmers Market' }
          ],
          events: [
            { name: 'Grant Park Summer Shade Festival', type: 'Annual Arts Festival' },
            { name: 'Tour of Homes', type: 'Annual Historic Home Tour' }
          ],
          properties: [
            { price: '$675,000', details: '4 bed, 2 bath - Victorian on Cherokee' },
            { price: '$525,000', details: '3 bed, 2 bath - Boulevard Craftsman' }
          ]
        }
      ];

      return (
        <>
          {/* Navigation */}
          <nav className="navbar">
            <a href="/" className="logo" onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('home'); }}>
              <span className="logo-main">ATL Vibes & Views</span>
              <span className="logo-tagline">Culture Blog & Vlog Magazine</span>
            </a>
            <ul className="nav-links">
              <li><a href="#home" onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('home'); }}>Home</a></li>
              <li className="nav-dropdown">
                <a href="#" onClick={(e) => e.preventDefault()}>Areas</a>
                <ul className="dropdown-menu">
                  <li><a href="buckhead.html">Buckhead</a></li>
                  <li><a href="midtown.html">Midtown</a></li>
                  <li><a href="downtown.html">Downtown</a></li>
                  <li><a href="eastside.html">Eastside</a></li>
                  <li><a href="westside.html">Westside</a></li>
                  <li><a href="north-atlanta.html">North Atlanta</a></li>
                  <li><a href="south-atlanta.html">South Atlanta</a></li>
                  <li><a href="southeast.html">Southeast Atlanta</a></li>
                  <li><a href="southwest.html">Southwest Atlanta</a></li>
                </ul>
              </li>
              <li><a href="#neighborhoods" onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('home'); }}>Neighborhoods</a></li>
              <li><a onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('eats-drinks'); }} style={{cursor: 'pointer'}}>Eats & Drinks</a></li>
              <li><a href="development.html">Development</a></li>
              <li><a href="#directory" onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('home'); }}>Directory</a></li>
              <li><a onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('events'); }} style={{cursor: 'pointer'}}>Events</a></li>
              <li><a href="#properties" onClick={() => { setShowDashboard(false); setShowCMS(false); navigateTo('home'); }}>Properties</a></li>
              {user ? (
                <>
                  <li><button onClick={() => openSubmit('business')} className="submit-btn">Submit Listing</button></li>
                  <li className="user-menu">
                    <div className="user-avatar" onClick={() => setShowUserMenu(!showUserMenu)}>
                      {user.name.charAt(0).toUpperCase()}
                    </div>
                    {showUserMenu && (
                      <div className="user-dropdown">
                        <button className="user-dropdown-item" onClick={() => { setShowDashboard(true); setShowUserMenu(false); setShowCMS(false); }}>
                          My Dashboard
                        </button>
                        <button className="user-dropdown-item" onClick={() => { openSubmit('business'); setShowUserMenu(false); }}>
                          Add Business
                        </button>
                        <button className="user-dropdown-item" onClick={() => { openSubmit('event'); setShowUserMenu(false); }}>
                          Add Event
                        </button>
                        <div className="user-dropdown-divider"></div>
                        <button className="user-dropdown-item" onClick={handleLogout}>
                          Sign Out
                        </button>
                      </div>
                    )}
                  </li>
                </>
              ) : (
                <li><button onClick={() => setShowAuth(true)} className="submit-btn">Sign In</button></li>
              )}
            </ul>
          </nav>

          {/* CMS Portal */}
          {showCMS ? (
            <CMSPortal onClose={() => setShowCMS(false)} />
          ) : showDashboard && user ? (
            <Dashboard user={user} onClose={() => setShowDashboard(false)} />
          ) : currentView === 'detail' && viewItemType === 'blog' && viewItem ? (
            <BlogPostDetail post={viewItem} onBack={() => navigateTo('home')} />
          ) : currentView === 'detail' && viewItemType === 'business' && viewItem ? (
            <BusinessDetail business={viewItem} onBack={() => navigateTo('home')} />
          ) : currentView === 'detail' && viewItemType === 'event' && viewItem ? (
            <EventDetailV2 event={viewItem} onBack={() => navigateTo('events')} onNavigate={navigateTo} />
          ) : currentView === 'detail' && viewItemType === 'property' && viewItem ? (
            <PropertyDetail property={viewItem} onBack={() => navigateTo('home')} />
          ) : currentView === 'detail' && viewItemType === 'neighborhood' && viewItem ? (
            <NeighborhoodPage
              neighborhood={viewItem}
              onBack={() => currentArea ? navigateTo('area', 'area', currentArea) : navigateTo('home')}
              onNavigateTo={navigateTo}
            />
          ) : currentView === 'area' && currentArea ? (
            <AreaPage
              area={currentArea}
              neighborhoods={neighborhoods}
              onBack={() => navigateTo('home')}
              onSelectNeighborhood={(n) => navigateTo('detail', 'neighborhood', n)}
              onNavigateTo={navigateTo}
            />
          ) : currentView === 'eats-drinks' ? (
            <EatsDrinksLanding
              onBack={() => navigateTo('home')}
              onNavigate={navigateTo}
              onSubmit={() => openSubmit('business')}
            />
          ) : currentView === 'events' ? (
            <EventsLandingPage
              onBack={() => navigateTo('home')}
              onNavigate={navigateTo}
              onSubmit={() => openSubmit('event')}
            />
          ) : currentView === 'past-events' ? (
            <PastEventsArchive
              onBack={() => navigateTo('events')}
              onNavigate={navigateTo}
            />
          ) : (
          <>
          {/* Hero Section */}
          <section
            className="hero"
            id="home"
            onClick={() => demoBlogPosts[0] && navigateTo('detail', 'blog', demoBlogPosts[0])}
            style={{cursor: 'pointer'}}
          >
            <img src={heroStory.image} alt="Hero" className="hero-image" />
            <div className="hero-content">
              <div className="hero-text">
                <span className="hero-category">{heroStory.category}</span>
                <h1 className="hero-title">{heroStory.title}</h1>
                <p className="hero-meta">By {heroStory.author}  {heroStory.date}</p>
              </div>
            </div>
          </section>

          {/* Featured Stories */}
          <section className="featured-stories">
            <div className="section-header">
              <h2 className="section-title">Editor's Choice</h2>
              <p className="section-subtitle">Stories Worth Your Time</p>
            </div>
            <div className="featured-grid">
              {demoBlogPosts.filter(p => p.status === 'published').slice(0, 3).map((post) => (
                <div
                  key={post.id}
                  className="story-card"
                  onClick={() => navigateTo('detail', 'blog', post)}
                  style={{cursor: 'pointer'}}
                >
                  <img src={post.image} alt={post.title} className="story-image" />
                  <div className="story-overlay">
                    <div className="story-tag">{post.category}</div>
                    <h3 className="story-title">{post.title}</h3>
                    <p className="story-date">{post.created_at}</p>
                  </div>
                </div>
              ))}
            </div>
          </section>

          {/* Neighborhoods Section */}
          <section className="neighborhoods-section" id="neighborhoods">
            <div className="neighborhoods-container">
              <div className="neighborhoods-content">
                <h2>Neighborhoods to Explore</h2>
                <p>From the historic charm of Virginia-Highland to the vibrant energy of Midtown, Atlanta's 243 neighborhoods each tell their own unique story. Discover the perfect community that matches your lifestyle.</p>
                <a href="#directory" className="neighborhoods-btn">Explore Neighborhoods</a>
              </div>
              <AtlantaMap
                neighborhoods={neighborhoods}
                onSelect={(area) => navigateTo('area', 'area', area)}
              />
            </div>
          </section>

          {/* Featured Businesses */}
          <section className="featured-section">
            <div className="section-header">
              <h2 className="section-title">Featured Businesses</h2>
              <p className="section-subtitle">Supporting Local Excellence</p>
            </div>
            <div className="featured-grid-2col">
              {businesses.map((business, index) => (
                <ArchiveItem
                  key={index}
                  item={business}
                  type="business"
                  onSave={toggleSaveItem}
                  isSaved={isItemSaved('businesses', business.id || business.title.toLowerCase().replace(/\s+/g, '-'))}
                  onClick={(item) => navigateTo('detail', 'business', item)}
                />
              ))}
            </div>
          </section>

          {/* Featured Events */}
          <section className="featured-section" id="events" style={{background: 'var(--secondary-yellow)'}}>
            <div className="section-header">
              <h2 className="section-title">Upcoming Events</h2>
              <p className="section-subtitle">Don't Miss Out</p>
            </div>
            <div className="featured-grid-2col">
              {events.map((event, index) => (
                <ArchiveItem
                  key={index}
                  item={event}
                  type="event"
                  onSave={toggleSaveItem}
                  isSaved={isItemSaved('events', event.id || event.title.toLowerCase().replace(/\s+/g, '-'))}
                  onClick={(item) => navigateTo('detail', 'event', item)}
                />
              ))}
            </div>
          </section>

          {/* Properties Section - IDX Broker Integration */}
          <section className="properties-section" id="properties">
            <div className="section-header">
              <h2 className="section-title">Atlanta Real Estate</h2>
              <p className="section-subtitle">Live FMLS Listings</p>
            </div>

            {/* Property Search Filters */}
            <PropertySearchFilters
              neighborhoods={demoNeighborhoods}
              onFilterChange={handlePropertyFilterChange}
              onSearch={handlePropertySearch}
            />

            {/* IDX Widget Container for Featured Listings */}
            <div id="idx-featured-properties" className="idx-showcase-wrapper">
              <IDXWidgetContainer
                type="showcase"
                config={IDX_CONFIG}
                filters={propertyFilters}
                onPropertyClick={handlePropertyClick}
              />

              {/* Fallback Demo Properties (shown when IDX not configured) */}
              {(!window.idxWidgets) && (
                <div className="properties-grid">
                  {properties.map((property, index) => (
                    <div
                      key={index}
                      className="property-card"
                      onClick={() => handlePropertyInquiry(property)}
                      style={{cursor: 'pointer'}}
                    >
                      <img src={property.image} alt={property.address} className="property-image" />
                      <div className="property-details">
                        <div className="property-price">{property.price}</div>
                        <div className="property-address">{property.address}</div>
                        <div className="property-specs">
                          <span> {property.beds} beds</span>
                          <span> {property.baths} baths</span>
                          <span> {property.sqft} sq ft</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* View All Properties CTA */}
            <div style={{textAlign: 'center'}}>
              <button
                className="view-all-properties-btn"
                onClick={() => handlePropertySearch(propertyFilters)}
              >
                View All Atlanta Listings
              </button>
            </div>
          </section>

          {/* Directory Actions */}
          <section className="directory-section" id="directory">
            <div className="section-header">
              <h2 className="section-title">Atlanta Directory</h2>
              <p className="section-subtitle">Connect with the City</p>
            </div>
            <div className="directory-actions">
              <div className="action-card">
                <div className="action-icon">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 21h18M5 21V7l8-4v18M13 21V3l6 3v15M9 9v.01M9 12v.01M9 15v.01M9 18v.01M17 9v.01M17 12v.01M17 15v.01M17 18v.01" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                </div>
                <h3 className="action-title">List Your Business</h3>
                <p className="action-description">Join hundreds of Atlanta businesses in our comprehensive directory. Get discovered by locals and visitors.</p>
                <button onClick={() => openSubmit('business')} className="action-button">Submit Listing</button>
              </div>
              <div className="action-card">
                <div className="action-icon">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="18" rx="2" strokeLinecap="round" strokeLinejoin="round"/>
                    <path d="M16 2v4M8 2v4M3 10h18" strokeLinecap="round" strokeLinejoin="round"/>
                    <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                </div>
                <h3 className="action-title">Submit an Event</h3>
                <p className="action-description">Share your event with the Atlanta community. From concerts to art shows, we showcase it all.</p>
                <button onClick={() => openSubmit('event')} className="action-button">Add Event</button>
              </div>
              <div className="action-card">
                <div className="action-icon">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" strokeLinecap="round" strokeLinejoin="round"/>
                    <circle cx="12" cy="9" r="2.5" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                </div>
                <h3 className="action-title">Explore by Neighborhood</h3>
                <p className="action-description">Filter businesses, events, and properties by any of Atlanta's 243 unique neighborhoods.</p>
                <a href="#neighborhoods" className="action-button">Browse Now</a>
              </div>
            </div>
          </section>

          {/* Ad Space */}
          <section className="ad-section">
            <div className="ad-content">
              <h2>Advertise With Us</h2>
              <p>Reach thousands of Atlanta locals and visitors. Partner with ATL Vibes & Views to grow your brand.</p>
              <a href="#contact" className="ad-button">Learn More</a>
            </div>
          </section>

          {/* Instagram Section */}
          <section className="instagram-section">
            <div className="section-header">
              <h2 className="section-title">Follow the Vibes</h2>
              <p className="section-subtitle">@atlvibesandviews on Instagram</p>
            </div>
            <div className="instagram-grid">
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400" alt="Atlanta skyline" />
              </div>
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400" alt="Atlanta food scene" />
              </div>
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400" alt="Atlanta nightlife" />
              </div>
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400" alt="Atlanta restaurant" />
              </div>
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1564399579883-451a5d44ec08?w=400" alt="Atlanta art" />
              </div>
              <div className="instagram-item">
                <img src="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=400" alt="Atlanta streets" />
              </div>
            </div>
            <a href="https://www.instagram.com/atlvibesandviews/" target="_blank" rel="noopener noreferrer" className="instagram-follow">
              Follow @atlvibesandviews
            </a>
          </section>

          </>
          )}

          {/* Footer */}
          <footer className="footer">
            <div className="footer-content">
              <div className="footer-brand">
                <h3>ATL Vibes & Views</h3>
                <p>Your comprehensive guide to Atlanta's neighborhoods, culture, events, and real estate. Discover what makes each corner of our city special.</p>
                <div className="social-links">
                  <a href="https://www.instagram.com/atlvibesandviews/" className="social-link" target="_blank" rel="noopener noreferrer">IG</a>
                  <a href="#" className="social-link">FB</a>
                  <a href="#" className="social-link">TW</a>
                  <a href="#" className="social-link">YT</a>
                </div>
              </div>
              <div className="footer-column">
                <h4>Navigate</h4>
                <ul className="footer-links">
                  <li><a href="#" onClick={(e) => { e.preventDefault(); navigateTo('home'); }}>Home</a></li>
                  <li><a href="#" onClick={(e) => { e.preventDefault(); navigateTo('events'); }}>Events</a></li>
                  <li><a href="#" onClick={(e) => { e.preventDefault(); navigateTo('eats-drinks'); }}>Eats & Drinks</a></li>
                  <li><a href="development.html">ATL Development</a></li>
                  <li><a href="about.html">About</a></li>
                  <li><a href="contact.html">Contact</a></li>
                </ul>
              </div>
              <div className="footer-column">
                <h4>Get Listed</h4>
                <ul className="footer-links">
                  <li><a href="#" onClick={(e) => { e.preventDefault(); openSubmit('business'); }}>Submit Business</a></li>
                  <li><a href="#" onClick={(e) => { e.preventDefault(); openSubmit('event'); }}>Add Event</a></li>
                  <li><a href="#submit">Advertise</a></li>
                </ul>
              </div>
              <div className="footer-column">
                <h4>Newsletter</h4>
                <p style={{fontSize: '0.9rem', color: 'var(--text-light)', marginBottom: '1rem'}}>Get the latest Atlanta vibes delivered to your inbox.</p>
                <form className="newsletter-form" onSubmit={(e) => e.preventDefault()} style={{display: 'flex', gap: '0.5rem'}}>
                  <input type="email" placeholder="Enter your email" style={{flex: 1, padding: '0.6rem 0.8rem', border: '1px solid var(--border-color)', borderRadius: '4px', fontSize: '0.9rem'}} />
                  <button type="submit" style={{background: 'var(--primary-red)', color: 'white', border: 'none', padding: '0.6rem 1rem', borderRadius: '4px', cursor: 'pointer', fontSize: '0.9rem', fontWeight: '600'}}>Subscribe</button>
                </form>
              </div>
              <div className="footer-column">
                <h4>Legal</h4>
                <ul className="footer-links">
                  <li><a href="terms.html">Terms & Conditions</a></li>
                  <li><a href="privacy.html">Privacy Policy</a></li>
                  <li><a href="cookies.html">Cookie Policy</a></li>
                </ul>
              </div>
            </div>
            {/* MLS Compliance Section */}
            <div className="mls-compliance">
              <div className="mls-compliance-content">
                <img
                  src="https://www.fmls.com/assets/fmls-logo.png"
                  alt="FMLS - First Multiple Listing Service"
                  className="mls-logo"
                  onError={(e) => { e.target.style.display = 'none'; }}
                />
                <div className="mls-disclaimer">
                  <p><strong>FMLS Data Disclaimer:</strong> Listings marked with the FMLS logo come from FMLS and are held by brokerage firms other than the owner of this website. The listing brokerage is identified in any listing details. Information is deemed reliable but is not guaranteed.</p>
                  <p>Copyright &copy; {new Date().getFullYear()} First Multiple Listing Service, Inc. All rights reserved. IDX information is provided exclusively for consumers' personal, non-commercial use and may not be used for any purpose other than to identify prospective properties consumers may be interested in purchasing.</p>
                  <p>Data last updated: {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</p>
                </div>
              </div>
            </div>

            <div className="footer-bottom">
              <p>&copy; 2026 ATL Vibes & Views. All rights reserved. |
                <a href="terms.html">Terms</a> |
                <a href="privacy.html">Privacy</a> |
                <a href="cookies.html">Cookies</a>
              </p>
            </div>
          </footer>

          {/* Neighborhood Filter Panel - Shows neighborhoods in selected area */}
          {selectedArea && (
            <NeighborhoodFilter
              area={selectedArea}
              onClose={() => setSelectedArea(null)}
              onSelectNeighborhood={(n) => {
                // Navigate to the NeighborhoodPage for the selected neighborhood
                setSelectedArea(null);
                navigateTo('detail', 'neighborhood', n);
              }}
            />
          )}

          {/* Auth Modal */}
          <AuthModal
            isOpen={showAuth}
            onClose={() => setShowAuth(false)}
            onLogin={handleLogin}
          />

          {/* Submit Modal */}
          {user && (
            <SubmitModal
              isOpen={showSubmit}
              onClose={() => setShowSubmit(false)}
              user={user}
              type={submitType}
            />
          )}

          {/* Property Lead Form Modal */}
          <PropertyLeadForm
            isOpen={showPropertyLead}
            onClose={() => {
              setShowPropertyLead(false);
              setSelectedProperty(null);
            }}
            property={selectedProperty}
            user={user}
          />

          {/* IDX Property Detail Modal */}
          <IDXPropertyDetail
            isOpen={showPropertyDetail}
            onClose={() => {
              setShowPropertyDetail(false);
              setSelectedProperty(null);
            }}
            property={selectedProperty}
          />
        </>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
